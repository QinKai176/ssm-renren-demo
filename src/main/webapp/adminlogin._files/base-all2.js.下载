(function(){var parsed,separatorIndex,combinatorIndex,reversed,cache={},reverseCache={},reUnescape=/\\/g;var parse=function(expression,isReversed){if(expression==null)return null;if(expression.Slick===true)return expression;expression=(""+expression).replace(/^\s+|\s+$/g,"");reversed=!!isReversed;var currentCache=reversed?reverseCache:cache;if(currentCache[expression])return currentCache[expression];parsed={Slick:true,expressions:[],raw:expression,reverse:function(){return parse(this.raw,true)}};separatorIndex=-1;while(expression!=(expression=expression.replace(regexp,parser)));parsed.length=parsed.expressions.length;return currentCache[expression]=reversed?reverse(parsed):parsed};var reverseCombinator=function(combinator){if(combinator==="!")return" ";else if(combinator===" ")return"!";else if(/^!/.test(combinator))return combinator.replace(/^!/,"");else return"!"+combinator};var reverse=function(expression){var expressions=expression.expressions;for(var i=0;i<expressions.length;i++){var exp=expressions[i];var last={parts:[],tag:"*",combinator:reverseCombinator(exp[0].combinator)};for(var j=0;j<exp.length;j++){var cexp=exp[j];if(!cexp.reverseCombinator)cexp.reverseCombinator=" ";cexp.combinator=cexp.reverseCombinator;delete cexp.reverseCombinator}exp.reverse().push(last)}return expression};var escapeRegExp=function(string){return string.replace(/[-[\]{}()*+?.\\^$|,#\s]/g,"\\$&")};var regexp=new RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|:+(<unicode>+)(?:\\((?:(?:([\"'])([^\\12]*)\\12)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+escapeRegExp(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])"));function parser(rawMatch,separator,combinator,combinatorChildren,tagName,id,className,attributeKey,attributeOperator,attributeQuote,attributeValue,pseudoClass,pseudoQuote,pseudoClassQuotedValue,pseudoClassValue){if(separator||separatorIndex===-1){parsed.expressions[++separatorIndex]=[];combinatorIndex=-1;if(separator)return""}if(combinator||combinatorChildren||combinatorIndex===-1){combinator=combinator||" ";var currentSeparator=parsed.expressions[separatorIndex];if(reversed&&currentSeparator[combinatorIndex])currentSeparator[combinatorIndex].reverseCombinator=reverseCombinator(combinator);currentSeparator[++combinatorIndex]={combinator:combinator,tag:"*"}}var currentParsed=parsed.expressions[separatorIndex][combinatorIndex];if(tagName){currentParsed.tag=tagName.replace(reUnescape,"")}else if(id){currentParsed.id=id.replace(reUnescape,"")}else if(className){className=className.replace(reUnescape,"");if(!currentParsed.classList)currentParsed.classList=[];if(!currentParsed.classes)currentParsed.classes=[];currentParsed.classList.push(className);currentParsed.classes.push({value:className,regexp:new RegExp("(^|\\s)"+escapeRegExp(className)+"(\\s|$)")})}else if(pseudoClass){pseudoClassValue=pseudoClassValue||pseudoClassQuotedValue;pseudoClassValue=pseudoClassValue?pseudoClassValue.replace(reUnescape,""):null;if(!currentParsed.pseudos)currentParsed.pseudos=[];currentParsed.pseudos.push({key:pseudoClass.replace(reUnescape,""),value:pseudoClassValue})}else if(attributeKey){attributeKey=attributeKey.replace(reUnescape,"");attributeValue=(attributeValue||"").replace(reUnescape,"");var test,regexp;switch(attributeOperator){case"^=":regexp=new RegExp("^"+escapeRegExp(attributeValue));break;case"$=":regexp=new RegExp(escapeRegExp(attributeValue)+"$");break;case"~=":regexp=new RegExp("(^|\\s)"+escapeRegExp(attributeValue)+"(\\s|$)");break;case"|=":regexp=new RegExp("^"+escapeRegExp(attributeValue)+"(-|$)");break;case"=":test=function(value){return attributeValue==value};break;case"*=":test=function(value){return value&&value.indexOf(attributeValue)>-1};break;case"!=":test=function(value){return attributeValue!=value};break;default:test=function(value){return!!value}}if(attributeValue==""&&/^[*$^]=$/.test(attributeOperator))test=function(){return false};if(!test)test=function(value){return value&&regexp.test(value)};if(!currentParsed.attributes)currentParsed.attributes=[];currentParsed.attributes.push({key:attributeKey,operator:attributeOperator,value:attributeValue,test:test})}return""}var Slick=this.Slick||{};Slick.parse=function(expression){return parse(expression)};Slick.escapeRegExp=escapeRegExp;if(!this.Slick)this.Slick=Slick}).apply(typeof exports!="undefined"?exports:this);(function(){var chunker=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,done=0,toString=Object.prototype.toString,hasDuplicate=false,baseHasDuplicate=true;[0,0].sort(function(){baseHasDuplicate=false;return 0});var Sizzle=function(selector,context,results,seed){results=results||[];context=context||document;var origContext=context;if(context.nodeType!==1&&context.nodeType!==9){return[]}if(!selector||typeof selector!=="string"){return results}var m,set,checkSet,extra,ret,cur,pop,i,prune=true,contextXML=Sizzle.isXML(context),parts=[],soFar=selector;do{chunker.exec("");m=chunker.exec(soFar);if(m){soFar=m[3];parts.push(m[1]);if(m[2]){extra=m[3];break}}}while(m);if(parts.length>1&&origPOS.exec(selector)){if(parts.length===2&&Expr.relative[parts[0]]){set=posProcess(parts[0]+parts[1],context)}else{set=Expr.relative[parts[0]]?[context]:Sizzle(parts.shift(),context);while(parts.length){selector=parts.shift();if(Expr.relative[selector]){selector+=parts.shift()}set=posProcess(selector,set)}}}else{if(!seed&&parts.length>1&&context.nodeType===9&&!contextXML&&Expr.match.ID.test(parts[0])&&!Expr.match.ID.test(parts[parts.length-1])){ret=Sizzle.find(parts.shift(),context,contextXML);context=ret.expr?Sizzle.filter(ret.expr,ret.set)[0]:ret.set[0]}if(context){ret=seed?{expr:parts.pop(),set:makeArray(seed)}:Sizzle.find(parts.pop(),parts.length===1&&(parts[0]==="~"||parts[0]==="+")&&context.parentNode?context.parentNode:context,contextXML);set=ret.expr?Sizzle.filter(ret.expr,ret.set):ret.set;if(parts.length>0){checkSet=makeArray(set)}else{prune=false}while(parts.length){cur=parts.pop();pop=cur;if(!Expr.relative[cur]){cur=""}else{pop=parts.pop()}if(pop==null){pop=context}Expr.relative[cur](checkSet,pop,contextXML)}}else{checkSet=parts=[]}}if(!checkSet){checkSet=set}if(!checkSet){Sizzle.error(cur||selector)}if(toString.call(checkSet)==="[object Array]"){if(!prune){results.push.apply(results,checkSet)}else if(context&&context.nodeType===1){for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&(checkSet[i]===true||checkSet[i].nodeType===1&&Sizzle.contains(context,checkSet[i]))){results.push(set[i])}}}else{for(i=0;checkSet[i]!=null;i++){if(checkSet[i]&&checkSet[i].nodeType===1){results.push(set[i])}}}}else{makeArray(checkSet,results)}if(extra){Sizzle(extra,origContext,results,seed);Sizzle.uniqueSort(results)}return results};Sizzle.uniqueSort=function(results){if(sortOrder){hasDuplicate=baseHasDuplicate;results.sort(sortOrder);if(hasDuplicate){for(var i=1;i<results.length;i++){if(results[i]===results[i-1]){results.splice(i--,1)}}}}return results};Sizzle.matches=function(expr,set){return Sizzle(expr,null,null,set)};Sizzle.matchesSelector=function(node,expr){return Sizzle(expr,null,null,[node]).length>0};Sizzle.find=function(expr,context,isXML){var set;if(!expr){return[]}for(var i=0,l=Expr.order.length;i<l;i++){var match,type=Expr.order[i];if(match=Expr.leftMatch[type].exec(expr)){var left=match[1];match.splice(1,1);if(left.substr(left.length-1)!=="\\"){match[1]=(match[1]||"").replace(/\\/g,"");set=Expr.find[type](match,context,isXML);if(set!=null){expr=expr.replace(Expr.match[type],"");break}}}}if(!set){set=context.getElementsByTagName("*")}return{set:set,expr:expr}};Sizzle.filter=function(expr,set,inplace,not){var match,anyFound,old=expr,result=[],curLoop=set,isXMLFilter=set&&set[0]&&Sizzle.isXML(set[0]);while(expr&&set.length){for(var type in Expr.filter){if((match=Expr.leftMatch[type].exec(expr))!=null&&match[2]){var found,item,filter=Expr.filter[type],left=match[1];anyFound=false;match.splice(1,1);if(left.substr(left.length-1)==="\\"){continue}if(curLoop===result){result=[]}if(Expr.preFilter[type]){match=Expr.preFilter[type](match,curLoop,inplace,result,not,isXMLFilter);if(!match){anyFound=found=true}else if(match===true){continue}}if(match){for(var i=0;(item=curLoop[i])!=null;i++){if(item){found=filter(item,match,i,curLoop);var pass=not^!!found;if(inplace&&found!=null){if(pass){anyFound=true}else{curLoop[i]=false}}else if(pass){result.push(item);anyFound=true}}}}if(found!==undefined){if(!inplace){curLoop=result}expr=expr.replace(Expr.match[type],"");if(!anyFound){return[]}break}}}if(expr===old){if(anyFound==null){Sizzle.error(expr)}else{break}}old=expr}return curLoop};Sizzle.error=function(msg){throw"Syntax error, unrecognized expression: "+msg};var Expr=Sizzle.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(elem){return elem.getAttribute("href")}},relative:{"+":function(checkSet,part){var isPartStr=typeof part==="string",isTag=isPartStr&&!/\W/.test(part),isPartStrNotTag=isPartStr&&!isTag;if(isTag){part=part.toLowerCase()}for(var i=0,l=checkSet.length,elem;i<l;i++){if(elem=checkSet[i]){while((elem=elem.previousSibling)&&elem.nodeType!==1){}checkSet[i]=isPartStrNotTag||elem&&elem.nodeName.toLowerCase()===part?elem||false:elem===part}}if(isPartStrNotTag){Sizzle.filter(part,checkSet,true)}},">":function(checkSet,part){var elem,isPartStr=typeof part==="string",i=0,l=checkSet.length;if(isPartStr&&!/\W/.test(part)){part=part.toLowerCase();for(;i<l;i++){elem=checkSet[i];if(elem){var parent=elem.parentNode;checkSet[i]=parent.nodeName.toLowerCase()===part?parent:false}}}else{for(;i<l;i++){elem=checkSet[i];if(elem){checkSet[i]=isPartStr?elem.parentNode:elem.parentNode===part}}if(isPartStr){Sizzle.filter(part,checkSet,true)}}},"":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("parentNode",part,doneName,checkSet,nodeCheck,isXML)},"~":function(checkSet,part,isXML){var nodeCheck,doneName=done++,checkFn=dirCheck;if(typeof part==="string"&&!/\W/.test(part)){part=part.toLowerCase();nodeCheck=part;checkFn=dirNodeCheck}checkFn("previousSibling",part,doneName,checkSet,nodeCheck,isXML)}},find:{ID:function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m&&m.parentNode?[m]:[]}},NAME:function(match,context){if(typeof context.getElementsByName!=="undefined"){var ret=[],results=context.getElementsByName(match[1]);for(var i=0,l=results.length;i<l;i++){if(results[i].getAttribute("name")===match[1]){ret.push(results[i])}}return ret.length===0?null:ret}},TAG:function(match,context){return context.getElementsByTagName(match[1])}},preFilter:{CLASS:function(match,curLoop,inplace,result,not,isXML){match=" "+match[1].replace(/\\/g,"")+" ";if(isXML){return match}for(var i=0,elem;(elem=curLoop[i])!=null;i++){if(elem){if(not^(elem.className&&(" "+elem.className+" ").replace(/[\t\n\r]/g," ").indexOf(match)>=0)){if(!inplace){result.push(elem)}}else if(inplace){curLoop[i]=false}}}return false},ID:function(match){return match[1].replace(/\\/g,"")},TAG:function(match,curLoop){return match[1].toLowerCase()},CHILD:function(match){if(match[1]==="nth"){if(!match[2]){Sizzle.error(match[0])}match[2]=match[2].replace(/^\+|\s*/g,"");var test=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(match[2]==="even"&&"2n"||match[2]==="odd"&&"2n+1"||!/\D/.test(match[2])&&"0n+"+match[2]||match[2]);match[2]=test[1]+(test[2]||1)-0;match[3]=test[3]-0}else if(match[2]){Sizzle.error(match[0])}match[0]=done++;return match},ATTR:function(match,curLoop,inplace,result,not,isXML){var name=match[1].replace(/\\/g,"");if(!isXML&&Expr.attrMap[name]){match[1]=Expr.attrMap[name]}if(match[2]==="~="){match[4]=" "+match[4]+" "}return match},PSEUDO:function(match,curLoop,inplace,result,not){if(match[1]==="not"){if((chunker.exec(match[3])||"").length>1||/^\w/.test(match[3])){match[3]=Sizzle(match[3],null,null,curLoop)}else{var ret=Sizzle.filter(match[3],curLoop,inplace,true^not);if(!inplace){result.push.apply(result,ret)}return false}}else if(Expr.match.POS.test(match[0])||Expr.match.CHILD.test(match[0])){return true}return match},POS:function(match){match.unshift(true);return match}},filters:{enabled:function(elem){return elem.disabled===false&&elem.type!=="hidden"},disabled:function(elem){return elem.disabled===true},checked:function(elem){return elem.checked===true},selected:function(elem){elem.parentNode.selectedIndex;return elem.selected===true},parent:function(elem){return!!elem.firstChild},empty:function(elem){return!elem.firstChild},has:function(elem,i,match){return!!Sizzle(match[3],elem).length},header:function(elem){return/h\d/i.test(elem.nodeName)},text:function(elem){return"text"===elem.type},radio:function(elem){return"radio"===elem.type},checkbox:function(elem){return"checkbox"===elem.type},file:function(elem){return"file"===elem.type},password:function(elem){return"password"===elem.type},submit:function(elem){return"submit"===elem.type},image:function(elem){return"image"===elem.type},reset:function(elem){return"reset"===elem.type},button:function(elem){return"button"===elem.type||elem.nodeName.toLowerCase()==="button"},input:function(elem){return/input|select|textarea|button/i.test(elem.nodeName)}},setFilters:{first:function(elem,i){return i===0},last:function(elem,i,match,array){return i===array.length-1},even:function(elem,i){return i%2===0},odd:function(elem,i){return i%2===1},lt:function(elem,i,match){return i<match[3]-0},gt:function(elem,i,match){return i>match[3]-0},nth:function(elem,i,match){return match[3]-0===i},eq:function(elem,i,match){return match[3]-0===i}},filter:{PSEUDO:function(elem,match,i,array){var name=match[1],filter=Expr.filters[name];if(filter){return filter(elem,i,match,array)}else if(name==="contains"){return(elem.textContent||elem.innerText||Sizzle.getText([elem])||"").indexOf(match[3])>=0}else if(name==="not"){var not=match[3];for(var j=0,l=not.length;j<l;j++){if(not[j]===elem){return false}}return true}else{Sizzle.error(name)}},CHILD:function(elem,match){var type=match[1],node=elem;switch(type){case"only":case"first":while(node=node.previousSibling){if(node.nodeType===1){return false}}if(type==="first"){return true}node=elem;case"last":while(node=node.nextSibling){if(node.nodeType===1){return false}}return true;case"nth":var first=match[2],last=match[3];if(first===1&&last===0){return true}var doneName=match[0],parent=elem.parentNode;if(parent&&(parent.sizcache!==doneName||!elem.nodeIndex)){var count=0;for(node=parent.firstChild;node;node=node.nextSibling){if(node.nodeType===1){node.nodeIndex=++count}}parent.sizcache=doneName}var diff=elem.nodeIndex-last;if(first===0){return diff===0}else{return diff%first===0&&diff/first>=0}}},ID:function(elem,match){return elem.nodeType===1&&elem.getAttribute("id")===match},TAG:function(elem,match){return match==="*"&&elem.nodeType===1||elem.nodeName.toLowerCase()===match},CLASS:function(elem,match){return(" "+(elem.className||elem.getAttribute("class"))+" ").indexOf(match)>-1},ATTR:function(elem,match){var name=match[1],result=Expr.attrHandle[name]?Expr.attrHandle[name](elem):elem[name]!=null?elem[name]:elem.getAttribute(name),value=result+"",type=match[2],check=match[4];return result==null?type==="!=":type==="="?value===check:type==="*="?value.indexOf(check)>=0:type==="~="?(" "+value+" ").indexOf(check)>=0:!check?value&&result!==false:type==="!="?value!==check:type==="^="?value.indexOf(check)===0:type==="$="?value.substr(value.length-check.length)===check:type==="|="?value===check||value.substr(0,check.length+1)===check+"-":false},POS:function(elem,match,i,array){var name=match[2],filter=Expr.setFilters[name];if(filter){return filter(elem,i,match,array)}}}};var origPOS=Expr.match.POS,fescape=function(all,num){return"\\"+(num-0+1)};for(var type in Expr.match){Expr.match[type]=new RegExp(Expr.match[type].source+/(?![^\[]*\])(?![^\(]*\))/.source);Expr.leftMatch[type]=new RegExp(/(^(?:.|\r|\n)*?)/.source+Expr.match[type].source.replace(/\\(\d+)/g,fescape))}var makeArray=function(array,results){array=Array.prototype.slice.call(array,0);if(results){results.push.apply(results,array);return results}return array};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){makeArray=function(array,results){var i=0,ret=results||[];if(toString.call(array)==="[object Array]"){Array.prototype.push.apply(ret,array)}else{if(typeof array.length==="number"){for(var l=array.length;i<l;i++){ret.push(array[i])}}else{for(;array[i];i++){ret.push(array[i])}}}return ret}}var sortOrder,siblingCheck;if(document.documentElement.compareDocumentPosition){sortOrder=function(a,b){if(a===b){hasDuplicate=true;return 0}if(!a.compareDocumentPosition||!b.compareDocumentPosition){return a.compareDocumentPosition?-1:1}return a.compareDocumentPosition(b)&4?-1:1}}else{sortOrder=function(a,b){var al,bl,ap=[],bp=[],aup=a.parentNode,bup=b.parentNode,cur=aup;if(a===b){hasDuplicate=true;return 0}else if(aup===bup){return siblingCheck(a,b)}else if(!aup){return-1}else if(!bup){return 1}while(cur){ap.unshift(cur);cur=cur.parentNode}cur=bup;while(cur){bp.unshift(cur);cur=cur.parentNode}al=ap.length;bl=bp.length;for(var i=0;i<al&&i<bl;i++){if(ap[i]!==bp[i]){return siblingCheck(ap[i],bp[i])}}return i===al?siblingCheck(a,bp[i],-1):siblingCheck(ap[i],b,1)};siblingCheck=function(a,b,ret){if(a===b){return ret}var cur=a.nextSibling;while(cur){if(cur===b){return-1}cur=cur.nextSibling}return 1}}Sizzle.getText=function(elems){var ret="",elem;for(var i=0;elems[i];i++){elem=elems[i];if(elem.nodeType===3||elem.nodeType===4){ret+=elem.nodeValue}else if(elem.nodeType!==8){ret+=Sizzle.getText(elem.childNodes)}}return ret};(function(){var form=document.createElement("div"),id="script"+(new Date).getTime(),root=document.documentElement;form.innerHTML="<a name='"+id+"'/>";root.insertBefore(form,root.firstChild);if(document.getElementById(id)){Expr.find.ID=function(match,context,isXML){if(typeof context.getElementById!=="undefined"&&!isXML){var m=context.getElementById(match[1]);return m?m.id===match[1]||typeof m.getAttributeNode!=="undefined"&&m.getAttributeNode("id").nodeValue===match[1]?[m]:undefined:[]}};Expr.filter.ID=function(elem,match){var node=typeof elem.getAttributeNode!=="undefined"&&elem.getAttributeNode("id");return elem.nodeType===1&&node&&node.nodeValue===match}}root.removeChild(form);root=form=null})();(function(){var div=document.createElement("div");div.appendChild(document.createComment(""));if(div.getElementsByTagName("*").length>0){Expr.find.TAG=function(match,context){var results=context.getElementsByTagName(match[1]);if(match[1]==="*"){var tmp=[];for(var i=0;results[i];i++){if(results[i].nodeType===1){tmp.push(results[i])}}results=tmp}return results}}div.innerHTML="<a href='#'></a>";if(div.firstChild&&typeof div.firstChild.getAttribute!=="undefined"&&div.firstChild.getAttribute("href")!=="#"){Expr.attrHandle.href=function(elem){return elem.getAttribute("href",2)}}div=null})();if(document.querySelectorAll){(function(){var oldSizzle=Sizzle,div=document.createElement("div"),id="__sizzle__";div.innerHTML="<p class='TEST'></p>";if(div.querySelectorAll&&div.querySelectorAll(".TEST").length===0){return}Sizzle=function(query,context,extra,seed){context=context||document;query=query.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!seed&&!Sizzle.isXML(context)){if(context.nodeType===9){try{return makeArray(context.querySelectorAll(query),extra)}catch(qsaError){}}else if(context.nodeType===1&&context.nodeName.toLowerCase()!=="object"){var old=context.getAttribute("id"),nid=old||id,hasParent=context.parentNode,relativeHierarchySelector=/^\s*[+~]/.test(query);if(!old){context.setAttribute("id",nid)}else{nid=nid.replace(/'/g,"\\$&")}if(relativeHierarchySelector&&hasParent){context=context.parentNode}try{if(!relativeHierarchySelector||hasParent){return makeArray(context.querySelectorAll("[id='"+nid+"'] "+query),extra)}}catch(pseudoError){}finally{if(!old){context.removeAttribute("id")}}}}return oldSizzle(query,context,extra,seed)};for(var prop in oldSizzle){Sizzle[prop]=oldSizzle[prop]}div=null})()}(function(){var html=document.documentElement,matches=html.matchesSelector||html.mozMatchesSelector||html.webkitMatchesSelector||html.msMatchesSelector,pseudoWorks=false;try{matches.call(document.documentElement,"[test!='']:sizzle")}catch(pseudoError){pseudoWorks=true}if(matches){Sizzle.matchesSelector=function(node,expr){expr=expr.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!Sizzle.isXML(node)){try{if(pseudoWorks||!Expr.match.PSEUDO.test(expr)&&!/!=/.test(expr)){return matches.call(node,expr)}}catch(e){}}return Sizzle(expr,null,null,[node]).length>0}}})();(function(){var div=document.createElement("div");div.innerHTML="<div class='test e'></div><div class='test'></div>";if(!div.getElementsByClassName||div.getElementsByClassName("e").length===0){return}div.lastChild.className="e";if(div.getElementsByClassName("e").length===1){return}Expr.order.splice(1,0,"CLASS");Expr.find.CLASS=function(match,context,isXML){if(typeof context.getElementsByClassName!=="undefined"&&!isXML){return context.getElementsByClassName(match[1])}};div=null})();function dirNodeCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1&&!isXML){elem.sizcache=doneName;elem.sizset=i}if(elem.nodeName.toLowerCase()===cur){match=elem;break}elem=elem[dir]}checkSet[i]=match}}}function dirCheck(dir,cur,doneName,checkSet,nodeCheck,isXML){for(var i=0,l=checkSet.length;i<l;i++){var elem=checkSet[i];if(elem){var match=false;elem=elem[dir];while(elem){if(elem.sizcache===doneName){match=checkSet[elem.sizset];break}if(elem.nodeType===1){if(!isXML){elem.sizcache=doneName;elem.sizset=i}if(typeof cur!=="string"){if(elem===cur){match=true;break}}else if(Sizzle.filter(cur,[elem]).length>0){match=elem;break}}elem=elem[dir]}checkSet[i]=match}}}if(document.documentElement.contains){Sizzle.contains=function(a,b){return a!==b&&(a.contains?a.contains(b):true)}}else if(document.documentElement.compareDocumentPosition){Sizzle.contains=function(a,b){return!!(a.compareDocumentPosition(b)&16)}}else{Sizzle.contains=function(){return false}}Sizzle.isXML=function(elem){var documentElement=(elem?elem.ownerDocument||elem:0).documentElement;return documentElement?documentElement.nodeName!=="HTML":false};var posProcess=function(selector,context){var match,tmpSet=[],later="",root=context.nodeType?[context]:context;while(match=Expr.match.PSEUDO.exec(selector)){later+=match[0];selector=selector.replace(Expr.match.PSEUDO,"")}selector=Expr.relative[selector]?selector+"*":selector;for(var i=0,l=root.length;i<l;i++){Sizzle(selector,root[i],tmpSet)}return Sizzle.filter(later,tmpSet)};window.Sizzle=Sizzle})();var Mustache=function(){var Renderer=function(){};Renderer.prototype={otag:"{{",ctag:"}}",pragmas:{},buffer:[],pragmas_implemented:{"IMPLICIT-ITERATOR":true},context:{},render:function(template,context,partials,in_recursion){if(!in_recursion){this.context=context;this.buffer=[]}if(!this.includes("",template)){if(in_recursion){return template}else{this.send(template);return}}template=this.render_pragmas(template);var html=this.render_section(template,context,partials);if(in_recursion){return this.render_tags(html,context,partials,in_recursion)}this.render_tags(html,context,partials,in_recursion)},send:function(line){if(line!=""){this.buffer.push(line)}},render_pragmas:function(template){if(!this.includes("%",template)){return template}var that=this;var regex=new RegExp(this.otag+"%([\\w-]+) ?([\\w]+=[\\w]+)?"+this.ctag);return template.replace(regex,function(match,pragma,options){if(!that.pragmas_implemented[pragma]){throw{message:"This implementation of mustache doesn't understand the '"+pragma+"' pragma"}}that.pragmas[pragma]={};if(options){var opts=options.split("=");that.pragmas[pragma][opts[0]]=opts[1]}return""})},render_partial:function(name,context,partials){name=this.trim(name);if(!partials||partials[name]===undefined){throw{message:"unknown_partial '"+name+"'"}}if(typeof context[name]!="object"){return this.render(partials[name],context,partials,true)}return this.render(partials[name],context[name],partials,true)},render_section:function(template,context,partials){if(!this.includes("#",template)&&!this.includes("^",template)){return template}var that=this;var regex=new RegExp(this.otag+"(\\^|\\#)\\s*(.+)\\s*"+this.ctag+"\n*([\\s\\S]+?)"+this.otag+"\\/\\s*\\2\\s*"+this.ctag+"\\s*","mg");return template.replace(regex,function(match,type,name,content){var value=that.find(name,context);if(type=="^"){if(!value||that.is_array(value)&&value.length===0){return that.render(content,context,partials,true)}else{return""}}else if(type=="#"){if(that.is_array(value)){return that.map(value,function(row){return that.render(content,that.create_context(row),partials,true)}).join("")}else if(that.is_object(value)){return that.render(content,that.create_context(value),partials,true)}else if(typeof value==="function"){return value.call(context,content,function(text){return that.render(text,context,partials,true)})}else if(value){return that.render(content,context,partials,true)}else{return""}}})},render_tags:function(template,context,partials,in_recursion){var that=this;var new_regex=function(){return new RegExp(that.otag+"(=|!|>|\\{|%)?([^\\/#\\^]+?)\\1?"+that.ctag+"+","g")};var regex=new_regex();var tag_replace_callback=function(match,operator,name){switch(operator){case"!":return"";case"=":that.set_delimiters(name);regex=new_regex();return"";case">":return that.render_partial(name,context,partials);case"{":return that.find(name,context);default:return that.escape(that.find(name,context))}};var lines=template.split("\n");for(var i=0;i<lines.length;i++){lines[i]=lines[i].replace(regex,tag_replace_callback,this);if(!in_recursion){this.send(lines[i])}}if(in_recursion){return lines.join("\n")}},set_delimiters:function(delimiters){var dels=delimiters.split(" ");this.otag=this.escape_regex(dels[0]);this.ctag=this.escape_regex(dels[1])},escape_regex:function(text){if(!arguments.callee.sRE){var specials=["/",".","*","+","?","|","(",")","[","]","{","}","\\"];arguments.callee.sRE=new RegExp("(\\"+specials.join("|\\")+")","g")}return text.replace(arguments.callee.sRE,"\\$1")},find:function(name,context){name=this.trim(name);function is_kinda_truthy(bool){return bool===false||bool===0||bool}var value;if(is_kinda_truthy(context[name])){value=context[name]}else if(is_kinda_truthy(this.context[name])){value=this.context[name]}if(typeof value==="function"){return value.apply(context)}if(value!==undefined){return value}return""},includes:function(needle,haystack){return haystack.indexOf(this.otag+needle)!=-1},escape:function(s){s=String(s===null?"":s);return s.replace(/&(?!\w+;)|["'<>\\]/g,function(s){switch(s){case"&":return"&amp;";case"\\":return"\\\\";case'"':return"&quot;";case"'":return"&#39;";case"<":return"&lt;";case">":return"&gt;";default:return s}})},create_context:function(_context){if(this.is_object(_context)){return _context}else{var iterator=".";if(this.pragmas["IMPLICIT-ITERATOR"]){iterator=this.pragmas["IMPLICIT-ITERATOR"].iterator}var ctx={};ctx[iterator]=_context;return ctx}},is_object:function(a){return a&&typeof a=="object"},is_array:function(a){return Object.prototype.toString.call(a)==="[object Array]"},trim:function(s){return s.replace(/^\s*|\s*$/g,"")},map:function(array,fn){if(typeof array.map=="function"){return array.map(fn)}else{var r=[];var l=array.length;for(var i=0;i<l;i++){r.push(fn(array[i]))}return r}}};return{name:"mustache.js",version:"0.3.1-dev",to_html:function(template,view,partials,send_fun){var renderer=new Renderer;if(send_fun){renderer.send=send_fun}renderer.render(template,view,partials);if(!send_fun){return renderer.buffer.join("\n")}}}}();if(!this.JSON){this.JSON={}}(function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");
return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();Object.keys=function(o){var result=[];if(o===undefined||o===null){return result}for(var name in o){if(o.hasOwnProperty(name)){result.push(name)}}if(o.call!==undefined&&o.call!==Function.prototype.call&&result.indexOf("call")===-1){result.push("call")}return result};Array.isArray=Array.isArray||function(o){return Object.prototype.toString.call(o)==="[object Array]"};Array.prototype.forEach=Array.prototype.forEach||function(fn,bind){for(var i=0;i<this.length;i++){fn.call(bind,this[i],i,this)}};Array.prototype.indexOf=Array.prototype.indexOf||function(str){for(var i=0;i<this.length;i++){if(str===this[i]){return i}}return-1};Array.prototype.some=Array.prototype.some||function(fn,bind){for(var i=0,l=this.length;i<l;i++){if(i in this&&fn.call(bind,this[i],i,this))return true}return false};Array.prototype.every=Array.prototype.every||function(fn,bind){for(var i=0,l=this.length;i<l;i++){if(i in this&&!fn.call(bind,this[i],i,this))return false}return true};Array.prototype.map=Array.prototype.map||function(fn,bind){var results=[];for(var i=0,l=this.length;i<l;i++){if(i in this)results[i]=fn.call(bind,this[i],i,this)}return results};Array.prototype.filter=Array.prototype.filter||function(fn,bind){var results=[];for(var i=0,l=this.length;i<l;i++){if(i in this&&fn.call(bind,this[i],i,this))results.push(this[i])}return results};Array.prototype.reduce=Array.prototype.reduce||function(fun){"use strict";if(this===undefined||this===null)throw new TypeError;var t=Object(this);var len=t.length>>>0;if(typeof fun!=="function")throw new TypeError;if(len===0&&arguments.length==1)throw new TypeError;var k=0;var accumulator;if(arguments.length>=2){accumulator=arguments[1]}else{do{if(k in t){accumulator=t[k++];break}if(++k>=len){throw new TypeError}}while(true)}while(k<len){if(k in t)accumulator=fun.call(undefined,accumulator,t[k],k,t);k++}return accumulator};Array.prototype.reduceRight=Array.prototype.reduceRight||function(callbackfn){"use strict";if(this===undefined||this===null)throw new TypeError;var t=Object(this);var len=t.length>>>0;if(typeof callbackfn!=="function")throw new TypeError;if(len===0&&arguments.length===1)throw new TypeError;var k=len-1;var accumulator;if(arguments.length>=2){accumulator=arguments[1]}else{do{if(k in this){accumulator=this[k--];break}if(--k<0){throw new TypeError}}while(true)}while(k>=0){if(k in t)accumulator=callbackfn.call(undefined,accumulator,t[k],k,t);k--}return accumulator};String.prototype.trim=String.prototype.trim||function(){return this.replace(/^\s\s*/,"").replace(/\s\s*$/,"")};if(!Function.prototype.bind||Function.prototype.bind===window.__hualuOldBind){Function.prototype.bind=function(object){var method=this;var args=Array.prototype.slice.call(arguments,1);return function(){return method.apply(object,args.concat(Array.prototype.slice.call(arguments)))}}}var object=function(globalHost){var object=function(){};if(function TEST(){}.name){Function.__get_name__=function(func){return func.name}}else{var funcNameRegExp=/(?:^|\()function ([\w$]+)/;Function.__get_name__=function(func){var result=funcNameRegExp.exec(func.toString());if(result)return result[1];return""}}var defaultFilter=function(prop,dest,src){return!(prop in dest)};object.extend=function(obj,properties,ov){var filter=null;if(typeof ov=="function"){filter=ov}else if(ov===true||typeof ov==="undefined"){}else{filter=defaultFilter}for(var property in properties){if(filter&&!filter(property,obj,properties)){continue}try{obj[property]=properties[property]}catch(e){}}if(properties&&properties.hasOwnProperty("call")&&(!filter||filter(obj,properties,"call"))){obj.call=properties.call}return obj};object.clone=function(obj){var clone={};for(var key in obj)clone[key]=obj[key];return clone};object.bind=function(host){object.extend(host,object)};object._loader=null;return object}(window);(function(object){var enumerables=true;for(var i in{toString:1})enumerables=null;if(enumerables)enumerables=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];var overloadSetter=function(func,usePlural){return function(a,b){if(a===null)return this;if(usePlural||typeof a!="string"){for(var k in a)func.call(this,k,a[k]);if(enumerables){for(var i=enumerables.length;i>0;i--){k=enumerables[i];if(a.hasOwnProperty(k))func.call(this,k,a[k])}}}else{func.call(this,a,b)}return this}};var getter=function(name,bind){var value=Object.__getattribute__(this,name);if(bind!==false&&Class.isMethod(value)){bind=bind||this;return value.bind(bind)}return value};var setter=overloadSetter(function(prop,value){if("__setattr__"in this){this.__setattr__(prop,value)}else{Object.__setattr__(this,prop,value)}});var membergetter=function(name,bind){var member=Type.__getattribute__(this,name);if(bind!==false&&Class.isMethod(member)){bind=bind||this;return member.bind(bind)}return member};var memberchecker=function(name){if(name=="@mixins")name="__mixins__";var proto=this.prototype;var properties=proto.__properties__;return name in this||name in proto||properties&&name in properties};var membersetter=overloadSetter(function(name,member){if("__metaclass__"in this){Type.__getattribute__(this.__metaclass__,"__setattr__").call(this.__metaclass__,this,name,member)}else{Type.__setattr__(this,name,member)}});var nativesetter=function(prop,value){this[prop]=value};var subclassesgetter=function(){return this.__subclassesarray__};var parent=function(cls,name,args){if(!name){throw new Error("can not get function name when this.parent called")}var ownCls=cls;while(ownCls&&!ownCls.prototype.hasOwnProperty(name)){ownCls=ownCls.__base__}var base=ownCls.__base__;var mixins=ownCls.__mixins__;var member,owner;if(base&&base.get&&base.has(name)){owner=base;member=Type.__getattribute__(base,name)}else if(mixins&&mixins.length&&mixins.some(function(mixin){owner=mixin;return mixin.has(name)})){member=Type.__getattribute__(owner,name)}if(!member||typeof member!="function"){throw new Error("no such method in parent : '"+name+"'")}else{return member.apply(owner,args)}};function renameCheck(func,prop,value){if(prop==="__name__"&&func[prop]&&func[prop]!==value){if(typeof console!="undefined"&&console.warn){console.warn("请不要将同一个方法赋值给多个类成员："+func[prop]+" --> "+value)}}}var instancemethod=function(func,self){var _instancemethod;var im_self;if(self===false){_instancemethod=function(self){return this.prototype[func.__name__].im_func.apply(this.__this__,arguments)}}else{_instancemethod=function(){var args=[].slice.call(arguments,0);if(self===true){if(typeof this=="function"){im_self=this}else{im_self=this.__class__}}else{im_self=this}args.unshift(im_self);return func.apply(this.__this__,args)}}_instancemethod.im_self=self;_instancemethod.__class__=arguments.callee;_instancemethod.im_func=func;_instancemethod.__setattr__=function(prop,value){renameCheck(func,prop,value);this[prop]=value};return _instancemethod};var staticmethod=this.staticmethod=function(func){return{__class__:arguments.callee,im_func:func,__setattr__:function(prop,value){renameCheck(this,prop,value);this[prop]=value}}};var classmethod=this.classmethod=function(func,isinstance){var obj={__class__:arguments.callee,im_func:func,__setattr__:function(prop,value){renameCheck(this,prop,value);this[prop]=value}};return obj};var property=this.property=function(fget,fset){var p={};p.__class__=arguments.callee;p.__setattr__=function(prop,value){renameCheck(this,prop,value);this[prop]=value};p.fget=fget;p.fset=fset;return p};var createNativeClass=function(source,methodNames){var cls=new Class(function(){for(var i=0,l=methodNames.length;i<l;i++){this[methodNames[i]]=function(name){return function(){return source.prototype[name].apply(arguments[0],[].slice.call(arguments,1))}}(methodNames[i])}});return cls};var _nativeExtendable=function(){if(!Array.push)return false;var a=function(){};a.prototype=new Array;var b=new a;b.push(null);return!!b.length}();var ArrayClass,StringClass;Object.__getattribute__=function(obj,name){var property=obj.__properties__["prop_"+name]||obj.__properties__[name];if(property){if(property.fget){return property.fget.call(obj.__this__,obj)}else{throw new Error("get not allowed property "+name)}}else if(name in obj){return obj[name]}else if(obj.__getattr__){return obj.__getattr__.call(obj,name)}else{return undefined}};Object.__setattr__=object.__setattr__=function(obj,prop,value){var property=null;if(obj.__properties__){property=obj.__properties__["prop_"+prop]||obj.__properties__[prop]}if(!property){obj[prop]=value}else if(property.fset){property.fset.call(obj.__this__,obj,value)}else{throw"set not allowed property "+prop}};Object.__new__=function(cls){if(cls===Array||cls===String)return new cls;cls.__prototyping__=true;var instance=new cls;delete cls.__prototyping__;return instance};var Type=this.Type=this.type=function(){};Type.__class__=Type;Type.__new__=function(metaclass,name,base,dict){var cls=function(){if(cls.__prototyping__)return this;if(cls.__constructs__){return cls.__constructs__(arguments)}else{this.__class__=cls;Class.initMixins(cls,this);var value=this.initialize?this.initialize.apply(this,arguments):null;return value}};cls.__subclassesarray__=[];cls.__subclasses__=subclassesgetter;cls.__classbasedmethods__=[];if(object.runtime){cls.__module__=object.runtime.stack[object.runtime.stack.length-1].id}else{cls.__module__=""}cls.set=cls.__mixin__=membersetter;cls.get=membergetter;cls.has=memberchecker;cls.__metaclass__=metaclass;cls.__class__=metaclass;cls.__new__=base.__new__;cls.__dict__=dict;cls.__constructs__=base.__constructs__||null;if(base!==Object&&base!==Type){(base.__classbasedmethods__||[]).forEach(function(name){cls[name]=base[name];cls.__classbasedmethods__.push(name)})}cls.__constructing__=true;cls.prototype=Object.__new__(base);cls.prototype.constructor=cls;if(base.__subclassesarray__)base.__subclassesarray__.push(cls);var proto=cls.prototype;var baseProperties=proto.__properties__||{};proto.__properties__=object.extend({},baseProperties);Type.__setattr__(cls,"__setattr__",Type.__getattribute__(base,"__setattr__"));Type.__setattr__(cls,"__base__",base);Type.__setattr__(cls,"__this__",{base:base,parent:function(){return parent(cls,arguments.callee.caller.__name__,arguments)}});for(var k in dict){Type.__setattr__(cls,k,dict[k])}var mixins=cls.__mixins__;if(mixins){mixins.forEach(function(mixin){Class.keys(mixin).forEach(function(name){if(cls.has(name))return;var member=Type.__getattribute__(mixin,name);Type.__setattr__(cls,name,member)})})}cls.prototype.get=getter;cls.prototype.set=setter;cls.prototype._set=nativesetter;delete cls.__constructing__;return cls};var oopProps=["__mixins__","__new__","__this__","__base__"],metas=["__new__","__metaclass__","__mixins__"],parents=["__this__","__base__"];Type.__setattr__=function(cls,name,member){if(name=="@mixins")name="__mixins__";if(oopProps.indexOf(name)!=-1){if(!member||typeof member!="object"&&typeof member!="function"){return}}var proto=cls.prototype,properties=proto.__properties__,subs=cls.__subclassesarray__,constructing=cls.__constructing__;delete cls[name];delete proto[name];delete properties[name];if(metas.indexOf(name)!=-1){if(member&&(typeof member=="object"||typeof member=="function")){cls[name]=member}}else if(parents.indexOf(name)!=-1){cls[name]=proto[name]=member}else if(member==null){proto[name]=member}else if(member.__class__===undefined&&typeof member=="function"){proto[name]=instancemethod(member);proto[name].__setattr__("__name__",name);member.__name__=name;if(name=="initialize"){cls[name]=instancemethod(member,false)}}else if(member.__class__===property){member.__setattr__("__name__",name);properties[name]=member;proto[name]=undefined}else if(member.__class__===instancemethod){proto[name]=instancemethod(member.im_func);if(member.im_self==true){cls[name]=member}}else if(member.__class__===classmethod){member.__setattr__("__name__",name);member.im_func.__name__=name;cls[name]=proto[name]=instancemethod(member.im_func,true);cls.__classbasedmethods__.push(name)}else if(member.__class__===staticmethod){member.__setattr__("__name__",name);member.im_func.__name__=name;cls[name]=proto[name]=member.im_func;cls.__classbasedmethods__.push(name)}else if(Class.instanceOf(member,Type)){cls[name]=proto[name]=member}else{proto[name]=member}if(!constructing&&name in cls&&subs){subs.forEach(function(sub){if(!(name in sub)){Type.__setattr__(sub,name,member)}})}};Type.__delattr__=function(cls,name){delete cls[name];delete cls.prototype[name];delete cls.prototype.__properties__[name]};Type.__getattribute__=function(cls,name){if(name=="@mixins"){name="__mixins__"}var proto=cls.prototype;var properties=proto.__properties__;var metaclass=cls.__metaclass__;var member;if(name in cls){member=cls[name]}else if(properties&&properties[name]!==undefined){member=properties[name]}else if(proto[name]&&proto[name].__class__==instancemethod){cls[name]=member=instancemethod(proto[name].im_func,false)}else if(metaclass&&(member=Type.__getattribute__(metaclass,name))!==undefined){if(member.__class__===instancemethod){member=instancemethod(member.im_func,true)}cls[name]=member}else{member=proto[name]}return member};Type.__constructs__=function(args){var length=args.length;if(length<1)throw new Error("bad arguments");var name=null;var base=length>1?args[0]:Object;if(typeof base!="function"&&typeof base!="object"){throw new Error("base is not function or object")}if(base){if(!_nativeExtendable){if(base===Array){base=ArrayClass}else if(base===String){base=StringClass}}}var dict=args[length-1],factory;if(typeof dict!="function"&&typeof dict!="object"){throw new Error("constructor is not function or object")}if(dict instanceof Function){factory=dict;dict={};factory.call(dict)}var metaclass;if(this===Object){metaclass=dict.__metaclass__||base.__metaclass__||Type}else{metaclass=this}var cls=metaclass.__new__(metaclass,name,base,dict);if(!cls||typeof cls!="function"){throw new Error("__new__ method should return cls")}Type.__getattribute__(metaclass,"initialize").call(metaclass,cls,name,base,dict);return cls};Type.initialize=function(){};Object.__class__=Type;var Class=this.Class=function(){return Type.__constructs__.call(Object,arguments)};Class.initMixins=function(cls,instance){if(!cls){return}if(cls.__base__){Class.initMixins(cls.__base__,instance)}var mixins=cls.__mixins__;if(mixins){instance.__this__.mixining=true;for(var i=0,l=mixins.length,mixin;i<l;i++){mixin=mixins[i];if(mixin.prototype&&typeof mixin.prototype.initialize=="function"){mixin.prototype.initialize.call(instance)}}delete instance.__this__.mixining}};Class.mixin=function(dict,cls){if(!dict||typeof dict!="object"){return}if(cls===Array){cls=ArrayClass}else if(cls===String){cls=StringClass}dict.__mixins__=dict.__mixins__||[];dict.__mixins__.push(cls)};Class.hasProperty=function(obj,name){return obj&&obj.__properties__?name in obj.__properties__:false};Class.hasMember=function(cls,name){if(!cls)return false;if(name in cls.prototype)return true;return false};Class.isMethod=function(member){if(typeof member=="function"){if(!member.__class__||member.__class__==instancemethod||member.__class__==staticmethod||member.__class__==classmethod){return true}}return false};Class.getPropertyNames=function(obj){return obj&&obj.__properties__?Object.keys(obj.__properties__):[]};Class.inject=function(cls,host,args,filter){if(typeof cls!="function"){throw new Error("bad arguments.")}var argsLen=arguments.length,p,proto,init;if(argsLen===2){args=[];filter=true}else if(argsLen===3){if(Array.isArray(args)){filter=true}else{filter=args;args=[]}}host.__class__=cls;proto=cls.prototype,init=proto.initialize;host.__properties__=proto.__properties__;p=Object.__new__(cls);object.extend(host,p,filter);Class.initMixins(cls,host);if(typeof init=="function"){init.apply(host,args)}};Class.instanceOf=function(obj,func){if(typeof func!="function"){throw new Error("bad arguments.")}var cls;if(typeof obj=="function"){cls=obj.__class__;if(cls){do{if(cls===func)return true}while(cls=cls.__base__)}}else{return obj instanceof func}return false};Class.getChain=function(cls){if(!cls){return[]}var result=[cls];while(cls.__base__){result.push(cls.__base__);cls=cls.__base__}return result};Class.getAllSubClasses=function(cls){if(!cls||!cls.__subclassesarray__){return[]}var array=cls.__subclassesarray__;var queue=[].concat(array),ele=queue.shift(),subs;while(ele!=null){subs=ele.__subclassesarray__;if(subs!=null){queue=queue.concat(subs);array=array.concat(subs)}ele=queue.shift()}return array};Class.keys=function(cls){if(!cls||!cls.prototype){return[]}var keys=[];for(var prop in cls.prototype){keys.push(prop)}keys=keys.filter(function(name){if(name.indexOf("__")==0&&name.slice(-2)=="__"){return false}if(["get","set","_set","initialize","constructor"].indexOf(name)!=-1){return false}return true});return keys};ArrayClass=createNativeClass(Array,["concat","indexOf","join","lastIndexOf","pop","push","reverse","shift","slice","sort","splice","unshift","valueOf","forEach","some","every","map","filter","reduce","reduceRight"]);ArrayClass.prototype.length=0;StringClass=createNativeClass(String,["charAt","charCodeAt","concat","indexOf","lastIndexOf","match","replace","search","slice","split","substr","substring","toLowerCase","toUpperCase","valueOf","trim"]);StringClass.prototype.length=0})(object);(function(object){var scheme_chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+-.";function splitUntil(result,url,target,remainFirst){var min=url.length;for(var i=0,len=url.length;i<len;i++){if(target.indexOf(url.charAt(i))!=-1){if(i<min){min=i;break}}}result.got=url.substring(0,min);result.remained=remainFirst?url.substring(min):url.substring(min+1);return result}function urlparse(url,default_scheme){if(typeof url!="string"){return["","","","","",""]}var scheme="",netloc="",path="",params="",query="",fragment="",i=0;i=url.indexOf(":");if(i>0){if(url.substring(0,i)=="http"){scheme=url.substring(0,i).toLowerCase();url=url.substring(i+1)}else{for(i=0,len=url.length;i<len;i++){if(scheme_chars.indexOf(url.charAt(i))==-1){break}}scheme=url.substring(0,i);url=url.substring(i+1)}}if(!scheme&&default_scheme){scheme=default_scheme}var splited={};if(url.substring(0,2)=="//"){splitUntil(splited,url.substring(2),"/?#",true);netloc=splited.got;url=splited.remained}if(url.indexOf("#")!=-1){splitUntil(splited,url,"#");url=splited.got;fragment=splited.remained}if(url.indexOf("?")!=-1){splitUntil(splited,url,"?");url=splited.got;query=splited.remained}if(url.indexOf(";")!=-1){splitUntil(splited,url,";");path=splited.got;params=splited.remained}if(!path){path=url}return[scheme,netloc,path,params,query,fragment]}function urlunparse(parts){if(!parts){return""}var url="";if(parts[0])url+=parts[0]+"://"+parts[1];if(parts[1]&&parts[2]&&parts[2].indexOf("/")!=0)url+="/";url+=parts[2];if(parts[3])url+=";"+parts[3];if(parts[4])url+="?"+parts[4];if(parts[5])url+="#"+parts[5];return url}function urljoin(base,url){if(!base){return url}if(!url){return base}url=String(url);base=String(base);var bparts=urlparse(base);var parts=urlparse(url,bparts[0]);if(parts[0]!=bparts[0]){return url}if(parts[1]){return urlunparse(parts)}parts[1]=bparts[1];if(parts[2].charAt(0)=="/"){return urlunparse(parts)}if(!parts[2]&&!parts[3]){parts[2]=bparts[2];parts[3]=bparts[3];if(!parts[4]){parts[4]=bparts[4]}return urlunparse(parts)}var segments=bparts[2].split("/").slice(0,-1).concat(parts[2].split("/"));var i;if(segments[segments.length-1]=="."){segments[segments.length-1]=""}for(i=0,l=segments.length;i<l;i++){if(segments[i]=="."){segments.splice(i,1);i--}}while(true){i=1;n=segments.length-1;while(i<n){if(segments[i]==".."&&["",".."].indexOf(segments[i-1])==-1){segments.splice(i-1,2);break}i++}if(i>=n){break}}if(segments.length==2&&segments[0]==""&&segments[1]==".."){segments[segments.length-1]=""}else if(segments.length>=2&&segments[segments.length-1]==".."){segments.pop();segments.pop();segments.push("")}parts[2]=segments.join("/");return urlunparse(parts)}function calculatePageDir(){var loc=window["location"];var pageUrl=loc.protocol+"//"+loc.host+(loc.pathname.charAt(0)!=="/"?"/":"")+loc.pathname;if(pageUrl.indexOf("\\")!=-1){pageUrl=pageUrl.replace(/\\/g,"/")}var pageDir="./";if(pageUrl.indexOf("/")!=-1){pageDir=pageUrl.substring(0,pageUrl.lastIndexOf("/")+1)}return pageDir}function cleanPath(path){path=path.replace(/([^:\/])\/+/g,"$1/");if(path.indexOf(".")===-1){return path}var parts=path.split("/");var result=[];for(var i=0,part,len=parts.length;i<len;i++){part=parts[i];if(part===".."){if(result.length===0){throw new Error("invalid path: "+path)}result.pop()}else if(part!=="."){result.push(part)}}return result.join("/").replace(/#$/,"")}function Module(name){this.__name__=name}Module.prototype.toString=function(){return"<module '"+this.__name__+"'>"};function NoModuleError(id){this.message="no module named "+id}NoModuleError.prototype=new Error;function ModuleRequiredError(name,parent){this.message=parent.id+": module "+name+" required"}ModuleRequiredError.prototype=new Error;function CyclicDependencyError(stack,pkg){this.runStack=stack;var msg="";stack.forEach(function(m,i){msg+=m.module.id+"-->"});msg+=pkg.id;this.message=msg+" cyclic dependency."}CyclicDependencyError.prototype=new Error;function CommonJSPackage(id,dependencies,factory){Package.apply(this,arguments)}CommonJSPackage.prototype=new Package;CommonJSPackage.prototype.constructor=CommonJSPackage;CommonJSPackage.prototype.make=function(name,context,deps,runtime){var exports=new Module(name);runtime.modules[name]=exports;runtime.packages[name]=this;var require=this.createRequire(name,context,deps,runtime);var returnExports=this.factory.call(exports,require,exports,this);if(returnExports){returnExports.__name__=exports.__name__;exports=returnExports}runtime.addModule(name,exports);return exports};CommonJSPackage.prototype.execute=function(name,context,runtime){if(runtime.getStackItem(name)){return null}var deps=runtime.loadings[this.id].deps;runtime.pushStack(name,this);var exports=this.make(name,context,deps,runtime);if(name=="__main__"&&typeof exports.main=="function"){exports.main()}runtime.popStack();return exports};CommonJSPackage.prototype.toDep=function(i,runtime){var name=this.dependencies[i];if(name.indexOf("/")==-1&&name.indexOf(".")!=-1){return new ObjectDependency(name,this,runtime)}else{return new CommonJSDependency(name,this,runtime)}};CommonJSPackage.prototype.createRequire=function(name,context,deps,runtime){var loader=runtime.loader;var parent=this;var parentName=name;var parentContext=context;function require(name){var index=parent.dependencies.indexOf(name);if(index==-1){throw new ModuleRequiredError(name,parent)}var dep=deps[index];var exports=dep.execute(parentName,parentContext);if(!exports){if(parent.dependencies.indexOf(name)!=-1){throw new CyclicDependencyError(runtime.stack,loader.lib[dep.id])}else{console.warn("Unknown Error.")}}return exports}require.async=function(dependencies,callback){runtime.loader.buildFileLib();var id=parent.id+"~"+(new Date).getTime()+Math.floor(Math.random()*100);runtime.loader.defineModule(CommonJSPackage,id,dependencies,function(require,exports,module){var args=[];module.dependencies.forEach(function(dependency){args.push(require(dependency))});callback.apply(null,args)});runtime.loadModule(id,function(){var newPkg=runtime.loader.lib[id];newPkg.execute(newPkg.id,context,runtime)})};return require};function ObjectPackage(id,dependencies,factory){Package.apply(this,arguments)}ObjectPackage.prototype=new Package;ObjectPackage.prototype.constructor=ObjectPackage;ObjectPackage.prototype.make=function(name,context,deps,runtime){var returnExports;var args=[];var exports;deps.forEach(function(dep){var depExports=dep.execute(name,context);if(args.indexOf(depExports)==-1){args.push(depExports)}},this);exports=runtime.modules[name];if(!exports){exports=new Module(name);runtime.modules[name]=exports;runtime.packages[name]=this}args.unshift(exports);if(this.factory){returnExports=this.factory.apply(exports,args)}if(returnExports){if(exports.__empty_refs__){exports.__empty_refs__.forEach(function(ref){if(typeof console!="undefined"){console.warn(ref+"无法正确获得"+name+"模块的引用。因为该模块是通过return返回模块实例的。")}})}returnExports.__name__=exports.__name__;exports=returnExports}else{delete exports.__empty_refs__}runtime.addModule(name,exports);return exports};ObjectPackage.prototype.execute=function(name,context,runtime){var exports;var parent;var deps;if(runtime.getStackItem(name)){if(!(name in runtime.modules)){runtime.addModule(name,new Module(name));runtime.packages[name]=this}exports=runtime.modules[name];parent=runtime.stack[runtime.stack.length-1];if(!exports.__empty_refs__){exports.__empty_refs__=[]}exports.__empty_refs__.push(parent.module.id)}else{deps=runtime.loadings[this.id].deps;runtime.pushStack(name,this);exports=this.make(name,context,deps,runtime);if(name=="__main__"&&typeof exports.main=="function"){exports.main()}runtime.popStack()}return exports};ObjectPackage.prototype.toDep=function(index,runtime){var name=this.dependencies[index];if(name.indexOf("/")!=-1){return new CommonJSDependency(name,this,runtime)}else{return new ObjectDependency(name,this,runtime)}};function Package(id,dependencies,factory){if(!id)return;this.id=id;this.factory=factory;this.dependencies=this.parseDependencies(dependencies)}Package.prototype.load=function(runtime,callback){var deps=[];var pkg=this;var loaded=-1;function next(){loaded++;if(loaded==pkg.dependencies.length){if(callback){callback()}}}this.dependencies.forEach(function(dependency,i){var dep=this.toDep(i,runtime);deps.push(dep);dep.load(next)},this);runtime.loadings[this.id].deps=deps;runtime.loadings[this.id].callbacks.forEach(function(callback){callback()});runtime.loadings[this.id].callbacks=[];next()};Package.prototype.execute=function(name,context,runtime){if(runtime.getStackItem(name)){throw new CyclicDependencyError(runtime.stack)}var exports=new Module(name);if(this.id==="sys"){exports.modules=runtime.modules;exports.stack=runtime.stack;exports.getModule=function(name){return runtime.packages[name]}}runtime.addModule(name,exports);runtime.packages[name]=this;return exports};Package.prototype.parseDependencies=function(dependencies){if(Array.isArray(dependencies))return dependencies;if(!dependencies){return[]}dependencies=dependencies.trim().replace(/^,*|,*$/g,"").split(/\s*,\s*/gi);return dependencies};function Dependency(name,owner,runtime){if(!name)return;this.owner=owner;this.runtime=runtime;this.name=name}function CommonJSDependency(name,owner,runtime){Dependency.apply(this,arguments);var loader=runtime.loader;var info,id,context;var paths=loader.paths;var type=this.getType(name);if(type=="absolute"){id=name}else if(type=="relative"){info=loader.find(urljoin(urljoin(owner.id,"."),name),paths);id=info.id;context=info.context}else if(type=="root"){id=urljoin(Loader._pageDir,name)}else{info=loader.find(name,paths);id=info.id;context=info.context}this.id=id;this.context=context||"";this.type=type}CommonJSDependency.prototype=new Dependency;CommonJSDependency.prototype.getType=function(name){if(~name.indexOf("://")||name.indexOf("//")===0){return"absolute"}if(name.indexOf("./")===0||name.indexOf("../")===0){return"relative"}if(name.charAt(0)==="/"&&name.charAt(1)!=="/"){return"root"}return"top-level"};CommonJSDependency.prototype.constructor=CommonJSDependency;CommonJSDependency.prototype.load=function(callback){this.runtime.loadModule(this.id,callback)};CommonJSDependency.prototype.execute=function(parentName,parentContext){var runtime=this.runtime;var loader=runtime.loader;var runtimeName;if(this.type=="top-level"){runtimeName=this.name}else if(this.type=="relative"){runtimeName=this.id.slice(parentContext.length)}else{runtimeName=this.id}if(runtimeName.slice(-3)==".js"){runtimeName=runtimeName.slice(0,-3)}var exports=runtime.modules[runtimeName];var pkg,deps;if(!exports){pkg=loader.lib[this.id];exports=pkg.execute(runtimeName,this.context,runtime)}return exports};function ObjectDependency(name,owner,runtime){Dependency.apply(this,arguments);var loader=runtime.loader;var paths=runtime.path.concat([runtime.moduleId]);var isRelative=false;var info=loader.find(name.replace(/\./g,"/"),paths,owner.id);var id=info.id;var context=info.context;if(context==""){isRelative=true;context=urljoin(urljoin(owner.id,"."),context)}this.nameParts=this.name.split(".");this.id=id;this.context=context;this.isRelative=isRelative}ObjectDependency.prototype=new Dependency;ObjectDependency.prototype.constructor=ObjectDependency;ObjectDependency.prototype.load=function(callback){var runtime=this.runtime;var loader=runtime.loader;var parts=this.nameParts;var loaded=-1;function next(){loaded++;if(loaded==parts.length){if(callback)callback()}}parts.forEach(function(part,i){var id,info;if(i==parts.length-1){id=this.id}else{info=loader.find(urljoin(this.context,parts.slice(0,i+1).join("/")));id=info.id;if(!info.found){id=id+"/index.js";loader.definePrefix(id)}}runtime.loadModule(id,next)},this);next()};ObjectDependency.prototype.execute=function(parentName,parentContext){var dep=this;var runtime=this.runtime;var loader=runtime.loader;var context=this.context||"";var parts=this.nameParts;var prefix,point;if(this.isRelative){point=parentName.lastIndexOf(".");if(point==-1){prefix=""}else{prefix=parentName.slice(0,point)}}else{prefix=""}var pName=prefix;var name;var rootName=(prefix?prefix+".":"")+parts[0];var id,pkg,exports;for(var i=0,l=parts.length,part;i<l;i++){part=parts[i];name=(pName?pName+".":"")+part;if(!(name in runtime.modules)){if(i==parts.length-1){id=dep.id}else{id=loader.find(urljoin(context,parts.slice(0,i+1).join("/"))).id}pkg=loader.lib[id];exports=pkg.execute(name,context,runtime);runtime.setMemberTo(pName,part,exports)}pName=name}return runtime.modules[rootName]};function LoaderRuntime(moduleId){this.modules={};this.packages={};this.loadings={};this.stack=[];this.members={};this.moduleId=moduleId;this.path=[""]}LoaderRuntime.prototype.addModule=function(name,exports){exports=exports||new Module(name);this.modules[name]=exports;var members=this.members[name];if(members){members.forEach(function(member){this.modules[name][member.id]=member.value},this)}return exports};LoaderRuntime.prototype.loadModule=function(id,callback){var runtime=this;var loader=this.loader;if(id in this.loadings){if(this.loadings[id].deps){callback()}else{this.loadings[id].callbacks.push(callback)}return}this.loadings[id]={deps:null,callbacks:[]};var pkg=loader.lib[id];if(!pkg){throw new NoModuleError(id)}function fileDone(){var id=pkg.id;var file=pkg.file;pkg=loader.lib[id];if(!pkg||!pkg.factory){throw new Error(file+" do not add "+id)}pkg.load(runtime,callback)}if(pkg.file){Loader.loadScript(pkg.file,fileDone,true)}else{pkg.load(this,callback)}};LoaderRuntime.prototype.getStackItem=function(id){var result;this.stack.some(function(m){if(m.id==id){result=m;return true}});return result};LoaderRuntime.prototype.pushStack=function(id,pkg){this.stack.push({id:id,module:pkg})};LoaderRuntime.prototype.popStack=function(){this.stack.pop()};LoaderRuntime.prototype.setMemberTo=function(host,member,value){if(host){if(this.modules[host]){this.modules[host][member]=value}else{if(!this.members[host])this.members[host]=[];this.members[host].push({id:member,value:value})}}};function Loader(base){this.useCache=true;this.anonymousModuleCount=0;this.base=base||"/";this.lib={};this.paths=[this.base];this.scripts=document.getElementsByTagName("script");this.lib["sys"]=new Package("sys")}Loader._urlNodeMap={};Loader._pageDir=null;Loader.getAbsolutePath=function(src){if(src.indexOf("://")!=-1||src.indexOf("//")===0){return cleanPath(src)}if(!Loader._pageDir){Loader._pageDir=calculatePageDir()}return cleanPath(Loader._pageDir+src)};Loader.prototype.name2id=function(name,withExt){if(typeof name!="string")return"";var id,ext,extdot;if(name.indexOf("/")==-1){id=name.replace(/\./g,"/")
}else{id=name}if(withExt&&name.lastIndexOf("/")!=name.length-1){extdot=id.lastIndexOf(".");if(extdot!=-1){ext=id.slice(extdot)}else{ext=""}if(!ext){id+=".js"}}return id};Loader.prototype.find=function(id,paths,base){var loader=this;var ext=id.slice(id.lastIndexOf("."));if(!paths){paths=this.paths}var foundId=null;var foundContext=null;function find(id){var pkg;if(pkg=loader.lib[id]||loader.lib[id+".js"]||loader.lib[id+"/index.js"]){return pkg.id}}function findIn(path){var tempId=find(urljoin(urljoin(base,path),id));if(tempId){foundId=tempId;foundContext=path;return true}}paths.some(findIn);return{found:!!foundId,id:foundId||id,context:foundContext}};Loader.prototype.buildFileLib=function(){var scripts=this.scripts;for(var i=0,script,names,src,l=scripts.length;i<l;i++){script=scripts[i];src=script.getAttribute("data-src");names=script.getAttribute("data-module");if(!names||!src)continue;names.trim().split(/\s+/gi).forEach(function(name){this.defineFile(urljoin(this.base,this.name2id(name,true)),src)},this)}};Loader.loadScript=function(src,callback,useCache){if(!src||typeof src!="string"){throw new Error("bad arguments.")}src=src.trim();var absPath=Loader.getAbsolutePath(src);if(useCache){var urlNodeMap=Loader._urlNodeMap,scriptNode=urlNodeMap[absPath];if(scriptNode){if(scriptNode.loading){scriptNode.callbacks.push(callback)}else{callback(scriptNode)}return}}var ele=document.createElement("script");ele.type="text/javascript";ele.src=src;ele.async=true;ele.loading=true;ele.callbacks=[];var doCallback=function(){ele.loading=null;ele.callbacks.forEach(function(callback){callback(ele)});for(var i=0,l=ele.callbacks.length;i<l;i++){ele.callbacks[i]=null}ele.callbacks=null;ele=null};ele.callbacks.push(callback);if(window.ActiveXObject){ele.onreadystatechange=function(){var rs=this.readyState;if("loaded"===rs||"complete"===rs){ele.onreadystatechange=null;doCallback()}}}else if(ele.addEventListener){ele.addEventListener("load",doCallback,false);ele.addEventListener("error",doCallback,false)}else{ele.onload=ele.onerror=doCallback}document.getElementsByTagName("head")[0].insertBefore(ele,null);if(useCache){urlNodeMap[absPath]=ele}};Loader.prototype.removeScript=function(src){if(!src||typeof src!="string"){throw new Error("bad arguments.")}src=src.trim();var absPath=Loader.getAbsolutePath(src);var urlNodeMap=Loader._urlNodeMap,scriptNode=urlNodeMap[absPath];if(scriptNode){delete urlNodeMap[absPath];if(scriptNode.parentNode){scriptNode.parentNode.removeChild(scriptNode)}scriptNode=null}};Loader.prototype.createRuntime=function(id){var runtime=new LoaderRuntime(id);runtime.loader=this;runtime.path=runtime.path.concat(this.paths);return runtime};Loader.prototype.definePrefix=function(id){if(!id||typeof id!="string")return;if(id in this.lib)return;this.lib[id]=new Package(id)};Loader.prototype.defineFile=function(id,src){if(!id||typeof id!="string")return;if(id in this.lib&&(this.lib[id].factory||this.lib[id].file))return;var pkg=new Package(id);pkg.file=src;this.lib[id]=pkg};Loader.prototype.defineModule=function(constructor,id,dependencies,factory){if(arguments.length<4)return;if(id in this.lib&&this.lib[id].factory)return;var pkg=new constructor(id,dependencies,factory);this.lib[id]=pkg};Loader.prototype.getModule=function(name){var id=this.find(this.name2id(name)).id;if(id in this.lib)return this.lib[id];return null};Loader.prototype.predefine=function(moduleName,src,base){if(!moduleName||!src){return}base=base||"";moduleName.trim().split(/\s+/gi).forEach(function(name){name=base+name;this.defineFile(urljoin(this.base,this.name2id(name,true)),src)},this)};Loader.prototype.define=function(name,dependencies,factory){if(typeof name!="string")return;if(typeof dependencies=="function"){factory=dependencies;dependencies=[]}var id=urljoin(this.base,this.name2id(name,true));this.defineModule(CommonJSPackage,id,dependencies,factory)};Loader.prototype.add=function(name,dependencies,factory){if(typeof name!="string")return;if(typeof dependencies=="function"){factory=dependencies;dependencies=[]}var id=urljoin(this.base,this.name2id(name,true));this.defineModule(ObjectPackage,id,dependencies,factory)};Loader.prototype.remove=function(name,all){var id=urljoin(this.base,this.name2id(name,true));delete this.lib[id];if(all){name=name.charAt(name.length-1)=="/"?name:name+"/";id=urljoin(this.base,this.name2id(name));Object.keys(this.lib).forEach(function(key){if(key.indexOf(id)==0){delete this.lib[key]}},this)}};Loader.prototype.clear=function(){for(var prop in this.lib){if(prop!="sys"){this.remove(prop)}}};Loader.prototype.execute=function(name){if(!name||typeof name!="string"){return}this.buildFileLib();var info=this.find(this.name2id(name));var id=info.id;var context=info.context;var runtime=this.createRuntime(id,context);object.runtime=runtime;runtime.loadModule(id,function(){var pkg=runtime.loader.lib[id];pkg.execute("__main__",context,runtime)});object.runtime=null};Loader.prototype.use=function(dependencies,factory){if(!factory||typeof factory!="function"){return}this.buildFileLib();var id="__anonymous_"+this.anonymousModuleCount+"__";this.anonymousModuleCount++;this.defineModule(CommonJSPackage,id,dependencies,function(require,exports,module){var args=[];module.dependencies.forEach(function(dependency){dep=require(dependency);if(args.indexOf(dep)==-1){args.push(dep)}});if(factory.length==args.length+1){if(typeof console!="undefined"&&console.warn){console.warn("object.use即将不再支持第一个exports参数，请尽快删除。")}args.unshift(exports)}factory.apply(null,args)});var runtime=this.createRuntime(id);object.runtime=runtime;runtime.loadModule(id,function(){var pkg=runtime.loader.lib[id];pkg.execute("__main__","",runtime)});object.runtime=null};object.Loader=Loader;object.NoModuleError=NoModuleError;object.ModuleRequiredError=ModuleRequiredError})(object);(function(object){var loader=new object.Loader("http://pub.objectjs.org/object/");object._loader=loader;object.add=loader.add.bind(loader);object.predefine=loader.predefine.bind(loader);object.define=loader.define.bind(loader);object.remove=loader.remove.bind(loader);object.use=loader.use.bind(loader);object.execute=loader.execute.bind(loader);object.addPath=function(path){loader.paths.push(path)};object.define("./window.js","sys",function(require){var sys=require("sys");var dom=sys.modules["dom"];if(dom)dom.wrap(window);return window});object.define("./loader.js",function(require,exports){exports.Loader=object.Loader})})(object);object.add("ua/index.js",function(exports){var numberify=this.numberify=function(s){if(!s||typeof s!="string"){}var c=0;return parseFloat(s.replace(/\./g,function(){return c++===0?".":""}))};this.__detectUA=detectUA;this.ua={};var o=detectUA(navigator.userAgent);object.extend(this.ua,o);function detectUA(ua){if(!ua&&typeof ua!="string"){ua=navigator.userAgent}var m,m2;var o={},core,shell;if(ua.indexOf("Trident/7.0")>-1){o[core="ie"]=document.documentMode;o[shell="ieshell"]=11}else if(!~ua.indexOf("Opera")&&(m=ua.match(/MSIE\s([^;]*)/))&&m[1]){if((m2=ua.match(/Trident\/([\d\.]*)/))&&m2[1]){o[core="ie"]=document.documentMode;o[shell="ieshell"]=numberify(m2[1])+4}else{o[shell="ieshell"]=o[core="ie"]=numberify(m[1])}}else{if((m=ua.match(/AppleWebKit\/([\d\.]*)/))&&m[1]){o[core="webkit"]=numberify(m[1])}else if(!~ua.indexOf("Opera")&&(m=ua.match(/Gecko/))){o[core="gecko"]=0;if((m=ua.match(/rv:([\d\.]*)/))&&m[1]){o[core]=numberify(m[1])}}else if((m=ua.match(/Presto\/([\d\.]*)/))&&m[1]){o[core="presto"]=numberify(m[1])}if((m=ua.match(/Chrome\/([\d\.]*)/))&&m[1]){o[shell="chrome"]=numberify(m[1])}else if((m=ua.match(/\/([\d\.]*)( Mobile\/?[\w]*)? Safari/))&&m[1]){o[shell="safari"]=numberify(m[1])}else if(/\/[\d\.]* \(KHTML, like Gecko\) Safari/.test(ua)){o[shell="safari"]=undefined}else if(!~ua.indexOf("Opera")&&(m=ua.match(/Firefox\/([\d\.]*)/))&&m[1]){o[shell="firefox"]=numberify(m[1])}else if((m=ua.match(/Opera\/([\d\.]*)/))&&m[1]){o[shell="opera"]=numberify(m[1]);if((m=ua.match(/Opera\/.* Version\/([\d\.]*)/))&&m[1]){o[shell]=numberify(m[1])}}else if((m=ua.match(/Opera ([\d\.]*)/))&&m[1]){core="presto";o[shell="opera"]=numberify(m[1])}}o.shell=shell;o.core=core;return o}});object.add("./string.js",function(exports){this.substitute=function(){return Mustache.to_html.apply(null,arguments)};this.camelCase=function(str){return str.replace(/-\D/g,function(match){return match.charAt(1).toUpperCase()})};this.hyphenate=function(str){return str.replace(/[A-Z]/g,function(match){return"-"+match.charAt(0).toLowerCase()})};this.capitalize=function(str){return str.replace(/\b[a-z]/g,function(match){return match.toUpperCase()})};this.trim=function(str){return(str||"").replace(/^\s+|\s+$/g,"")};this.ltrim=function(str){return(str||"").replace(/^\s+/,"")};this.rtrim=function(str){return(str||"").replace(/\s+$/,"")};this.lengthZh=function(str){return str.length};this.toQueryString=function(object){var queryString=[];for(var key in object){var value=object[key];var result;if(value&&value.constructor===Array){var qs={};value.forEach(function(val,i){qs[i]=val});result=arguments.callee(qs,key)}else if(typeof value=="object"){result=arguments.callee(value,key)}else{result=key+"="+encodeURIComponent(value)}if(value!==null)queryString.push(result)}return queryString.join("&")}});object.define("./events.js","ua",function(require,exports){var ua=require("ua");var _needWrapPreventDefault=function(){if(document.createEvent){var event=document.createEvent("Event");event.initEvent(type,false,true);if(event.preventDefault){event.preventDefault();return!(event.getPreventDefault?event.getPreventDefault():event.defaultPrevented)}else{return true}}return false}();function IEEvent(){}IEEvent.prototype.stopPropagation=function(){this.cancelBubble=true};IEEvent.prototype.preventDefault=function(){this.returnValue=false};IEEvent.prototype.getPreventDefault=function(){return this.returnValue===false};IEEvent.prototype.stop=function(){this.stopPropagation();this.preventDefault()};this.fireevent=function(arg1){var name,func,eventDataNames;var firer=function(self){var nativeName=arguments.callee.__name__;if(!name)name=nativeName;var eventData={};var args=Array.prototype.slice.call(arguments,1);if(eventDataNames){for(var i=0;i<eventDataNames.length;i++){eventData[eventDataNames[i]]=arguments[i+1]}}eventData._args=args;var event=self.fireEvent(name,eventData,self);var createEventMethod=self[nativeName+"_createEvent"];if(createEventMethod){args.unshift(event);createEventMethod.apply(self,args)}var preventDefaulted=event.getPreventDefault?event.getPreventDefault():event.defaultPrevented;if(!preventDefaulted)return func.apply(this,arguments)};if(typeof arg1=="function"){func=arg1;return firer}else{if(Array.isArray(arguments[0])){eventDataNames=arguments[0]}else{name=arg1;if(arguments[1])eventDataNames=arguments[1]}return function(_func){func=_func;return firer}}};this.HOLD=2;this.CAPTURE=1;this.wrapEvent=function(e){e.target=e.srcElement;e.stopPropagation=IEEvent.prototype.stopPropagation;e.preventDefault=IEEvent.prototype.preventDefault;e.getPreventDefault=IEEvent.prototype.getPreventDefault;e.stop=IEEvent.prototype.stop;return e};this.wrapPreventDefault=function(e){if(_needWrapPreventDefault){var oldPreventDefault=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=true;oldPreventDefault.apply(this,arguments)}}};var NATIVE_EVENTS={click:2,dblclick:2,mouseup:2,mousedown:2,contextmenu:2,mousewheel:2,DOMMouseScroll:2,mouseover:2,mouseout:2,mousemove:2,selectstart:2,selectend:2,keydown:2,keypress:2,keyup:2,orientationchange:2,touchstart:2,touchmove:2,touchend:2,touchcancel:2,gesturestart:2,gesturechange:2,gestureend:2,focus:2,blur:2,change:2,reset:2,select:2,submit:2,paste:2,oninput:2,load:2,unload:1,beforeunload:2,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1};function isNativeEventForNode(node,type){if(node.nativeEventNames){return node.nativeEventNames.indexOf(type)!=-1}return type in NATIVE_EVENTS}this.Events=new Class(function(){function moveNativeEventsToTail(self,type){var boss=getFirer(self,type);if(self.__nativeEvents&&self.__nativeEvents[type]){boss.removeEventListener(type,self.__nativeEvents[type].run,false);boss.addEventListener(type,self.__nativeEvents[type].run,false)}}function handle(self,type){var boss=getFirer(self,type);boss.attachEvent("on"+type,function(event){event=exports.wrapEvent(event||window.event);var funcs=self.__eventListeners?self.__eventListeners[type]:null;if(funcs){funcs=funcs.slice(0);funcs.forEach(function(func){try{func.call(self,event)}catch(e){handleEventErrorForIE(e)}});funcs=null}var natives=self.__nativeEvents?self.__nativeEvents[type]:null;if(natives){natives=natives.slice(0);natives.forEach(function(func){func.call(self,event)});natives=null}})}function addOnHandlerAsEventListener(self,type){if(type in NATIVE_EVENTS&&self.nodeType==1)return;var typeLower=typeof type=="string"?type.toLowerCase():type;var boss=getFirer(self,type);var onhandler=self["on"+typeLower],onhandlerBak=boss["__on"+typeLower];if(!onhandler&&onhandlerBak){boss.removeEventListener(type,onhandlerBak,false);boss["__on"+typeLower]=null}else if(onhandler&&onhandler!=onhandlerBak){boss.removeEventListener(type,onhandlerBak,false);boss.addEventListener(type,onhandler,false);boss["__on"+typeLower]=onhandler}}function attachOnHandlerAsEventListener(self,type){if(self.nodeType==1&&isNativeEventForNode(self,type)&&isNodeInDOMTree(self))return;var typeLower=typeof type=="string"?type.toLowerCase():type;if(!self.__eventListeners){self.__eventListeners={}}if(!self.__eventListeners[type]){self.__eventListeners[type]=[]}var funcs=self.__eventListeners[type];var l=funcs.length;var onhandler=self["on"+typeLower],onhandlerBak=self["__on"+typeLower];if(!onhandler&&onhandlerBak){for(var i=0;i<l;i++){if(funcs[i]==onhandlerBak){funcs.splice(i,1);break}}self["__on"+typeLower]=null}else if(onhandler&&onhandler!=onhandlerBak){for(var i=0;i<l;i++){if(funcs[i]==onhandlerBak){funcs.splice(i,1);break}}funcs.push(onhandler);self["__on"+typeLower]=onhandler}}function isNodeInDOMTree(node){if(!node){return false}var parent=node.parentNode;var top=document.documentElement;while(parent){if(parent==top){return true}parent=parent.parentNode}return false}function insertWrapPreventDefaultHandler(boss,type,cap){if(!boss["__preEventAdded_"+type]){boss["__preEventAdded_"+type]=true;if(boss["on"+type]){boss["__on"+type]=boss["on"+type];boss["on"+type]=null}boss.addEventListener(type,function(event){exports.wrapPreventDefault(event)},cap);if(boss["__on"+type]){boss["on"+type]=boss["__on"+type];boss["__on"+type]=null;try{delete boss["__on"+type]}catch(e){}}}}var hasConsoleError=typeof console!="undefined"&&console.error;var detail=[];function handleEventErrorForIE(e){if(hasConsoleError){detail.length=0;for(var prop in e){detail.push(prop+":"+e[prop]);detail.push(", ")}if(detail.length>0){detail.pop()}if(typeof console!=="undefined"&&console.error){console.error(e,detail.join(""))}}}this.initialize=function(self){if(!self.addEventListener||self==window&&ua.ua.ie==9){if(!self.__eventListeners){self.__eventListeners={}}if(!self.__nativeEvents)self.__nativeEvents={}}if(!self.addEventListener&&!self.attachEvent||self==window&&ua.ua.ie==9){self.__boss=document.createElement("div")}};this.addEvent=document.addEventListener?function(self,type,func,cap){var boss=getFirer(self,type);if(cap===null)cap=false;cap=!!(cap&exports.CAPTURE);if(!ua.ua.ie&&(type=="mouseenter"||type=="mouseleave")){var innerFunc=func;func=function(event){if(innerFunc.delegating){innerFunc.call(self,event);return}var p=event.relatedTarget;while(p&&p!=self){try{p=p.parentNode}catch(e){p=self}}if(p!==self&&innerFunc){innerFunc.call(self,event)}};func.innerFunc=innerFunc;type=type=="mouseenter"?"mouseover":"mouseout";if(!self.__eventListeners){self.__eventListeners={}}if(!self.__eventListeners[type]){self.__eventListeners[type]=[]}self.__eventListeners[type].push(func)}if(_needWrapPreventDefault){insertWrapPreventDefaultHandler(boss,type,cap)}addOnHandlerAsEventListener(self,type);boss.addEventListener(type,func,cap);moveNativeEventsToTail(self,type)}:function(self,type,func){var boss=getFirer(self,type);var funcs;if(!self.__eventListeners)self.__eventListeners={};if(!self.__eventListeners[type]){funcs=[];self.__eventListeners[type]=funcs;if(!self.__nativeEvents||!self.__nativeEvents[type]){handle(self,type)}}else{funcs=self.__eventListeners[type]}if(funcs.some(function(f){return f===func}))return;attachOnHandlerAsEventListener(self,type);funcs.push(func)};this.addNativeEvent=document.addEventListener?function(self,type,func){var boss=getFirer(self,type);if(_needWrapPreventDefault){insertWrapPreventDefaultHandler(boss,type,false)}var natives;if(!self.__nativeEvents)self.__nativeEvents={};if(!self.__nativeEvents[type]){natives=[];self.__nativeEvents[type]=natives;self.__nativeEvents[type].run=function(event){natives.forEach(function(func){func.call(self,event)})};moveNativeEventsToTail(self,type)}else{natives=self.__nativeEvents[type]}natives.push(func)}:function(self,type,func){var boss=getFirer(self);var natives;if(!self.__nativeEvents)self.__nativeEvents={};if(!self.__nativeEvents[type]){natives=[];self.__nativeEvents[type]=natives;if(!self.__nativeEvents||!self.__eventListeners[type]){handle(self,type)}}else{natives=self.__nativeEvents[type]}if(natives.some(function(f){return f===func}))return;natives.push(func)};this.removeEvent=document.removeEventListener?function(self,type,func,cap){var boss=getFirer(self,type);cap=!!(cap&exports.CAPTURE);if(!ua.ua.ie&&type=="mouseleave"){type="mouseout";if(self.__eventListeners&&self.__eventListeners[type]){var funcs=self.__eventListeners[type];for(var i=0,current,l=funcs.length;i<l;i++){current=funcs[i];if(current.innerFunc===func){boss.removeEventListener(type,current,cap);funcs.splice(i,1);break}}}}else{boss.removeEventListener(type,func,cap)}}:function(self,type,func,cap){var boss=getFirer(self,type);if(!self.__eventListeners)self.__eventListeners={};var funcs=self.__eventListeners[type];if(!funcs)return;for(var i=0;i<funcs.length;i++){if(funcs[i]===func){funcs.splice(i,1);break}}};var globalEvents=["error","unload","scroll","resize","load","beforeunload","blur","focus","storage","popstate","hashchange","message","redo","undo"];function getFirer(self,type){if(ua.ua.ie!=9||self!=window){return self.__boss||self}if(globalEvents.indexOf(type)!=-1){return self}else{return self.__boss}}this.fireEvent=document.dispatchEvent?function(self,type,eventData){if(!ua.ua.ie){if(type=="mouseleave"){type="mouseout"}else if(type=="mouseenter"){type="mouseover"}}addOnHandlerAsEventListener(self,type);var boss=getFirer(self,type);var event=document.createEvent("Event");event.initEvent(type,false,true);object.extend(event,eventData);exports.wrapPreventDefault(event);boss.dispatchEvent(event);return event}:function(self,type,eventData){if(!eventData)eventData={};if(self.nodeType==1&&isNativeEventForNode(self,type)){var event=exports.wrapEvent(document.createEventObject());object.extend(event,eventData);if(isNodeInDOMTree(self)){var onhandlerBak=self["__on"+type];var funcs=self.__eventListeners[type];if(onhandlerBak&&funcs){for(var i=0,l=funcs.length;i<l;i++){if(funcs[i]==onhandlerBak){funcs.splice(i,1);break}}self["__on"+type]=null}if(self._oldFireEventInIE){self._oldFireEventInIE("on"+type,event);return event}else{if(typeof console!="undefined"){console.warn("请使用dom.wrap方法包装对象以添加事件处理函数")}}}}attachOnHandlerAsEventListener(self,type);var event=exports.wrapEvent(eventData);var funcs=self.__eventListeners[type];if(funcs){funcs=funcs.slice(0);for(var i=0,j=funcs.length;i<j;i++){if(funcs[i]){try{funcs[i].call(self,event,true)}catch(e){handleEventErrorForIE(e)}}}funcs=null}var natives=self.__nativeEvents[type];if(natives){natives=natives.slice(0);natives.forEach(function(func){func.call(self,event)});natives=null}return event}})});object.add("./options.js",function(exports){var enumerables=true,APslice=Array.prototype.slice;for(var i in{toString:1})enumerables=null;if(enumerables)enumerables=["hasOwnProperty","valueOf","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","constructor"];this.overloadsetter=function(func){return function(){var a=arguments[func.length-2]||null;var b=arguments[func.length-1];var passArgs=args=APslice.call(arguments,0,func.length-2);if(a===null)return this;if(typeof a!="string"){for(var k in a){args=passArgs.slice(0);args.push(k);args.push(a[k]);func.apply(this,args)}if(enumerables){for(var i=enumerables.length;i>0;i--){k=enumerables[i];if(a.hasOwnProperty(k))func.call(this,k,a[k])}}}else{args.push(a);args.push(b);func.apply(this,args)}return this}};this.Arguments=new Class(function(){this.initialize=function(self,defaults,opts){if(opts==undefined)opts={};var output={};for(var key in defaults){output[key]=opts[key]!=undefined?opts[key]:defaults[key]}return output}});this.Options=new Class({initialize:function(self,provider){if(provider){self._provider=provider}self._options={}},setOptions:function(self,options,host){if(!host)host=self._options;for(var i in options){if(i in host)host[i]=options[i]}},setOption:function(self,name,type,value){if(value!==undefined){self._options[name]=value}else if(self._provider&&self._provider.makeOption){value=self._provider.makeOption(name,type);if(value===null)return;else self._options[name]=value}},getOptions:function(self){return self._options}})});object.define("dom/index.js","ua, events, string, net",function(require,exports,module){var ua=require("ua"),events=require("events"),string=require("string"),net=require("net");window.UID=1;var storage={};var get=function(uid){return storage[uid]||(storage[uid]={})};var $uid=this.$uid=window.ActiveXObject?function(item){if(item===undefined||item===null)return null;return(item.uid||(item.uid=[window.UID++]))[0]}:function(item){if(item===undefined||item===null)return null;return item.uid||(item.uid=window.UID++)};$uid(window);$uid(document);function doScrollLeft(){if(window.__domLoaded){runHooks();return}if(!document.documentElement||!document.documentElement.doScroll){return}try{document.documentElement.doScroll("left")}catch(e){setTimeout(doScrollLeft,1);return}doDomReady()}function doCheckReadyState(){var timer=null;timer=setInterval(function(){if(/loaded|complete/.test(document.readyState)){clearInterval(timer);doDomReady()}},1)}function doDomReady(){if(!window.__domLoaded){window.__domLoaded=true}runHooks()}if(!window.__domLoaded&&!window.__domreadyAdded){window.__domreadyAdded=true;window.__domLoaded=false;window.__domloadHooks=[];if(document.addEventListener){document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,false);window.__domLoaded=true},false)}else if(window.attachEvent){document.attachEvent("onreadystatechange",function(){if(document.readyState==="complete"){document.detachEvent("onreadystatechange",arguments.callee);doDomReady()}});window.attachEvent("onload",doDomReady);tryDomReady()}}function tryDomReady(){if(ua.ua.webkit&&ua.ua.webkit<525){doCheckReadyState()}else if(ua.ua.ie){var toplevel=false;try{toplevel=window.frameElement==null}catch(e){}if(toplevel){doScrollLeft()}}}function runHooks(){var callbacks=window.__domloadHooks;var fn;while(callbacks[0]){try{fn=callbacks.shift();fn()}catch(e){if(XN&&XN.DEBUG_MODE)throw e}}}this.ready=function(callback){if(typeof callback!="function"){return}if(window.__domLoaded==true){callback();return}if(document.readyState=="complete"){window.__domLoaded=true;runHooks();callback();return}if(ua.ua.webkit&&ua.ua.webkit<525||!document.addEventListener){window.__domloadHooks.push(callback)}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",callback,false)}};var WRAPPED={};var wrap=this.wrap=function(node){if(!node)return null;if(Array.isArray(node)){return new exports.Elements(node)}else{if(node._wrapped)return node;if(ua.ua.ie&&node.fireEvent){node._oldFireEventInIE=node.fireEvent}var wrapper;if(node===window){wrapper=exports.Window}else if(node===window.document){wrapper=exports.Document}else if(node.nodeType===1){wrapper=getWrapper(node.tagName)}else{return node}node._wrapped=WRAPPED;$uid(node);Class.inject(wrapper,node,function(prop,dest,src){if(typeof src[prop]!="function"){return!(prop in dest)}else{return true}});return node}};this.getElements=function(selector,context){if(!selector||typeof selector!="string"){return null}if(!context)context=document;return new exports.Elements(Sizzle(selector,context));var parsed=Slick.parse(selector);var eles=Sizzle(selector,context);var wrapper,part;if(parsed.expressions.length==1){part=parsed.expressions[0];wrapper=getWrapper(part[part.length-1].tag)}else{for(var i=0,chain,previousChain;i<parsed.expressions.length;i++){part=parsed.expressions[i];wrapper=getWrapper(part[part.length-1].tag);chain=Class.getChain(wrapper).slice(0,-1).reverse();if(previousChain){chain=getCommon(chain,previousChain)}if(chain.length==1)break;previousChain=chain}wrapper=chain[chain.length-1]}return new exports.Elements(eles,wrapper)};this.getElement=function(selector,context){if(!selector||typeof selector!="string"){return null}if(!context)context=document;var ele=Sizzle(selector,context)[0];ele=wrap(ele);return ele};this.id=function(id){return exports.wrap(document.getElementById(id))};var eval_inner_JS=this.eval_inner_JS=function(ele){if(!ele){return}if(typeof ele=="string"){var node=document.createElement("div");node.innerHTML="<div>&nbsp;</div> "+ele;ele=node}var js=[];if(ele.nodeType==11){for(var i=0,l=ele.childNodes.length,current;i<l;i++){current=ele.childNodes[i];if(current.tagName&&current.tagName.toUpperCase()=="SCRIPT"){js.push(current)}else if(current.nodeType===1){var subScripts=current.getElementsByTagName("script");for(var j=0,subLength=subScripts.length;j<subLength;j++){js.push(subScripts[j])}}}}else if(ele.nodeType==1){if(ele.tagName&&ele.tagName.toUpperCase()=="SCRIPT"){js.push(ele)}else{js=ele.getElementsByTagName("script")}}var arr=[];for(i=0;i<js.length;i++){arr.push(js[i])}arr.forEach(function(s,i){if(s.src){return}else{var inner_js="__inner_js_out_put = [];\n";inner_js+=s.innerHTML.replace(/document\.write/g,"__inner_js_out_put.push");eval(inner_js);if(__inner_js_out_put.length!==0){var tmp=document.createDocumentFragment();var div=document.createElement("div");div.innerHTML=__inner_js_out_put.join("");while(div.firstChild){tmp.appendChild(div.firstChild)}s.parentNode.insertBefore(tmp,s)}}})};var _supportUnknownTags=function(){var t=document.createElement("div");t.innerHTML="<TEST_TAG></TEST_TAG>";return!(t.firstChild===null)}();var _supportNamedItemSync=function(){if(ua.ua.ie<8)return false;return true}();var _supportPlaceholder="placeholder"in document.createElement("input");var _supportNaturalWH="naturalWidth"in document.createElement("img");var _supportHTML5Forms="checkValidity"in document.createElement("input");var _supportHidden="hidden"in document.createElement("div");var _supportMultipleSubmit="formAction"in document.createElement("input");var _supportSelectionStart="selectionStart"in document.createElement("input");var nativeproperty=function(){var prop=property(function(self){var attr=prop.__name__;attr=attr.replace(/^prop_/,"");return self[attr]},function(self,value){var attr=prop.__name__;attr=attr.replace(/^prop_/,"");self._set(attr,value)});return prop};var attributeproperty=function(defaultValue,attr){var prop=property(function(self){if(!attr)attr=prop.__name__.toLowerCase();attr=attr.replace(/^prop_/,"");var value=self.getAttribute(attr);return value!=null&&value!=="undefined"?value:defaultValue},function(self,value){if(!attr)attr=prop.__name__.toLowerCase();attr=attr.replace(/^prop_/,"");if(!value)value="";self.setAttribute(attr,value)});return prop};this.getDom=function(str){var tmp=document.createElement("div");var result=document.createDocumentFragment();if(!_supportUnknownTags){tmp.style.display="none";document.body.appendChild(tmp)}tmp.innerHTML=str;while(tmp.firstChild){result.appendChild(wrap(tmp.firstChild))}if(!_supportUnknownTags)tmp.parentNode.removeChild(tmp);return result};this.ElementClassList=new Class(Array,function(){this.initialize=function(self,ele){self.length=0;self._ele=ele;self._loadClasses()};this._loadClasses=function(self){self._classes=self._ele.className.replace(/^\s+|\s+$/g,"").split(/\s+/)};this.toggle=function(self,token){if(!token){throw new Error("token不能为空");return}if(typeof token!="string")return;if(self.contains(token))self.remove(token);else self.add(token)};this.add=function(self,token){if(!token){throw new Error("token不能为空");return}if(typeof token!="string")return;if(!self.contains(token)){self._ele.className=(self._ele.className+" "+token).trim();self._loadClasses()}};this.remove=function(self,token){if(!token){throw new Error("token不能为空");return}if(typeof token!="string")return;if(!self.contains(token))return;self._ele.className=self._ele.className.replace(new RegExp(token.trim(),"i"),"").trim();self._loadClasses()};this.contains=function(self,token){if(!token){throw new Error("token不能为空");return false}if(typeof token!="string")return false;self._loadClasses();if(self._classes.indexOf(token)!=-1)return true;else return false};this.item=function(self,i){self._loadClasses();return self._classes[i]||null};this.toString=function(self){return self._ele.className}});var basicNativeEventNames=["click","dblclick","mouseup","mousedown","contextmenu","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup"];this.Element=new Class(function(){Class.mixin(this,events.Events);this.nativeEventNames=basicNativeEventNames;this.initialize=function(self,tagName){if(tagName){self=document.createElement(tagName);wrap(self)}else{}if(!self.__eventListeners)self.__eventListeners={};if(!self.__nativeEvents)self.__nativeEvents={};if(self.classList===undefined&&self!==document&&self!==window){self.classList=new exports.ElementClassList(self)}self.delegates={}};this.prop_hidden=_supportHidden?nativeproperty():property(function(self){return self.style.display=="none"},function(self,value){if(value==true){if(self.style.display!=="none")self.__oldDisplay=self.style.display;self.style.display="none"}else{self.style.display=self.__oldDisplay||""}});this.retrieve=function(self,property,defaultValue){var storage=get(self.uid);if(!(property in storage)&&defaultValue!==undefined)storage[property]=defaultValue;return storage[property]};this.store=function(self,property,value){var storage=get(self.uid);storage[property]=value;return self};this.delegate=function(self,selector,type,fn,option){function wrapper(e){var ele=e.srcElement||e.target;do{if(ele&&exports.Element.get("matchesSelector")(ele,selector))fn.call(wrap(ele),e)}while(ele=ele.parentNode)}var key=selector+"_"+type;if(!self.delegates){self.delegates={}}if(!(key in self.delegates)){self.delegates[key]=[]}self.delegates[key].push({wrapper:wrapper,fn:fn});wrapper.delegating=true;if(ua.ua.ie){if(type=="mouseleave"){type="mouseout"}else if(type=="mouseenter"){type="mouseover"}}self.addEvent(type,wrapper,option)};this.undelegate=function(self,selector,type,fn,option){var key=selector+"_"+type;if(!self.delegates){self.delegates={}}if(!(key in self.delegates))return;self.delegates[key].forEach(function(item){if(item.fn===fn){self.removeEvent(type,item.wrapper,option);return}})};this.matchesSelector=function(self,selector){if(self!=document&&!self.parentNode){return false}return Sizzle.matches(selector,[self]).length>0};this.getData=function(self,name){return self.getAttribute("data-"+name)};this.setData=function(self,name,value){return self.setAttribute("data-"+name,value)};this.setHTML=function(self,str){self.set("innerHTML",str)};this.setContent=function(self,str){self.setHTML(str)};this.getElement=function(self,selector){return exports.getElement(selector,self)};this.getElements=function(self,selector){return exports.getElements(selector,self)};var inserters={before:function(context,element){var parent=element.parentNode;
if(parent)parent.insertBefore(context,element)},after:function(context,element){var parent=element.parentNode;if(parent)parent.insertBefore(context,element.nextSibling)},bottom:function(context,element){element.appendChild(context)},top:function(context,element){element.insertBefore(context,element.firstChild)}};inserters.inside=inserters.bottom;this.grab=function(self,el,where){inserters[where||"bottom"](el,self);return self};this.inject=function(self,el,where){inserters[where||"bottom"](self,el);return self};this.getPrevious=function(self,selector){var matchesSelector=selector?exports.Element.get("matchesSelector"):null;var element=self;while(element=element.previousSibling){if(element.nodeType!=1){continue}if(!matchesSelector||matchesSelector(element,selector)){return wrap(element)}}return null};this.getAllPrevious=function(self,selector){var matchesSelector=selector?exports.Element.get("matchesSelector"):null;var result=[];var element=self;while(element=element.previousSibling){if(element.nodeType!=1){continue}if(!matchesSelector||matchesSelector(element,selector)){result.push(wrap(element))}}return result};this.getNext=function(self,selector){var matchesSelector=selector?exports.Element.get("matchesSelector"):null;var element=self;while(element=element.nextSibling){if(element.nodeType!=1){continue}if(!matchesSelector||matchesSelector(element,selector)){return wrap(element)}}return null};this.getAllNext=function(self,selector){var matchesSelector=selector?exports.Element.get("matchesSelector"):null;var result=[];var element=self;while(element=element.nextSibling){if(element.nodeType!=1){continue}if(!matchesSelector||matchesSelector(element,selector)){result.push(wrap(element))}}return result};this.getFirst=function(self,selector){var matchesSelector=selector?exports.Element.get("matchesSelector"):null;var childrens=self.childNodes,l=childrens.length;for(var i=0,element;i<l;i++){element=childrens[i];if(element.nodeType!=1){continue}if(!matchesSelector||matchesSelector(element,selector)){return wrap(element)}}return null};this.getLast=function(self,selector){var matchesSelector=selector?exports.Element.get("matchesSelector"):null;var childrens=self.childNodes,l=childrens.length;for(var i=l-1,element;i>=0;i--){element=childrens[i];if(element.nodeType!=1){continue}if(!matchesSelector||matchesSelector(element,selector)){return wrap(element)}}return null};this.getParent=function(self,selector){if(!selector)return wrap(self.parentNode);var matchesSelector=exports.Element.get("matchesSelector");var element=self;do{if(matchesSelector(element,selector))return wrap(element)}while(element=element.parentNode);return null};this.getParents=function(self,selector){var matchesSelector=selector?exports.Element.get("matchesSelector"):null;var result=[];var element=self;while(element=element.parentNode){if(element.nodeType!=1)continue;if(!matchesSelector||matchesSelector(element,selector)){result.push(wrap(element))}}return result};this.getSiblings=function(self,selector){return self.getAllPrevious(selector).concat(self.getAllNext(selector))};this.getChildren=function(self,selector){var matchesSelector=selector?exports.Element.get("matchesSelector"):null;var childrens=self.childNodes,l=childrens.length,result=[];for(var i=0,element;i<l;i++){element=childrens[i];if(element.nodeType!=1){continue}if(!matchesSelector||matchesSelector(element,selector)){result.push(wrap(element))}}return result};this.addClass=function(self,name){if(!name){return}self.classList.add(name)};this.removeClass=function(self,name){if(!name){return}self.classList.remove(name)};this.toggleClass=function(self,name){if(!name){return}self.classList.toggle(name)};this.hasClass=function(self,name){if(!name){return false}return self.classList.contains(name)};var html=document.documentElement;var floatName=html.style.cssFloat==null?"styleFloat":"cssFloat",hasOpacity=!ua.ua.ie&&html.style.opacity!=null,hasFilter=html.style.filter!=null,reAlpha=/alpha\(opacity=([\d.]+)\)/i;this.prop_opacity=property(function(self){if(hasOpacity){return self.style.opacity}else if(hasFilter){var filter=self.style.filter||self.currentStyle.filter;if(filter)opacity=filter.match(reAlpha);return opacity==null||filter==null?1:opacity[1]/100}else{return self.retrieve("opacity")}},function(self,opacity){if(hasOpacity){self.style.opacity=opacity}else if(hasFilter){if(!self.currentStyle||!self.currentStyle.hasLayout)self.style.zoom=1;opacity=parseInt(opacity*100);if(opacity>100){opacity=100}else if(opacity<0){opacity=0}var opacityStr=opacity==100?"":"alpha(opacity="+opacity+")";var filter=self.style.filter||self.currentStyle.filter||"";self.style.filter=reAlpha.test(filter)?filter.replace(reAlpha,opacityStr):filter+opacityStr}else{self.store("opacity",opacity);self.style.visibility=opacity>0?"visible":"hidden"}});this.setStyle=function(self,property,value){switch(property){case"opacity":return self.set("opacity",parseFloat(value));case"float":property=floatName;break;default:break}property=string.camelCase(property);self.style[property]=value;return null};this.getStyle=function(self,style){if(ua.ua.ie){style=style=="float"||style=="cssFloat"?"styleFloat":style;var value=self.style[style];if(!value&&self.currentStyle)value=self.currentStyle[style];if(style=="opacity"){if(value=(self.style["filter"]||"").match(/alpha\(opacity=(.*)\)/)){if(value[1]){return parseFloat(value[1])/100}}return 1}if(value=="auto"){if((style=="width"||style=="height")&&self.getStyle("display")!="none"){return self["offset"+(style=="width"?"Width":"Height")]+"px"}return value}return value}else{style=style=="float"?"cssFloat":style;var value=self.style[style];if(!value){var css=document.defaultView.getComputedStyle(self,null);value=css?css[style]:null}if(style=="opacity")return value?parseFloat(value):1;return value}};this.dispose=function(self){return self.parentNode?self.parentNode.removeChild(self):self};var blockElements="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr noframes noscript ol p pre table ul center dir isindex menu".split(" ");this.hide=function(self){self.setData("old-display",self.getStyle("display"));self.style.display="none"};this.show=function(self){if(self.getStyle("display")!="none"){return}var display=self.getData("old-display");if(display&&display!="none"){self.style.display=display;return}self.style.display="";if(self.getStyle("display")!="none"){return}if(blockElements.indexOf(self.get("tagName").toLowerCase())!=-1){self.style.display="block"}else{self.style.display="inline"}};this.toggle=function(self){if(self.getStyle("display")=="none")self.show();else self.hide()};this.prop_innerHTML=property(null,function(self,html){if(_supportUnknownTags){self.innerHTML=html}else{var nodes=exports.getDom(html);self.innerHTML="";while(nodes.firstChild)self.appendChild(nodes.firstChild)}});this.prop_tagName=property(function(self){return self.tagName.toUpperCase()});this.fromString=staticmethod(function(str){var tmp=document.createElement("div");if(!_supportUnknownTags){tmp.style.display="none";document.body.appendChild(tmp)}tmp.innerHTML=str.trim();var result=wrap(tmp.firstChild);if(!_supportUnknownTags)tmp.parentNode.removeChild(tmp);return result});this.position=function(self){if(self.parentNode===null||self.style.display=="none"){return false}var parent=null;var pos=[];var box;if(self.getBoundingClientRect){box=self.getBoundingClientRect();var scrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop);var scrollLeft=Math.max(document.documentElement.scrollLeft,document.body.scrollLeft);return{x:box.left+scrollLeft,y:box.top+scrollTop}}else if(document.getBoxObjectFor){box=document.getBoxObjectFor(self);var borderLeft=self.style.borderLeftWidth?parseInt(self.style.borderLeftWidth):0;var borderTop=self.style.borderTopWidth?parseInt(self.style.borderTopWidth):0;pos=[box.x-borderLeft,box.y-borderTop]}else{pos=[self.offsetLeft,self.offsetTop];parent=self.offsetParent;if(parent!=self){while(parent){pos[0]+=parent.offsetLeft;pos[1]+=parent.offsetTop;parent=parent.offsetParent}}if(ua.ua.opera||ua.ua.safari&&self.style.position=="absolute"){pos[0]-=document.body.offsetLeft;pos[1]-=document.body.offsetTop}}parent=self.parentNode||null;while(parent&&parent.tagName!="BODY"&&parent.tagName!="HTML"){pos[0]-=parent.scrollLeft;pos[1]-=parent.scrollTop;parent=parent.parentNode}return{x:pos[0],y:pos[1]}}});this.ImageElement=new Class(exports.Element,function(){this.nativeEventNames=basicNativeEventNames.concat(["error","abort"]);function _getNaturalSize(img){var anotherImg=new Image;anotherImg.src=img.src;return{width:anotherImg.width,height:anotherImg.height}}this.prop_naturalWidth=property(function(self){if(_supportNaturalWH){return self.naturalWidth}else{return _getNaturalSize(self).width}});this.prop_naturalHeight=property(function(self){if(_supportNaturalWH){return self.naturalHeight}else{return _getNaturalSize(self).height}})});this.FormElement=new Class(exports.Element,function(){this.nativeEventNames=basicNativeEventNames.concat(["reset","submit"]);this.initialize=function(self){this.parent(self);if(self.elements){for(var i=0;i<self.elements.length;i++){wrap(self.elements[i])}}if(!_supportNamedItemSync){self.elements.namedItem=function(name){return Sizzle("*[name="+name+"]",self)[0]}}if(!_supportMultipleSubmit){self.addNativeEvent("submit",function(event){if(!self.__submitButton)return;var button=self.__submitButton;self.__submitButton=null;var oldAction=self.action;var oldMethod=self.method;var oldEnctype=self.encoding||self.enctype;var oldNoValidate=self.noValidate;var oldTarget=self.target;var formAction=button.getAttribute("formaction");var formMethod=button.getAttribute("formmethod");var formEnctype=button.getAttribute("formenctype");var formNoValidate=button.getAttribute("formnovalidate");var formTarget=button.getAttribute("formtarget");if(formAction)self.action=formAction;if(formMethod)self.method=formMethod;if(formEnctype)self.enctype=self.encoding=formEnctype;if(formNoValidate)self.formNoValidate=formNoValidate;if(formTarget)self.target=formTarget;var preventDefaulted=event.getPreventDefault?event.getPreventDefault():event.defaultPrevented;if(!preventDefaulted){event.preventDefault();self.submit()}if(ua.ua.webkit<=534.3){setTimeout(function(){self.action=oldAction;self.method=oldMethod;self.enctype=self.encoding=oldEnctype;self.formNoValidate=oldNoValidate;self.target=oldTarget},0)}else{self.action=oldAction;self.method=oldMethod;self.enctype=self.encoding=oldEnctype;self.formNoValidate=oldNoValidate;self.target=oldTarget}})}};this.createRequest=function(self,params){if(!params)params={};if(!params.method)params.method=self.method;if(!params.url)params.url=self.action;if(!params.data)params.data=self.toQueryString();if(!params.onsuccess)params.onsuccess=function(event){self.fireEvent("requestSuccess",{request:event.request})};if(!params.onerror)params.onerror=function(event){self.fireEvent("requestError",{request:event.request})};if(net){xhr=new net.Request(params)}else{throw new object.ModuleRequiredError("net",module)}return xhr};this.send=function(self,data){var request=self.createRequest();request.send(data);return request};this.toQueryString=function(self){var queryString=[];function addItem(name,value){if(typeof value!="undefined")queryString.push(encodeURIComponent(name)+"="+encodeURIComponent(value))}self.getElements("input, select, textarea, output").forEach(function(el){var type=el.type;if(!el.name||el.disabled||type=="submit"||type=="reset"||type=="file"||type=="image")return;if(el.tagName.toLowerCase()=="select"){el.getSelected().map(function(opt){var value=wrap(opt).get("value");addItem(el.name,value)})}else if(type=="radio"||type=="checkbox"){if(el.checked){addItem(el.name,el.get("value"))}}else{addItem(el.name,el.get("value"))}});return queryString.join("&")};this.checkValidity=function(self){return self.getElements("input, select, textarea, output").every(function(el){return el.checkValidity()})}});this.FormItemElement=new Class(exports.Element,function(){this.nativeEventNames=basicNativeEventNames.concat(["focus","blur","change","select","paste"]);this.required=_supportHTML5Forms?nativeproperty():attributeproperty(false);this.pattern=_supportHTML5Forms?nativeproperty():attributeproperty("");this.maxlength=nativeproperty();this.type=_supportHTML5Forms?nativeproperty():attributeproperty("text");this.min=_supportHTML5Forms?nativeproperty():attributeproperty("");this.max=_supportHTML5Forms?nativeproperty():attributeproperty("");this.selectionStart=property(function(self){try{if(typeof self.selectionStart=="number"){return self.selectionStart}}catch(e){return-1}if(document.selection){var range=document.selection.createRange();if(range==null||range.parentElement()!=self){if(self.__selectionPos){return self.__selectionPos.start}else{return-1}}return calculateSelectionPos(self).start}else{return-1}});this.selectionEnd=property(function(self){try{if(typeof self.selectionEnd=="number"){return self.selectionEnd}}catch(e){return-1}if(document.selection){var range=document.selection.createRange();if(range==null||range.parentElement()!=self){if(self.__selectionPos){return self.__selectionPos.end}else{return-1}}return calculateSelectionPos(self).end}else{return-1}});this.getSelected=function(self){self.selectedIndex;var selected=[];for(var i=0;i<self.options.length;i++){if(self.options[i].selected)selected.push(self.options[i])}return selected};this.prop_value=property(function(self){if(self.classList.contains("placeholder"))return"";return self.value},function(self,value){if(self.classList.contains("placeholder")){self.classList.remove("placeholder");self.removeAttribute("autocomplete");self.value=""}self.value=value;if(!_supportPlaceholder&&!self.value&&self.getAttribute("placeholder")){self.classList.add("placeholder");self.value=self.getAttribute("placeholder");self.setAttribute("autocomplete","off")}self.checkValidity()});this.validity=_supportHTML5Forms?property(function(self){return self.validity}):property(function(self){var value=self.get("value");var validity={valueMissing:function(){var required=self.getAttribute("required");if(required&&required!="undefined"){return!value?true:false}else{return false}}(),typeMismatch:function(type){if(type=="url")return!/^\s*(?:(\w+?)\:\/\/([\w-_.]+(?::\d+)?))(.*?)?(?:;(.*?))?(?:\?(.*?))?(?:\#(\w*))?$/i.test(value);if(type=="tel")return!/[^\r\n]/i.test(value);if(type=="email")return!/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i.test(value);return false}(self.getAttribute("type")),patternMismatch:function(){var pattern=self.get("pattern");if(pattern){return!new RegExp("^"+pattern+"$").test(value)}else{return false}}(),tooLong:function(){var maxlength=self.get("maxlength");var n=Number(maxlength);if(n!=maxlength)return false;return value.length>n}(),customError:!!self.__customValidity,rangeUnderflow:false,rangeOverflow:false,stepMismatch:false};validity.valid=["valueMissing","typeMismatch","patternMismatch","tooLong","rangeUnderflow","rangeOverflow","stepMismatch","customError"].every(function(name){return validity[name]===false});self.__validationMessage=function(){if(validity.valid)return"";if(validity.customError)return self.__customValidity;if(validity.valueMissing)return"请填写此字段。";if(validity.typeMismatch)return"请输入一个"+self.getAttribute("type")+"。";if(validity.patternMismatch)return"请匹配要求的格式。";if(validity.tooLong)return"请将该文本减少为 "+self.get("maxlength")+" 个字符或更少（您当前使用了"+self.get("value").length+"个字符）。";if(validity.rangeUnderflow)return"值必须大于或等于"+self.getAttribute("min")+"。";if(validity.rangeOverflow)return"值必须小于或等于"+self.getAttribute("max")+"。";if(validity.stepMismatch)return"值无效。"}();self._set("validationMessage",self.__validationMessage);self._set("validity",validity);return validity});this.validationMessage=_supportHTML5Forms?property(function(self){return self.validationMessage}):property(function(self){self.get("validity");return self.__validationMessage});if(!_supportHTML5Forms){this.setCustomValidity=function(self,message){self.__customValidity=message;self.get("validity")};this.checkValidity=function(self){self.get("validity");return self.validity.valid}}this.focusToPosition=function(self,position){if(position===undefined){position=self.get("value").length}if(self.setSelectionRange){self.focus();self.setSelectionRange(self.get("value").length,position)}else if(self.createTextRange){var range=self.createTextRange();range.moveStart("character",position);range.collapse(true);range.select();self.focus()}else{self.focus()}}});this.TextBaseElement=new Class(exports.FormItemElement,function(){this.initialize=function(self){this.parent(self);if(!_supportPlaceholder){self.bindPlaceholder()}if(!_supportSelectionStart){self.addEvent("beforedeactivate",function(){self.__selectionPos=calculateSelectionPos(self)})}};this.prop_placeholder=property(function(self){return self.getAttribute("placeholder")},function(self,value){self.setAttribute("placeholder",value);if(!_supportPlaceholder){self.bindPlaceholder();if(self.get("placeholding"))self.value=value}});this.prop_placeholding=property(function(self){return self.classList.contains("placeholder")},function(self,value){if(value){self.classList.add("placeholder");self.setAttribute("autocomplete","off")}else{self.classList.remove("placeholder");self.removeAttribute("autocomplete")}});this.bindPlaceholder=function(self){if(self._binded)return;self._binded=true;function checkEmpty(event){var placeholder=self.get("placeholder");if(!placeholder)return;if(self.get("placeholding")){if(event.type=="focus"&&self.value===placeholder){self.value=""}self.set("placeholding",false)}else if(!self.value||(ua.ua.ie==6||ua.ua.ie==7)&&!event&&self.value==placeholder){self.set("placeholding",true);self.value=placeholder}}self.addNativeEvent("focus",function(event){return checkEmpty(event)});self.addNativeEvent("blur",function(event){return checkEmpty(event)});if(self.form){wrap(self.form).addNativeEvent("submit",function(){if(self.classList.contains("placeholder")){self.set("placeholding",false);self.value="";setTimeout(function(){checkEmpty()},0)}})}checkEmpty()}});this.InputElement=new Class(exports.TextBaseElement,function(){this.prop_formAction=_supportMultipleSubmit?nativeproperty():attributeproperty("");this.prop_formEnctype=_supportMultipleSubmit?nativeproperty():attributeproperty("application/x-www-form-urlencoded");this.prop_formMethod=_supportMultipleSubmit?nativeproperty():attributeproperty("get");this.prop_formNoValidate=_supportMultipleSubmit?nativeproperty():attributeproperty(false);this.prop_formTarget=_supportMultipleSubmit?nativeproperty():attributeproperty("");this.initialize=function(self){this.parent(self);if(!_supportMultipleSubmit&&self.type=="submit"){self.addNativeEvent("click",function(event){var action=self.getAttribute("formaction");if(action&&action!="undefined"){self.form.__submitButton=self}})}};this.send=function(self,data){if(self.type!="submit")return;var action=self.getAttribute("formaction"),method=self.getAttribute("formmethod");var request=self.form.createRequest({method:method||self.form.method,url:action||self.form.action,onsuccess:function(event){self.fireEvent("requestSuccess",{request:event.request})},onerror:function(event){self.fireEvent("requestError",{request:event.request})}});request.send(data);return request}});this.TextAreaElement=new Class(exports.TextBaseElement,function(){});this.Window=new Class(exports.Element,function(){this.nativeEventNames=basicNativeEventNames.concat(["load","unload","beforeunload","resize","move","DomContentLoaded","readystatechange","scroll","mousewheel","DOMMouseScroll"])});this.Document=new Class(exports.Element,function(){this.nativeEventNames=basicNativeEventNames.concat(["load","unload","beforeunload","resize","move","DomContentLoaded","readystatechange","scroll","mousewheel","DOMMouseScroll"])});this.Elements=new Class(Array,function(){this.initialize=function(self,elements,wrapper){for(var i=0;i<elements.length;i++){self.push(wrap(elements[i]))}wrapper=self[0]?getWrapper(self[0].nodeName):exports.Element;Class.keys(wrapper).forEach(function(name){if(typeof wrapper.get(name)!="function")return;self[name]=function(){var element;for(var i=0;i<self.length;i++){element=self[i];if(typeof element[name]=="function"){element[name].apply(self[i],[].slice.call(arguments,0))}}}});self.set=function(key,value){for(var i=0;i<self.length;i++){self[i].set(key,value)}};self.get=function(key){var result=[];for(var i=0;i<self.length;i++){result.push(self[i].get(key))}return result}}});var _tagMap={IMG:exports.ImageElement,FORM:exports.FormElement,INPUT:exports.InputElement,TEXTAREA:exports.TextAreaElement,OUTPUT:exports.FormItemElement,SELECT:exports.FormItemElement,OPTION:exports.FormItemElement,BUTTON:exports.FormItemElement};function getWrapper(tagName){var tag=tagName.toUpperCase();var cls=_tagMap[tag];if(cls)return cls;else return exports.Element}function getCommon(arr1,arr2){var i;for(i=0,l=arr1.length;i<l;i++){if(!arr2[i]||arr2[i]!==arr1[i]){break}}return arr1.slice(0,i)}function calculateSelectionPos(field){var range=document.selection.createRange();if(range==null||range.parentElement()!=field){return{start:-1,end:-1}}var elementRange=field.createTextRange();var duplicated=elementRange.duplicate();elementRange.moveToBookmark(range.getBookmark());duplicated.setEndPoint("EndToStart",elementRange);return{start:duplicated.text.length,end:duplicated.text.length+range.text.length}}});object.add("./net.js","dom, events",function(exports,dom,events){var ajaxProxies=window.__ajaxProxies;if(!ajaxProxies){ajaxProxies=window.__ajaxProxies={}}this.ajaxRequest=function(url,callback){if(!url||typeof url!="string"||url.trim().length==0){return}if(!callback||typeof callback!="function"){callback=function(){}}var tmpA=document.createElement("a");tmpA.href=url;var hostname=tmpA.hostname;var protocol=tmpA.protocol;if(hostname&&hostname!=location.hostname){var xhr=null;if(ajaxProxies[hostname]){(function(){if(!ajaxProxies[hostname].loaded){setTimeout(arguments.callee,100)}else{callback(ajaxProxies[hostname].contentWindow.getTransport())}})()}else{var iframe=document.createElement("iframe"),transport;iframe.style.display="none";dom.ready(function(){ajaxProxies[hostname]=iframe;iframe.loaded=false;document.body.insertBefore(iframe,document.body.firstChild);iframe.src=protocol+"//"+hostname+"/ajaxproxy.htm";dom.wrap(iframe).addEvent("load",function(){if(iframe.contentWindow.location.href!==iframe.src){iframe.contentWindow.location.href=iframe.src}else{iframe.loaded=true;try{transport=iframe.contentWindow.getTransport()}catch(e){throw new Error("message : "+e.message+" from url : "+url)}callback(transport)}})})}}else{if(window.ActiveXObject){try{callback(new ActiveXObject("Msxml2.XMLHTTP"))}catch(e){callback(new ActiveXObject("Microsoft.XMLHTTP"))}}else callback(new XMLHttpRequest)}};this.ping=function(url){var n="_net_ping_"+(new Date).getTime();var c=window[n]=new Image;c.onload=c.onerror=function(){window[n]=null};c.src=url;c=null};this.Request=new Class(function(){this.__mixins__=[events.Events];this.initialize=function(self,options){if(window._developer_no_ajax)return;options=options||{};self.url=options.url||"";self.method=options.method||"get";self.timeout=options.timeout&&options.timeout>0?options.timeout:0;self.headers=options.headers||{};self.data=options.data||null;self._xhr=null;if(self.urlMapper){self.url=self.urlMapper(self.url,self.method)||self.url}self.onSuccess=options.onSuccess;self.onsuccess=options.onsuccess;self.onerror=options.onerror;self.oncomplete=options.oncomplete};this.send=function(self,data){exports.ajaxRequest(self.url,function(xhr){var callbackCalled=false;self._xhr=xhr;var eventData={request:self};xhr.onreadystatechange=function(){var xhr=self._xhr;if(xhr.readyState===4){if(callbackCalled){return}else if(self._timer){clearTimeout(self._timer);self._timer=null}self.responseText=xhr.responseText;self.responseXML=xhr.responseXML;if(self.requestBlocker&&self.requestBlocker.block&&self.requestBlocker.block(xhr)){self.requestBlocker.handle(xhr);return}eventData.responseText=xhr.responseText;eventData.responseXML=xhr.responseXML;if(xhr.status===undefined||xhr.status===0||xhr.status>=200&&xhr.status<300){self.fireEvent("success",eventData);if(self.onSuccess)self.onSuccess(eventData)}else{self.fireEvent("error",eventData)}self.fireEvent("complete",eventData)}};var xhr=self._xhr;var url=self.url;if(!data)data=self.data;if(data&&self.method=="get"){url+=(url.indexOf("?")!=-1?"&":"?")+data;data=null}xhr.open(self.method,url,true);xhr.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var name in self.headers){xhr.setRequestHeader(name,self.headers[name])}if(!self.headers["X-Requested-With"]){xhr.setRequestHeader("X-Requested-With","XMLHttpRequest")}if(self.timeout){self._timer=setTimeout(function(){callbackCalled=true;self.abort();self.fireEvent("timeout",eventData);self.fireEvent("complete",eventData)},self.timeout)}self._xhr.send(data)})};this.abort=function(self){if(self._xhr){self._xhr.abort()}if(self._timer){clearTimeout(self._timer);self._timer=null}};this.getResponseHeader=function(self,key){return self._xhr.getResponseHeader(key)};this.setHeader=function(self,name,value){self.headers[name]=value}})});object.add("./mvc.js","events",function(exports,events){this.Action=new Class(events.Events,function(){this.initialize=function(self){events.Events.initialize(self);self.view=null};this.execute=function(self,view){self.view=view;view.load(self)}})});object.add("./urlparse.js",function(exports){var scheme_chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+-.";function splitUntil(result,url,target,remainFirst){var min=url.length;for(var i=0,len=url.length;i<len;i++){if(target.indexOf(url.charAt(i))!=-1){if(i<min){min=i;break}}}result.got=url.substring(0,min);result.remained=remainFirst?url.substring(min):url.substring(min+1);return result}function urlparse(url,default_scheme){if(typeof url!="string"){return["","","","","",""]}var scheme="",netloc="",path="",params="",query="",fragment="",i=0;i=url.indexOf(":");if(i>0){if(url.substring(0,i)=="http"){scheme=url.substring(0,i).toLowerCase();url=url.substring(i+1)}else{for(var i=0,len=url.length;i<len;i++){if(scheme_chars.indexOf(url.charAt(i))==-1){break}}scheme=url.substring(0,i);url=url.substring(i+1)}}if(!scheme&&default_scheme){scheme=default_scheme}var splited={};if(url.substring(0,2)=="//"){splitUntil(splited,url.substring(2),"/?#",true);netloc=splited.got;url=splited.remained}if(url.indexOf("#")!=-1){splitUntil(splited,url,"#");url=splited.got;fragment=splited.remained}if(url.indexOf("?")!=-1){splitUntil(splited,url,"?");url=splited.got;query=splited.remained}if(url.indexOf(";")!=-1){splitUntil(splited,url,";");path=splited.got;params=splited.remained}if(!path){path=url}return[scheme,netloc,path,params,query,fragment]}function urlunparse(parts){if(!parts){return""}var url="";if(parts[0])url+=parts[0]+"://"+parts[1];if(parts[1]&&parts[2]&&parts[2].indexOf("/")!=0)url+="/";url+=parts[2];if(parts[3])url+=";"+parts[3];if(parts[4])url+="?"+parts[4];if(parts[5])url+="#"+parts[5];return url}function urljoin(base,url){if(!base){return url}if(!url){return base}url=String(url);base=String(base);var bparts=urlparse(base);var parts=urlparse(url,bparts[0]);if(parts[0]!=bparts[0]){return url}if(parts[1]){return urlunparse(parts)}parts[1]=bparts[1];if(parts[2].charAt(0)=="/"){return urlunparse(parts)}if(!parts[2]&&!parts[3]){parts[2]=bparts[2];parts[3]=bparts[3];if(!parts[4]){parts[4]=bparts[4]}return urlunparse(parts)}var segments=bparts[2].split("/").slice(0,-1).concat(parts[2].split("/"));if(segments[segments.length-1]=="."){segments[segments.length-1]=""}for(var i=0,l=segments.length;i<l;i++){if(segments[i]=="."){segments.splice(i,1);i--}}var i;while(true){i=1;n=segments.length-1;while(i<n){if(segments[i]==".."&&["",".."].indexOf(segments[i-1])==-1){segments.splice(i-1,2);break}i++}if(i>=n){break}}if(segments.length==2&&segments[0]==""&&segments[1]==".."){segments[segments.length-1]=""}else if(segments.length>=2&&segments[segments.length-1]==".."){segments.pop();segments.pop();segments.push("")}parts[2]=segments.join("/");return urlunparse(parts)}exports.urlparse=urlparse;exports.urlunparse=urlunparse;exports.urljoin=urljoin});object.add("./validator.js",function(exports){this.isUrl=function(text){return/^(?:(\w+?)\:\/\/([\w-_.]+(?::\d+)?))(.*?)?(?:;(.*?))?(?:\?(.*?))?(?:\#(\w*))?$/i.test(text)};this.isEmail=function(text){return/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/i.test(text)};this.isIP=function(text){return/^(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5])$/.i.test(text)}});if(object.addPath)object.addPath("http://a.xnimg.cn/");object.add("ua/extra.js","sys",function(exports,sys){var uamodule=sys.modules["ua"];if(uamodule){this.__detectUAExtra=detectUAExtra;var o=detectUAExtra();object.extend(uamodule.ua,o)}function detectUAExtra(ua){if(!ua&&typeof ua!="string"){ua=navigator.userAgent}var m,shell,o={},numberify=uamodule.numberify;var getExternal=function(key){try{return window.external[key]}catch(e){return null}};if(m=ua.match(/360SE/)||getExternal("twGetRunPath")&&window.external.twGetRunPath().indexOf("360se.exe")!=-1){o[shell="se360"]=3}else if(m=ua.match(/Maxthon|MAXTHON/)||getExternal("max_version")){shell="maxthon";try{o[shell]=numberify(window.external["max_version"])}catch(ex){o[shell]=0}}else if(m=ua.match(/TencentTraveler\s([\d\.]*)/)){o[shell="tt"]=m[1]?numberify(m[1]):0}else if(m=ua.match(/TheWorld/)){o[shell="theworld"]=3}else if(m=ua.match(/SE\s([\d\.]*)/)){o[shell="sogou"]=m[1]?numberify(m[1]):0}else if(m=ua.match(/QQBrowser.([\d\.]*)/)){o[shell="qqbrowser"]=m[1]?numberify(m[1]):0}shell&&(o.shell=shell);return o}});object.add("ua/os.js","sys",function(exports,sys){var uamodule=sys.modules["ua"];var numberify=function(s){var c=0;return parseFloat(s.replace(/_/g,".").replace(/\./g,function(){return c++===0?".":""}))};if(uamodule){this._detectOS=detectOS;var o=detectOS(navigator.userAgent.toLowerCase());object.extend(exports,o)}function is(obj,type){type=type.replace(/\b[a-z]/g,function(match){return match.toUpperCase()});return Object.prototype.toString.call(obj)=="[object "+type+"]"}function assertTrue(bool,msg){if(!bool){throw new Error(msg)}}function assertNotNull(obj,msg){if(obj==null){throw new Error(msg)}}function detectOS(ua){ua=ua||navigator.userAgent;ua=ua.toLowerCase();var osDetecters=[{core:"windowsnt",match:function(ua){return/windows\snt/.test(ua)&&!/xblwp7/.test(ua)},versionRule:/windows nt\s([\.\d]*)/},{core:"windowsnt",match:/windows\sxp/,version:5.1},{core:"windowsnt",match:/windows\s2000/,version:5},{core:"windowsnt",match:/winnt/,version:4},{core:"windows",match:/windows me/,version:"me"},{core:"windows",match:/windows 98|win98/,version:"98"},{core:"windows",match:/windows 95|win95/,version:"95"},{core:"windows",match:/win16/,version:"3.1"},{core:"windows/phone",match:/windows\sphone/,versionRule:/windows phone os ([\d\.]*)/},{core:"windows/phone",match:/xblwp7/,version:7},{core:"windows/mobile",match:/windows mobile|wce|windows ce|pocket pc|wince/,versionRule:/iemobile ([\.\d]*)/},{core:"windows",match:/win/,version:"unknown"},{core:"android",match:/\sandroid/,versionRule:/android ([^\s]*);/},{core:"linux/debian",match:/debian/,versionRule:/debian[\s\/-]([\.\d]*)/},{core:"linux/redhat",match:/red\shat/,versionRule:/red hat[\s\/-]([\.\d]*)/},{core:"linux/fedora",match:/fedora/,versionRule:/fedora[\s\/-]([\.\d]*)/},{core:"linux/ubuntu",match:/ubuntu/,versionRule:/ubuntu[\s\/-]([\.\d]*)/},{core:"linux/suse",match:/suse/,versionRule:/suse[\s\/-]([\.\d]*)/},{core:"linux/mint",match:/mint/,versionRule:/mint[\s\/-]([\.\d]*)/},{core:"linux/centos",match:/centos/,versionRule:/centos[\s\/-]([\.\d]*)/},{core:"linux/gentoo",match:/gentoo/,version:"unknown"},{core:"linux",match:/linux/,version:"unknown"},{core:"chromeos",match:/cros/,version:"unknown"},{core:"unix/sunos",match:/sunos/,version:"unknown"},{core:"unix/freebsd",match:/freebsd/,version:"unknown"},{core:"unix/openbsd",match:/openbsd/,version:"unknown"},{core:"unix/aix",match:/aix/,version:"unknown"},{core:"unix/hp_ux",match:/hp-ux/,version:"unknown"},{core:"unix",match:/x11/,version:"unknown"},{core:"macos",match:/mac_powerpc|ppc/,version:"ppc"},{core:"macos",match:/intel/,version:"intel"},{core:"macos",match:/mac_68000|68k/,version:"68k"},{core:"ios",match:function(ua){return/applewebkit/.test(ua)&&/ mobile\//.test(ua)&&/like/.test(ua)
},versionRule:/os ([\_\.\d]*)/},{core:"macos",match:/mac/,version:"unknown"},{core:"os2",match:function(ua){return/os\/2|ibm-webexplorer/.test(ua)||navigator.appVersion.indexOf("os/2")!=-1},version:"unknown"},{core:"symbian",match:/symbian|s60|symbos|symbianos|series40|series60|nokian/,versionRule:/symbian(?:os)?\/([\d\.]*);/},{core:"blackberry",match:/blackberry|rim\stablet\sos/,versionRule:/(?:version\/|blackberry[\d]{4}\/)([\d\.]*)/},{core:"webos",match:/webos/,versionRule:/webos\/([^\s]*);/},{core:"palmos",match:/palmos/,version:"unknown"}];var o={};for(var i=0,l=osDetecters.length,current,matchFlag=false;i<l;i++){current=osDetecters[i];var match=current.match;assertTrue(is(match,"RegExp")||is(match,"Function"),"match rule should be regexp or function");if(is(match,"RegExp")){matchFlag=match.test(ua)}else if(is(match,"Function")){matchFlag=match(ua);assertNotNull(matchFlag,"match function must return true/false")}if(!matchFlag){continue}var parent=null,packages=current.core.split("/"),pLength=packages.length;if(pLength>1){o.oscore=packages[0];parent=o;for(var m=0;m<pLength-1;m++){parent=parent[packages[m]]={}}}else{o.oscore=current.core}var version=current.version||"unknown";if(current.versionRule){assertTrue(is(current.versionRule,"RegExp"),"version rule should be regexp");m=ua.match(current.versionRule);if(m&&m[1])version=numberify(m[1])}if(parent){parent[packages[pLength-1]]=version}else{o[o.oscore]=version}break}if(o.ios){m=ua.match(/ipad|ipod|iphone/);if(m&&m[0]){o[m[0]]=o.ios}}if(navigator&&navigator.cajaVersion){o.caja=navigator.cajaVersion}if(!matchFlag){o.oscore="unknown"}if(/wow64|x64|win64|ia64|x86_64|amd64|sparc64|ppc64/.test(ua)){o.processor=64}else{o.processor=32}if(window.devicePixelRatio>=2){o.resolution={width:screen.width*window.devicePixelRatio,height:screen.height*window.devicePixelRatio}}else{o.resolution={width:screen.width,height:screen.height}}var supportOrientation=typeof window.orientation!="undefined"?true:false;if(supportOrientation){if(window.innerWidth!=undefined){o.orientation=window.innerWidth>window.innerHeight?"landscape":"profile"}else{o.orientation=window.screen.width>window.screen.height?"landscape":"profile"}}else{o.orientation="unknown"}return o}});object.add("ua/flashdetect.js",function(exports){this.getFlashVersion=function(){var _ver=false;if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_ver=x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".")[0]}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _tempVer=3;while(axo){try{_tempVer++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_tempVer);_ver=_tempVer}catch(e){axo=null}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7")}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_ver=6;axo.AllowScriptAccess="always"}catch(e){if(_ver==6){return _ver}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash")}catch(e){}}if(axo!=null){_ver=axo.GetVariable("$version").split(" ")[1].split(",")[0]}}}return _ver}});object.define("xn.net","sys, net",function(require,exports){var sys=require("sys");var net=require("net");var oldSend=net.Request.prototype.send;net.Request.set("send",function(self,data){data=data||self.data||"";if(self.method=="post"&&XN.get_check&&!/[\?|\&]requestToken=/.test(data)){data+=(data?"&":"")+"requestToken="+XN.get_check}if(self.method=="post"&&XN.get_check_x&&!/[\?|\&]_rtk=/.test(data)){data+=(data?"&":"")+"_rtk="+XN.get_check_x}oldSend.call(self,data)});this.Request=net.Request});object.define("jxn","dom, string, net, xn.net, ua",function(require,exports){require("xn.net");var toString=Object.prototype.toString,slice=Array.prototype.slice,dom=require("dom"),net=require("net"),ua=require("ua"),string=require("string"),htmlStrReg=/^<[\w\W]+>/,htmlTagReg=/^<([\w]+)>$/,emptyFunc=function(){},consoleClean=false,JxnNodesWrapper=function(){},cons=typeof console!="undefined"?console:{log:emptyFunc,error:emptyFunc,warn:emptyFunc},jxn=function(selector,parent){var node,nodes=null,result,realNodes,i,l,msg;if(jxn.isJxnNode(selector)){return selector}if(jxn.isString(selector)){selector=jxn.trim(selector);if(jxn.isHTMLTag(selector)){node=document.createElement(RegExp.$1);nodes=[node]}else if(jxn.isHTMLString(selector)){nodes=dom.getDom(selector).childNodes;realNodes=[];for(i=0,l=nodes.length;i<l;i++){if(jxn.isDomNode(nodes[i])){realNodes[realNodes.length]=nodes[i]}}nodes=realNodes}else{if(selector.toLowerCase()=="body"||selector.toLowerCase()=="html"){nodes=Sizzle(selector)}else{parent=parent||document.body;if(jxn.isJxnNode(parent)){parent=parent[0]}nodes=Sizzle(selector,parent)}}}else if(jxn.isFunction(selector)){dom.ready(selector);return}else if(jxn.isAcceptableElement(selector)){nodes=[selector]}else if(jxn.isArray(selector)){nodes=selector;for(i=0,l=nodes.length;i<l;i++){if(!jxn.isAcceptableElement(nodes[i])){msg="array elements should be all dom nodes";if(nodes[i].nodeType==3){msg+=", text node(nodeType = 3) is not acceptable"}jxn.error(msg);return}}}result=new JxnNodesWrapper;var len=nodes?nodes.length:0;result.length=len;for(i=0;i<len;i++){result[i]=nodes[i]}return result};jxn.extend=function(dest,src){if(typeof src==="undefined"){src=dest;dest=jxn}var prop;for(prop in src){if(src.hasOwnProperty(prop)){dest[prop]=src[prop]}}};jxn.extend({errors:[],warns:[],logs:[],consoleClean:function(flag){consoleClean=flag},resetLogs:function(){jxn.errors.length=0;jxn.warns.length=0;jxn.logs.length=0},error:function(){var msg=slice.call(arguments);jxn.errors.push(msg.join(","));!consoleClean&&cons.error(msg)},log:function(){var msg=slice.call(arguments);jxn.logs.push(msg.join(","));!consoleClean&&cons.log(msg)},warn:function(){var msg=slice.call(arguments);jxn.warns.push(msg.join(","));!consoleClean&&cons.warn(msg)},slice:slice,isInDomTree:function(element){return!!dom.wrap(element).getParent("body")},isDomNode:function(obj){return obj&&obj.nodeType==1},isAcceptableElement:function(obj){return obj&&(obj.nodeType==1||obj.nodeType==9||obj==window)},isFunction:function(obj){return toString.call(obj)=="[object Function]"},isUndefined:function(obj){return typeof obj==="undefined"},isObject:function(obj){return obj&&toString.call(obj)=="[object Object]"},isArray:function(obj){return toString.call(obj)=="[object Array]"},isString:function(obj){return typeof obj=="string"},isRegExp:function(obj){return toString.call(obj)=="[object RegExp]"},isBoolean:function(obj){return obj&&toString.call(obj)=="[object Boolean]"},isNumber:function(obj){return typeof obj=="number"},trim:function(str){if(!str){return str}return str.replace(/^\s+|\s+$/g,"")},isHTMLString:function(obj){return jxn.isString(obj)&&htmlStrReg.test(obj)},isHTMLTag:function(obj){return jxn.isString(obj)&&htmlTagReg.test(obj)},isDocument:function(obj){return obj&&obj.nodeType===9},isWindow:function(node){return node&&typeof node==="object"&&"setInterval"in node&&jxn.isDocument(node.document)},getNumber:function(str){return parseFloat(str,10)},getWindow:function(node){return jxn.isWindow(node)?node:node.nodeType===9?node.defaultView||node.parentWindow:false},isJxnNode:function(node){return node&&node.constructor==JxnNodesWrapper},forEach:function(obj,fun){var i,l,prop;if(jxn.isArray(obj)){for(i=0,l=obj.length;i<l;i++){fun.call(obj,obj[i],i)}}else if(jxn.isObject(obj)){for(prop in obj){if(!obj.hasOwnProperty(prop)){continue}fun.call(obj,prop,obj[prop])}}},registerPlugin:function(name,plugin,addToJxn){var i,current,l;JxnNodesWrapper._plugins=JxnNodesWrapper._plugins||{};if(JxnNodesWrapper._plugins[name]){jxn.error("plugin "+name+" already exists!");return}JxnNodesWrapper._plugins[name]=plugin;jxn._extendAsPlugin(JxnNodesWrapper.prototype,plugin,name);if(jxn.isArray(addToJxn)){for(i=0,l=addToJxn.length;i<l;i++){current=addToJxn[i];if(!jxn.isString(current)){jxn.error(current+" is not string");continue}if(jxn[current]){jxn.error(current+" exists in jxn");continue}jxn[current]=plugin[current]}}},_extendAsPlugin:function(dest,src,name){for(var prop in src){if(!src.hasOwnProperty(prop)){continue}pluginProp=src[prop];if(jxn.isFunction(pluginProp)){jxn._appendFnToDest(dest,prop,pluginProp,name)}else{dest[prop]=src[prop]}}},_appendFnToDest:function(dest,prop,pluginProp,name){if(prop in dest){jxn.warn(prop,name,dest[prop].__by,"重复设置")}dest[prop]=function(){var i,l,params,value,nodes=this,node,values=[],returnsValue=false;l=nodes.length;if(l==0){if(prop.indexOf("has")===0||prop.indexOf("is")===0){return false}else if(prop.indexOf("get")===0||prop.indexOf("attr")===0){return undefined}}for(i=0;i<l;i++){node=nodes[i];params=slice.call(arguments);params.unshift(node);value=pluginProp.apply(this,params);values[values.length]=value;if(value!==undefined){returnsValue=true}}if(returnsValue){return values[0]}return this};dest[prop].__name=prop;dest[prop].__by=name},tagName:function(element){if(!element||!element.tagName){return""}var tagName=element.tagName;return tagName.toLowerCase()}});if(!ua.ua.ie){JxnNodesWrapper.prototype=new Array;JxnNodesWrapper.prototype.constructor=JxnNodesWrapper}else{jxn.forEach(["concat","indexOf","join","lastIndexOf","pop","push","reverse","shift","slice","sort","splice","unshift","valueOf","forEach","some","every","map","filter"],function(value){JxnNodesWrapper.prototype[value]=Array.prototype[value]})}jxn.extend(JxnNodesWrapper.prototype,{each:function(func){var i,l=this.length;for(i=0;i<l;i++){func.call(this[i],this[i])}return this},toArray:function(){return slice.call(this)},node:function(index){return jxn(this[index])},index:function(node){if(!node){if(!this[0]){return-1}return this.prevAll().length}if(jxn.isJxnNode(node)){node=node[0]}var i,l=this.length;for(i=0;i<l;i++){if(node==this[i]){return i}}return-1},eq:function(index){if(index==-1){return this.node(this.length-1)}return this.node(index)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)}});(function(jxn,undefined){var eventsMap={},returnFalse=function(event){if(event.preventDefault){event.preventDefault()}else{event.returnValue=false}return false},globalEvents=["error","unload","scroll","resize"],domNodeEvents=["blur","change","click","dblclick","focus","select","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseout","mouseover","mouseup"];var Events={load:function(element,eventHandler,bubble){if(jxn.isWindow(element)){dom.wrap(element).addEvent("load",eventHandler,bubble)}else{jxn.loadFile.apply(element,arguments)}},delegate:function(element,subNodeSelector,eventType,eventHandler,bubble){jxn.forEach(eventType.split(" "),function(type){dom.wrap(element).delegate(subNodeSelector,type,eventHandler,bubble)})},undelegate:function(element,subNodeSelector,eventType,eventHandler,bubble){jxn.forEach(eventType.split(" "),function(type){dom.wrap(element).undelegate(subNodeSelector,type,eventHandler,bubble)})},trigger:function(element,eventType,data){dom.wrap(element).fireEvent(eventType,data)},bind:function(element,eventType,eventHandler,bubble){if(jxn.isObject(eventType)){for(var prop in eventType){dom.wrap(element).addEvent(prop,eventType[prop],bubble)}return}var types=eventType.split(" ");for(var i=0,l=types.length;i<l;i++){dom.wrap(element).addEvent(types[i],eventHandler,bubble)}},unbind:function(element,eventType,eventHandler,bubble){if(jxn.isObject(eventType)){for(var prop in eventType){dom.wrap(element).removeEvent(prop,eventType[prop],bubble)}return}var types=eventType.split(" ");for(var i=0,l=types.length;i<l;i++){dom.wrap(element).removeEvent(types[i],eventHandler,bubble)}},on:function(element,eventType,eventHandler,bubble){var specialHandled=false;jxn.forEach(jxn._specialEvents,function(special){if(special.likes(eventType)){specialHandled=true;special.on(element,eventType,eventHandler,bubble)}});if(specialHandled){return}dom.wrap(element).addEvent(eventType,eventHandler,bubble)},off:function(element,eventType,eventHandler,bubble){var specialHandled=false;jxn.forEach(jxn._specialEvents,function(special){if(special.likes(eventType)){specialHandled=true;special.off(element,eventType,eventHandler,bubble)}});if(specialHandled){return}dom.wrap(element).removeEvent(eventType,eventsMap[eventHandler]||eventHandler,bubble);if(eventsMap[eventHandler]){eventsMap[eventHandler]=null;delete eventsMap[eventHandler]}},one:function(element,eventType,eventHandler,bubble){function realHandler(){eventHandler.apply(this,arguments);dom.wrap(element).removeEvent(eventType,realHandler,bubble);eventsMap[eventHandler]=null;delete eventsMap[eventHandler]}eventsMap[eventHandler]=realHandler;dom.wrap(element).addEvent(eventType,realHandler,bubble)},hover:function(element,inHandler,outHandler){if(!inHandler){return}dom.wrap(element).addEvent("mouseenter",inHandler);dom.wrap(element).addEvent("mouseleave",outHandler||inHandler)},ready:function(element,eventHandler){if(element!=document){jxn.error("ready should be called for jxn(document)");return}dom.ready(eventHandler)},submit:function(element,eventHandler){if(!element||!element.tagName){jxn.error("element should have tagName");return}var tagName=element.tagName.toLowerCase();if(tagName!="form"&&tagName!="input"){jxn.error("submit event, element should be form or input");return}if(tagName=="input"&&element.type!="submit"){jxn.error("submit event, type of input should be submit")}if(eventHandler===false){eventHandler=returnFalse}dom.wrap(element).addEvent("submit",eventHandler)},toggle:function(element){var handlers=jxn.slice.call(arguments);if(handlers.length==1){if(jxn.css(element,"display")=="none"){jxn.show(element)}else{jxn.hide(element)}return}handlers.shift();handlers.currentIndex=0;var handlerLength=handlers.length;if(handlerLength<=1){jxn.error("two event handlers for toggle at least");return}dom.wrap(element).addEvent("click",function(){var index=handlers.currentIndex;handlers[index].apply(this,arguments);index=index+1;if(index==handlerLength){index=0}handlers.currentIndex=index})}};function addEventToNode(eventType,shouldBeGlobal){Events[eventType]=function(element,eventHandler,bubble){if(shouldBeGlobal&&!jxn.isWindow(element)){jxn.error(eventType+" caller should be window");return}if(eventHandler){dom.wrap(element).addEvent(eventType,eventHandler,bubble)}else{dom.wrap(element)[eventType]()}}}for(var i=0,eventType,l=globalEvents.length;i<l;i++){eventType=globalEvents[i];addEventToNode(eventType,true)}for(var i=0,eventType,l=domNodeEvents.length;i<l;i++){eventType=domNodeEvents[i];addEventToNode(eventType)}jxn.registerPlugin("Events",Events,["on"])})(jxn);(function(jxn,undefined){var supportTableInnerHTML=function(){var table=document.createElement("table"),flag;try{table.innerHTML="<tbody><tr><td>1</td></tr></tbody>"}catch(e){return false}flag=table.getElementsByTagName("td").length!=0;table.innerHTML="";table=null;return flag}(),supportSelectInnerHTML=function(){var select=document.createElement("select"),flag;try{select.innerHTML="<option>1</option>"}catch(e){return false}flag=select.getElementsByTagName("option").length!=0;select.innerHTML="";select=null;return flag}(),regTr=/^\s*<\s*tr\s*>/;function storeAsPrevNode(node,prev){if(node){node._prevJxnNode=prev}return node}function getPrevNode(current){var prev=current._prevJxnNode;if(prev){current._prevJxnNode=null}return prev}function getTableDom(str){var tmp=document.createElement("div");tmp.innerHTML="<table><tbody>"+str+"</tbody></table>";var res=tmp.getElementsByTagName("tr");return res}function handleTableInnerHTML(element,html,tagName){if(tagName=="table"){element.appendChild(document.createElement("tbody"))}else{element=element.parentNode}var tmp=document.createElement("div");tmp.innerHTML="<table><tbody>"+html+"</tbody></table>";element.replaceChild(tmp.firstChild.firstChild,element.tBodies[0]);tmp.removeChild(tmp.firstChild);tmp=null}function handleSelectInnerHTML(element,html,tagName){var tmp=document.createElement("div"),select,selectedIndex=element.selectedIndex,first;if(selectedIndex==-1){selectedIndex=0}tmp.innerHTML="<select>"+html+"</select>";select=tmp.firstChild;while(first=select.firstChild){element.appendChild(first)}tmp.removeChild(select);tmp=null;element.selectedIndex=selectedIndex}var Dom={show:function(element){dom.wrap(element).show()},hide:function(element){dom.wrap(element).hide()},after:function(element,content){element=dom.wrap(element);var node=content;if(jxn.isString(content)){node=jxn(content)[0]}else if(jxn.isFunction(content)){content=content.call(element,null);if(!content){return}jxn(element).after(content);return}else if(jxn.isJxnNode(content)){content.each(function(node){jxn.after(element,node)})}if(jxn.isDomNode(node)){dom.wrap(element).grab(node,"after")}},insertBefore:function(element,target){jxn(target).before(element)},append:function(element,html){if(!jxn.isAcceptableElement(element)){return}if(jxn.isJxnNode(html)){html.each(function(node){element.appendChild(node)});return}var tableFlag=false;if(jxn.isString(html)){if(regTr.test(html)){tableFlag=true;html=getTableDom(html)}else{html=dom.getDom(html)}}if(!tableFlag){element.appendChild(html);return}var tagName=jxn.tagName(element),root=tagName=="table"?element.getElementsByTagName("tbody")[0]||element.tBodies[0]:element,trs=html.length;for(var i=0;i<trs;i++){root.appendChild(html[i])}},appendTo:function(element,target){if(target==="body"){target=document.body}else if(target==="head"){target=document.head||document.getElementsByTagName("head")[0]||document.documentElement}if(!jxn.isAcceptableElement(element)){return}if(jxn.isString(target)){target=Sizzle(target)}else if(!jxn.isArray(target)&&!jxn.isJxnNode(target)){target=[target]}var isDomNode=jxn.isInDomTree(element);for(var i=0,current,l=target.length;i<l;i++){current=target[i];current.appendChild(element);if(!isDomNode){element=element.cloneNode(true)}}},before:function(element,content){element=dom.wrap(element);var node=content;if(jxn.isString(content)){node=jxn(content)[0]}else if(jxn.isFunction(content)){content=content.call(element,null);if(!content){return}jxn.before(element,content);return}else if(jxn.isJxnNode(content)){content.each(function(node){jxn.before(element,node)})}if(jxn.isDomNode(node)){dom.wrap(element).grab(node,"before")}},clone:function(element){return element.cloneNode(true)},detach:function(){},empty:function(element){if(!element){return}if(element.nodeType===1){var subNodes=element.getElementsByTagName("*");for(var i=0,current,l=subNodes.length;i<l;i++){current=subNodes[i];try{if(current.clearAttributes){current.clearAttributes()}else{for(var p in node)delete node[p]}}catch(e){}}}while(element.firstChild){element.removeChild(element.firstChild)}},prepend:function(element,html){if(!jxn.isAcceptableElement(element)){return}if(jxn.isJxnNode(html)){html.each(function(node){element.insertBefore(node,element.firstChild)})}else{if(jxn.isString(html)){html=dom.getDom(html)}element.insertBefore(html,element.firstChild)}},prependTo:function(element,target){if(!jxn.isAcceptableElement(element)){return}if(jxn.isString(target)){target=Sizzle(target)}else if(!jxn.isArray(target)&&!jxn.isJxnNode(target)){target=[target]}var isDomNode=jxn.isInDomTree(element);for(var i=0,parent,l=target.length;i<l;i++){parent=target[i];if(parent.firstChild){parent.insertBefore(element,parent.firstChild)}else{parent.appendChild(element)}if(!isDomNode){element=element.cloneNode(true)}}},remove:function(element){dom.wrap(element).dispose()},replaceAll:function(element,target){if(!jxn.isAcceptableElement(element)){return}if(jxn.isString(target)){target=Sizzle(target)}else if(!jxn.isArray(target)&&!jxn.isJxnNode(target)){target=[target]}var isDomNode=jxn.isInDomTree(element);for(var i=0,l=target.length;i<l;i++){target[i].parentNode.replaceChild(element,target[i]);if(!isDomNode){element=element.cloneNode(true)}}},replaceWith:function(element,html){if(jxn.isString(html)){html=dom.getDom(html)}element.parentNode.replaceChild(html,element)},text:function(element,text){if(text&&jxn.isString(text)){dom.wrap(element).setContent(text)}else{return Sizzle.getText([element])}},val:function(element,text){if(!jxn.isUndefined(text)){element.value=text}else{return element.value}},wrap:function(element,html){if(jxn.isFunction(html)){html=html.call(element,null)}var parent=element.parentNode,newNode=dom.getDom(jxn.trim(html)),child=newNode.firstChild;parent.insertBefore(newNode,element);child.appendChild(element)},unwrap:function(element){var parent=element.parentNode;if(parent==document.body){return}var realParent=parent.parentNode;var children=dom.wrap(parent).getChildren();for(var i=0,l=children.length;i<l;i++){realParent.insertBefore(children[i],parent)}realParent.removeChild(parent)},wrapAll:function(){alert("not implemented")},wrapInner:function(){alert("not implemented")},html:function(element,html){if(jxn.isUndefined(html)){return element.innerHTML}var tagName=jxn.tagName(element);jxn.empty(element);if(!supportTableInnerHTML&&/table|tbody/.test(tagName)){handleTableInnerHTML(element,html,tagName);return}if(!supportSelectInnerHTML&&/select/.test(tagName)){handleSelectInnerHTML(element,html,tagName);return}try{dom.wrap(element).setContent(html)}catch(e){jxn.error(tagName+" can not set innerHTML")}},prev:function(element,selector){selector=selector||"*";return storeAsPrevNode(jxn(dom.wrap(element).getPrevious(selector)),this)},prevAll:function(element,selector){selector=selector||"*";return storeAsPrevNode(jxn(dom.wrap(element).getAllPrevious(selector)),this)},next:function(element,selector){selector=selector||"*";return storeAsPrevNode(jxn(dom.wrap(element).getNext(selector)),this)},nextAll:function(element,selector){selector=selector||"*";return storeAsPrevNode(jxn(dom.wrap(element).getAllNext(selector)),this)},parent:function(element,selector){return storeAsPrevNode(jxn(dom.wrap(element).getParent(selector)),this)},parents:function(element,selector){return storeAsPrevNode(jxn(dom.wrap(element).getParents(selector)),this)},siblings:function(element,selector){selector=selector||"*";return storeAsPrevNode(jxn(dom.wrap(element).getSiblings(selector)),this)},firstChild:function(element,selector){selector=selector||"*";return storeAsPrevNode(jxn(dom.wrap(element).getFirst(selector)),this)},lastChild:function(element,selector){selector=selector||"*";return storeAsPrevNode(jxn(dom.wrap(element).getLast(selector)),this)},children:function(element,selector){selector=selector||"*";return storeAsPrevNode(jxn(dom.wrap(element).getChildren(selector)),this)},find:function(element,selector){return storeAsPrevNode(jxn(selector,element),this)},end:function(element){return getPrevNode(this)}};jxn.registerPlugin("Dom",Dom,["html","empty","before","after","show","hide"])})(jxn);(function(jxn,undefined){var numReg=/^-?\d+(?:px)?$/i;var hacks={width:function(value){if(numReg.test(value)){value=parseFloat(value);if(value>=0){value=value+"px"}}return value}};hacks.width=hacks.height=hacks.top=hacks.left;var Css={addClass:function(element,cls){dom.wrap(element).addClass(cls)},removeClass:function(element,name){if(name===undefined){var names=jxn.trim(dom.wrap(element).className);if(names==""){return}names=names.split(" ");jxn.forEach(names,function(name){name=jxn.trim(name);if(name!=""){dom.wrap(element).removeClass(name)}})}else{dom.wrap(element).removeClass(name)}},toggleClass:function(element,className){dom.wrap(element).toggleClass(className)},hasClass:function(element,name){return dom.wrap(element).hasClass(name)},css:function(element,name,value){if(!jxn.isAcceptableElement(element)){jxn("css() should be called by dom node");return}element=dom.wrap(element);if(jxn.isObject(name)){jxn.forEach(name,function(prop,value){prop=string.camelCase(prop);value=hacks[prop]?hacks[prop](value):value;element.setStyle(prop,value)})}else if(value!==undefined){name=string.camelCase(name);value=hacks[name]?hacks[name](value):value;element.setStyle(string.camelCase(name),value)}else if(name){if(name.indexOf(":")!=-1){element.style.cssText+=";"+name}else{if((name=="width"||name=="height")&&element.offsetWidth===0){var props={position:"absolute",visibility:"hidden",display:"block"},origins={position:element.getStyle("position"),visibility:element.getStyle("visibility"),display:element.getStyle("display")},value;for(var prop in props){element.setStyle(prop,props[prop])}value=element.getStyle(string.camelCase(name));for(var prop in origins){element.setStyle(prop,origins[prop])}return value}return element.getStyle(string.camelCase(name))}}else{return element.style.cssText}}};jxn.registerPlugin("Css",Css,["css"])})(jxn);(function(jxn,undefined){var Ajax={ajaxComplete:function(element,callback){},ajaxSuccess:function(element,callback){},ajaxStop:function(element,callback){},ajaxStart:function(element,callback){},ajaxSend:function(element,callback){},ajaxError:function(element,callback){},loadFile:function(element,url,data,callback){if(jxn.isFunction(data)){callback=data;data=undefined}var realCallback=function(content){jxn.html(element,content||"");callback&&callback.call(element,content)};jxn.get(url,data,realCallback)},serialize:function(element){if(!jxn.isDomNode(element)){jxn.error("serialize should be called by form element");return""}var tagName=element.tagName.toLowerCase();if(tagName!="form"){jxn.error("serialize should be called by form tag, not "+tagName);return""}return dom.wrap(element).toQueryString()},serializeArray:function(element){}};function assertStyleOnload(style,callback){if(style.attachEvent){style.attachEvent("onload",function(){callback.call(this,style)})}else{setTimeout(function(){var handler=arguments.callee;if(callback.isCalled){return}var isLoaded=false;if(ua.ua.webkit){if(style["sheet"]){isLoaded=true}}else if(style["sheet"]){try{if(style["sheet"].cssRules){isLoaded=true}}catch(e){if(e.code===1e3||e.code==18){isLoaded=true}}}if(isLoaded){setTimeout(function(){callback.call(style,style)},1)}else{setTimeout(handler,1)}},0)}}function handleStyleAjaxRequest(url,callback){var style,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;var style=document.createElement("link");style.rel="stylesheet";style.type="text/css";style.href=url;head.appendChild(style);if(!callback){return style}assertStyleOnload(style,callback);return style}function handleScriptAjaxRequest(url,callback){var script,head=document.head||document.getElementsByTagName("head")[0]||document.documentElement;script=document.createElement("script");script.async="async";script.src=url;script.onload=script.onreadystatechange=function(){if(!script.readyState||/loaded|complete/.test(script.readyState)){script.onload=script.onreadystatechange=null;if(head&&script.parentNode){jxn.empty(script);head.removeChild(script)}script=undefined;callback&&callback.call(this)}};head.insertBefore(script,head.firstChild)}var accepts={xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript"};jxn.extend(jxn,{ajax:function(url,options){if(jxn.isObject(url)){options=url;url=options.url}var dataType=options.dataType;options=options||{};if(dataType=="script"){handleScriptAjaxRequest(url,options.success||options.onsuccess||options.onSuccess);return}var headers={};if(options.ifModified){headers["If-Modified-Since"]=parseInt(options.ifModified)}if(options.ContentType){headers["Content-Type"]=options.ContentType}if(options.cache){headers["Cache-Control"]=options.cache||"no-cache"}if(dataType){if(accepts[dataType]){headers["Accept"]=accepts[dataType]+", */*;q=0.01"}else if(dataType=="*"){headers["Accept"]="*/*"}}var data=jxn.isString(options.data)?options.data:string.toQueryString(options.data);var method=options.method||options.type||"get";var request=new net.Request({url:url||options.url,data:method=="post"?"":data,dataType:options.dataType,method:method,timeout:options.timeout,headers:headers,onsuccess:options.success||options.onsuccess||options.onSuccess,onerror:options.error||options.onerror||options.onError,oncomplete:options.complete||options.oncomplete||options.onComplete});request.send(method=="post"?data:"");return request},ajaxSetup:function(){},get:function(url,data,callback,type){if(jxn.isFunction(data)){type=type||callback;callback=data;data=undefined}var oldCallback=callback;if(type=="json"){callback=function(e){oldCallback&&oldCallback.call(this,JSON.parse(e.responseText||""))}}else{callback=function(e){oldCallback&&oldCallback.call(this,e&&e.responseText)}}return jxn.ajax({method:"get",url:url,data:data,success:callback,dataType:type})},getJSON:function(url,data,callback){return jxn.get(url,data,callback,"json")},getScript:function(urls,callback){if(jxn.isString(urls)){return jxn.get(urls,undefined,callback,"script")}if(!jxn.isArray(urls)){return}var len=urls.length,counter=0,realCallback=function(){counter++;if(counter==len){callback&&callback.call(this)}};jxn.forEach(urls,function(url){jxn.getScript(url,realCallback)})},getCSS:function(urls,callback){if(jxn.isString(urls)){return handleStyleAjaxRequest(urls,callback)}if(!jxn.isArray(urls)){return}var len=urls.length,counter=0,nodes=[],realCallback=function(){counter++;if(counter==len){callback&&callback.call(this,nodes)}};jxn.forEach(urls,function(url){nodes.push(jxn.getCSS(url,realCallback))})},post:function(url,data,callback,type){if(jxn.isFunction(data)){type=type||callback;callback=data;data=undefined}return jxn.ajax({method:"post",url:url,data:data,success:callback,dataType:type})},param:function(){}});jxn.registerPlugin("Ajax",Ajax,["loadFile"])})(jxn);(function(jxn,undefined){var Tween={linear:function(t,b,c,d){return c*t/d+b},easeIn:function(t,b,c,d){return c*(t/=d)*t+b},easeOut:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},easeBoth:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b}return-c/2*(--t*(t-2)-1)+b},backIn:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158}return c*(t/=d)*t*((s+1)*t-s)+b},backOut:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},backBoth:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158}if((t/=d/2)<1){return c/2*(t*t*(((s*=1.525)+1)*t-s))+b}return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},bounceIn:function(t,b,c,d){return c-Tween["bounceOut"](d-t,0,c,d)+b},bounceOut:function(t,b,c,d){if((t/=d)<1/2.75){return c*(7.5625*t*t)+b}else if(t<2/2.75){return c*(7.5625*(t-=1.5/2.75)*t+.75)+b}else if(t<2.5/2.75){return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b}return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b},bounceBoth:function(t,b,c,d){if(t<d/2){return Tween["bounceIn"](t*2,0,c,d)*.5+b}return Tween["bounceOut"](t*2-d,0,c,d)*.5+c*.5+b}};var Tweening=function(){if(this.onTweening){this.onTweening.apply(this)}if(this.current>=this.frames){this.stop();if(this.onComplete){this.onComplete.apply(this)}this.tweening=false;return}this.current++};var Motion=function(tween,duration){this.tween=tween||"linear";this.duration=jxn.isNumber(duration)?duration:timeMap[duration]||1e3;this.reset(tween,this.duration);this.tweening=false};Motion.prototype={equation:function(from,to){return this.tweenMethod(this.current/this.frames*this.duration,from,to-from,this.duration)},reset:function(tween,duration){if(this.tweening){this.stop()}this.duration=duration||400;this.tween=tween||"linear";this.fps=this.fps||35;this.frames=Math.ceil(this.duration/1e3*this.fps);if(this.frames<1){this.frames=1}this.tweenMethod="function"==typeof this.tween?this.tween:Tween[this.tween]||Tween["linear"];this.current=1},start:function(){this.tweening=true;var _self=this,d=this.duration/this.frames;this.timer=setInterval(function(){Tweening.call(_self)},d)},stop:function(){if(this.timer){clearInterval(this.timer);this.timer=null}this.tweening=false},hold:function(){this.stop()},goon:function(){this.start()}};var unitMatcher=/[a-zA-Z]+/,relativeMatcher=/^(?:([+\-])=)([\d\.]+)/;function getUnits(origin,target){var executed=unitMatcher.exec(origin);if(executed){return executed[0]}executed=unitMatcher.exec(target);if(executed){return executed[0]
}return"px"}function getNumber(value){return jxn.getNumber(value)}function getTarget(value,origin){if(jxn.isNumber(value)){return value}if(relativeMatcher.test(jxn.trim(value))){if(RegExp.$1=="+"){return origin+getNumber(RegExp.$2)}else{return origin-getNumber(RegExp.$2)}}return getNumber(value)}var timeMap={slow:600,fast:200};function doEffect(element,properties,duration,easing,complete){var props=[],origins={},targets={},units={},origin,motion,step;if(jxn.isFunction(properties)){properties=properties.call(element);if(!properties||!jxn.isObject(properties)){jxn.error("function as first param, should return an object");properties={}}}if(jxn.isFunction(duration)){complete=duration;duration=properties.duration}if(jxn.isFunction(easing)){complete=easing;easing="linear"}if(jxn.isObject(duration)){var options=duration;duration=options.duration;easing=options.easing;complete=options.complete;step=options.step}duration=jxn.isNumber(duration)?duration:timeMap[duration]||1e3;motion=element.__jxnMotion;var isNew=motion.isNew;motion.isNew=false;jxn.forEach(properties,function(name,value){name=string.camelCase(name);props.push(name);origin=getNumber(jxn.css(element,name)||"0");if(isNaN(origin)){origin=0}origins[name]=origin;targets[name]=getTarget(value,origin);units[name]=getUnits(origin,value)});var propsLen=props.length;if(propsLen==0){}motion.onTweening=function(){for(var i=0,prop,value;i<propsLen;i++){prop=props[i];value=this.equation(origins[prop],targets[prop]);if(units[prop]){value=value+units[prop]}jxn.css(element,prop,value)}jxn.isFunction(step)&&step.call(element,this.equation(0,this.frames),this.frames,motion)};motion.onComplete=function(){for(var i=0,prop,value;i<propsLen;i++){prop=props[i];value=targets[prop];if(units[prop]){value=value+units[prop]}if(jxn.css(element,prop)!=value){jxn.css(element,prop,value)}}jxn.isFunction(complete)&&complete.call(element,this.frames,motion);this.tweening=false;if(element.__motionQueue&&element.__motionQueue.length!=0){var args=element.__motionQueue.shift();doEffect.apply(element,args)}};if(!isNew){motion.reset(easing,duration)}motion.start();element.__motion=motion}var Effect={animate:function(element,properties,duration,easing,complete){if(!properties){jxn.error("need params for animate");return}var motion,realEasing=easing,realDuration=duration;if(jxn.isFunction(realEasing)){realEasing="linear"}if(!element.__jxnMotion){if(jxn.isObject(duration)){realEasing=duration.easing;realDuration=duration.duration}element.__jxnMotion=new Motion(realEasing,realDuration);element.__jxnMotion.isNew=true}motion=element.__jxnMotion;if(motion.tweening){element.__motionQueue=element.__motionQueue||[];element.__motionQueue.push(jxn.slice.call(arguments));return}doEffect.apply(element,arguments)},clearQueue:function(element){var queue=element.__motionQueue;if(!queue){return}for(var i=0,l=queue.length;i<l;i++){queue[i]=null}element.__motionQueue=null},delay:function(element,time,callback){jxn.animate(element,{},time,"linear",callback)},dequeue:function(){},fadeOut:function(element,speed,callback){jxn.animate(element,{opacity:"0"},speed,"easeIn",function(){jxn.css(element,"opacity","0");jxn.data(element,"display-bak",jxn.css(element,"display"));jxn.css(element,"display","none");callback&&callback.apply(element,arguments)})},fadeIn:function(element,speed,callback){var prepare=function(){jxn.css(element,"display",jxn.data(element,"display-bak")||"");jxn.css(element,"opacity","0");return{opacity:"1"}};jxn.animate(element,prepare,speed,"easeOut",function(){jxn.css(element,"opacity","1");jxn.removeData(element,"display-bak");callback&&callback.apply(element,arguments)})},fadeTo:function(element,speed,opacity,callback){var prepare=function(){if(opacity!=0){jxn.css(element,"display",jxn.data(element,"display-bak")||"");jxn.removeData(element,"display-bak")}return{opacity:opacity}};jxn.animate(element,prepare,speed,"linear",function(){jxn.css(element,"opacity",opacity);callback&&callback.apply(element,arguments)})},fadeToggle:function(){},fx:{interval:function(){},off:function(){}},queue:function(){},slideDown:function(element,speed,callback){var prepare=function(){var height,display,opacity,node;if(jxn.data(this,"animate-height-bak")){height=jxn.data(this,"animate-height-bak");display=jxn.data(this,"animate-display-bak");opacity=jxn.data(this,"animate-opacity-bak")}else{node=jxn("<"+this.tagName+">").appendTo("body");height=node.css("height");display=node.css("display");opacity=node.css("opacity");node.remove()}jxn.css(this,"display",display);jxn.css(this,"height","0px");return{height:height,opacity:opacity}};jxn.animate(element,prepare,speed,"easeIn",callback)},slideToggle:function(){},slideUp:function(element,speed,callback){var prepare=function(){jxn.data(this,"animate-height-bak",jxn.css(this,"height"));jxn.data(this,"animate-opacity-bak",jxn.css(this,"opacity"));jxn.data(this,"animate-display-bak",jxn.css(this,"display"));return{height:"0px",opacity:0}};jxn.animate(element,prepare,speed,"easeIn",function(){jxn.css(element,"opacity","0");jxn.css(element,"display","none");callback&&callback.call(element,arguments)})},start:function(element){element.__jxnMotion&&element.__jxnMotion.start()},stop:function(element,clearQueue,gotoEnd){var motion=element.__jxnMotion;if(!motion){return}if(clearQueue){jxn.clearQueue(element)}motion.stop();if(gotoEnd){motion.onComplete()}},hold:function(element){element.__jxnMotion&&element.__jxnMotion.hold()},goon:function(element){element.__jxnMotion&&element.__jxnMotion.goon()}};jxn.registerPlugin("Effect",Effect,["animate","clearQueue"])})(jxn);(function(jxn,undefined){var rroot=/^(?:body|html)$/i;var Position={position:function(element){if(!element){return null}var ele=jxn(element),offsetParent=ele.offsetParent(),offset=ele.offset(),parentOffset=rroot.test(offsetParent[0].nodeName)?{top:0,left:0}:offsetParent.offset();offset.top-=parseFloat(jxn.css(element,"marginTop"))||0;offset.left-=parseFloat(jxn.css(element,"marginLeft"))||0;parentOffset.top+=parseFloat(jxn.css(offsetParent[0],"borderTopWidth"))||0;parentOffset.left+=parseFloat(jxn.css(offsetParent[0],"borderLeftWidth"))||0;return{top:offset.top-parentOffset.top,left:offset.left-parentOffset.left}},scrollTop:function(element,value){if(value!==undefined){var win=jxn.getWindow(element);if(win){win.scrollTo(jxn(win).scrollLeft(),value)}else{element.scrollTop=value}return}var win=jxn.getWindow(element);if(win){if("pageYOffset"in win){return win.pageYOffset}var body=win.document.body;var docEle=win.document.documentElement;docEle=docEle.clientWidth?docEle:body;return docEle.scrollTop}else{return element.scrollTop}},scrollLeft:function(element,value){if(value!==undefined){var win=jxn.getWindow(element);if(win){win.scrollTo(value,jxn.scrollTop(win))}else{element.scrollLeft=value}return}var win=jxn.getWindow(element);if(win){if("pageXOffset"in win){return win.pageXOffset}var body=win.document.body;var docEle=win.document.documentElement;docEle=docEle.clientWidth?docEle:body;return docEle.scrollLeft}else{return element.scrollLeft}}};jxn.registerPlugin("Position",Position,["position","scrollLeft","scrollTop"])})(jxn);(function(jxn,undefined){var rroot=/^(?:body|html)$/i;function getDOMLeftTop(ele){if(ele.getBoundingClientRect){var bound=ele.getBoundingClientRect(),html=ele.ownerDocument.documentElement,scroll={x:getScrollLeft(ele),y:getScrollTop(ele)},isFixed=ele.style.position=="fixed";return{left:parseInt(bound.left,10)+(isFixed?0:scroll.x)-html.clientLeft,top:parseInt(bound.top,10)+(isFixed?0:scroll.y)-html.clientTop}}var element=ele,position={left:0,top:0};if(ele.tagName=="BODY")return position;while(element&&element.tagName!="BODY"){position.left+=element.offsetLeft;position.top+=element.offsetTop;if(ua.ua.gecko){if(!borderBox(element)){position.left+=parseFloat(element.style.borderLeftWidth);position.top+=parseFloat(element.style.borderTopWidth)}var parent=element.parentNode;if(parent&&parent.style.overflow!="visible"){position.left+=parseFloat(parent.style.borderLeftWidth);position.top+=parseFloat(parent.style.borderTopWidth)}}else if(element!=ele&&ua.ua.webket){position.left+=parseFloat(element.style.borderLeftWidth);position.top+=parseFloat(element.style.borderTopWidth)}element=element.offsetParent}if(ua.ua.gecko&&ele.style.MozBoxSizing!="border-box"){position.left-=parseFloat(ele.style.borderLeftWidth);position.top-=parseFloat(ele.style.borderTopWidth)}return position}function getScrollTop(ele){if(document.documentElement&&document.documentElement.scrollTop){return document.documentElement.scrollTop}else{return document.body.scrollTop}}function getScrollLeft(ele){if(document.documentElement&&document.documentElement.scrollLeft){return document.documentElement.scrollLeft}else{return document.body.scrollLeft}}function getWidthOrHeight(element,name,value){var prop=name.toLowerCase();if(jxn.isWindow(element)){var docElemProp=element.document.documentElement["client"+name],body=element.document.body;return element.document.compatMode==="CSS1Compat"&&docElemProp||body&&body["client"+name]||docElemProp}else if(jxn.isDocument(element)){return Math.max(element.documentElement["client"+name],element.body["client"+name],element.documentElement["client"+name],element.body["client"+name],element.documentElement["client"+name])}if(value!==undefined){if(jxn.isNumber(value)){value=value+"px"}jxn.css(element,prop,value);return}return parseInt(jxn.css(element,prop))}var Offset={offsetParent:function(element){var offsetParent=element.offsetParent||document.body;while(offsetParent&&(!rroot.test(offsetParent.nodeName)&&jxn.css(offsetParent,"position")==="static")){offsetParent=offsetParent.offsetParent}return jxn(offsetParent)},offset:function(element){return getDOMLeftTop(element)},width:function(element,width){return getWidthOrHeight(element,"Width",width)},height:function(element,height){return getWidthOrHeight(element,"Height",height)},innerWidth:function(element){return parseFloat(jxn.css(element,"width"))+parseFloat(jxn.css(element,"paddingLeft"))+parseFloat(jxn.css(element,"paddingRight"))},innerHeight:function(element){return parseFloat(jxn.css(element,"height"))+parseFloat(jxn.css(element,"paddingTop"))+parseFloat(jxn.css(element,"paddingBottom"))},outerWidth:function(element,margin){return jxn.innerWidth(element)+(parseFloat(jxn.css(element,"borderLeftWidth"))||0)+(parseFloat(jxn.css(element,"borderRightWidth"))||0)+(margin?parseFloat(jxn.css(element,"marginLeft"))+parseFloat(jxn.css(element,"marginRight")):0)},outerHeight:function(element,margin){return jxn.innerHeight(element)+(parseFloat(jxn.css(element,"borderTopWidth"))||0)+(parseFloat(jxn.css(element,"borderBottomWidth"))||0)+(margin?parseFloat(jxn.css(element,"marginTop"))+parseFloat(jxn.css(element,"marginBottom")):0)}};jxn.registerPlugin("Offset",Offset,["innerWidth","innerHeight"])})(jxn);(function(jxn,undefined){var propFix={tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},rboolean=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i;function isBooleanValueIn(element,attr){return rboolean.test(attr)&&attr in element}function setAttributeToElement(element,name,value,prefix){prefix=prefix||"";if(jxn.isObject(name)){for(var prop in name){if(!name.hasOwnProperty(prop)){continue}setAttributeToElement(element,prop,name[prop],prefix)}return}if(value===undefined){var attr=prefix+name,returned=null,tmp,value;if(isBooleanValueIn(element,attr)){value=element[attr];value=!!value&&value!="false";return value}else{returned=element.getAttribute(attr);if(jxn.isString(returned)&&jxn.trim(returned).indexOf("{")==0){try{tmp=JSON.parse(returned)}catch(e){}}value=tmp||returned}return value}else{if(jxn.isObject(value)){element.setAttribute(prefix+name,JSON.stringify(value))}else{element.setAttribute(prefix+name,value)}var attr=prefix+name;if(isBooleanValueIn(element,attr)){element[attr]=value}}}var Data={attr:function(element,name,value){return setAttributeToElement(element,name,value)},data:function(element,name,value){return setAttributeToElement(element,name,value,"data-")},removeAttr:function(element,attrName){if(element.nodeType!=1){return}attrName=propFix[attrName]||attrName;if(element.removeAttribute){element.setAttribute(attrName,"");element.removeAttribute(attrName);if(rboolean.test(attrName)&&attrName in element){element[attrName]=false}}},removeData:function(element,name){name="data-"+name;if(element.removeAttribute){element.removeAttribute(name)}else{element[name]=null;try{delete element[name]}catch(e){}}}};jxn.registerPlugin("Data",Data,["attr","data","removeData"])})(jxn);(function(jxn,undefined){var Browser={};for(var prop in ua.ua){Browser[prop]=ua.ua[prop]}Browser.version=ua.ua[ua.ua.shell];Browser[ua.ua.shell]=true;jxn.browser={};jxn.extend(jxn.browser,Browser)})(jxn);(function(jxn,undefined){var viewportHeight,inited=false,nodes={},DEFAULT_FREQUENCY=3;function inViewPort(node,delta){var min=jxn(document).scrollTop()-delta,max=min+viewportHeight+delta*2,top=node.position().top,bottom=top+node.innerHeight();return min<top&&top<max||min<bottom&&bottom<max}function getViewportHeight(){var height,docEle=document.documentElement;if(typeof window.innerHeight!="undefined"){height=window.innerHeight}else if(typeof docEle!=="undefined"&&typeof docEle.clientHeight!=="undefined"&&docEle.clientHeight!=0){height=docEle.clientHeight}else{height=document.getElementsByTagName("body")[0].clientHeight}return height}function doConsume(prop,propNodes){var len=propNodes.length,delta=propNodes.delta;if(len==0){return}for(var i=0,current;i<len;i++){current=jxn(propNodes[i]);if(!inViewPort(current,delta)){continue}if(prop=="value"){current.val(current.data(prop)).removeData(prop)}else{current.attr(prop,current.data(prop)).removeData(prop)}propNodes.splice(i,1);i--;len--}}function consumeNodes(){jxn.forEach(nodes,function(prop,propNodes){doConsume(prop,propNodes)})}jxn._lazyLoadNodes=function(){return nodes};jxn.lazyLoad=function(selector,options){options=options||{};var prop=options.prop||"src",fast=!!options.fast,frequency=jxn.isNumber(options.frequency)?options.frequency:DEFAULT_FREQUENCY,delta=options.delta||0,parent=jxn(options.parent||document.body),eventName;nodes[prop]=jxn(selector,parent);nodes[prop].delta=delta;if(inited){return}inited=true;eventName=fast===true?"scroll":"scroll/"+frequency;jxn(window).on("resize",function(){viewportHeight=getViewportHeight();consumeNodes()}).on(eventName,function(){consumeNodes()});viewportHeight=getViewportHeight();consumeNodes()};jxn.addLazyLoadNodes=function(newNodes,options){options=options||{};var prop=options.prop||"src",propNodes=nodes[prop]=nodes[prop]||[],selector=options.selector||"[data-"+prop+"]";for(var i=0,current,l=newNodes.length;i<l;i++){current=jxn(newNodes[i]);if(!current.data(prop)){current=jxn(selector,current)}if(current.length!=0){propNodes.push(current)}}doConsume(prop,propNodes)}})(jxn);(function(jxn,undefined){var TIMER=24*60*60*1e3,CookiePlugin={get:function(name){var cookie=document.cookie,cookies;if(!cookie||cookie==""){return null}if(!name){return cookie}name=jxn.trim(name);cookies=cookie.split(";");for(var i=0,parts,current,l=cookies.length;i<l;i++){current=jxn.trim(cookies[i]);parts=current.split("=");if(jxn.trim(parts[0])==name){return decodeURIComponent(jxn.trim(parts[1]))}}return null},set:function(name,value,options){var expires="",date,path,domain,secure;options=options||{};if(value===null){value="";options.expires=-1}if(options.expires){if(jxn.isNumber(options.expires)){date=new Date;date.setTime(date.getTime()+options.expires*TIMER)}else if(options.expires.toUTCString){date=options.expires}expires="; expires="+date.toUTCString()}path=options.path?"; path="+options.path:"";domain=options.domain?"; domain="+options.domain:"";secure=options.secure?"; secure":"";document.cookie=[name,"=",encodeURIComponent(value),expires,path,domain,secure].join("")},remove:function(name){jxn.cookie.set(name,null)}};jxn.cookie=function(name,value,options){if(typeof value!="undefined"){jxn.cookie.set(name,value,options)}else{return jxn.cookie.get(name)}};jxn.extend(jxn.cookie,CookiePlugin)})(jxn);(function(jxn,undefined){var jxnDoc=jxn(document);jxn.scrollViewportTo=function(element,options){if(!element&&element!==0){return}options=options||{};var userDelta=options.delta||0,currentTop=jxnDoc.scrollTop(),target=(element===0?0:jxn(element).position().top)+userDelta,delta=target-currentTop,noEffect=options.noEffect||false,easing=options.easing||"easeOut";if(noEffect){jxnDoc.stop().clearQueue().scrollTop(target);return}jxnDoc.stop().clearQueue().animate({},{step:function(current,total){jxnDoc.scrollTop(currentTop+Math.floor(delta*current/total))},duration:500,easing:easing})}})(jxn);(function(jxn,undefined){function createDOMStorageNode(storageName,expiresDay){var dataHolder=document.createElement("div");dataHolder.style.display="none";dataHolder.style.behavior="url(#default#userData)";var expires=new Date;expires.setDate(expires.getDate()+expiresDay);dataHolder.expires=expires.toUTCString();(document.body||document.getElementsByTagName("body")[0]).appendChild(dataHolder);return dataHolder}var Storage=new Class(function(){this.initialize=function(self,storageName,expires){self.__storageName=storageName||"ObjectJSLocalStorage";self.__expires=expires||365*100;self.__storageHolder=createDOMStorageNode(self.__storageName,self.__expires)};this.setItem=function(self,key,value){var storageHolder=self.__storageHolder,storageName=self.__storageName;var oldValue=self.getItem(key);storageHolder.load(storageName);storageHolder.setAttribute(key,value);storageHolder.save(storageName)};this.getItem=function(self,key){var storageHolder=self.__storageHolder,storageName=self.__storageName;storageHolder.load(storageName);return storageHolder.getAttribute(key)};this.removeItem=function(self,key){var storageHolder=self.__storageHolder,storageName=self.__storageName;var oldValue=self.getItem(key);storageHolder.load(storageName);storageHolder.removeAttribute(key);storageHolder.save(storageName)};this.clear=function(self){var storageHolder=self.__storageHolder,storageName=self.__storageName;storageHolder.load(storageName);var expiresDate=new Date;expiresDate.setDate(expiresDate.getDate()-1);storageHolder.expires=expiresDate.toUTCString();storageHolder.save(storageName);document.body.removeChild(self.__storageHolder);self.__storageHolder=createDOMStorageNode(self.__storageName,self.__expires)}});var supportLocalStorage="localStorage"in window,storageContainer,tmpStorage={},inited=false;if(supportLocalStorage){try{window["localStorage"]!=null;supportLocalStorage=true}catch(e){supportLocalStorage=false}}function initStorageContainer(){if(inited){return}inited=true;jxn(function(){storageContainer=new Storage;jxn.forEach(tmpStorage,function(name,value){storageContainer.setItem(name,value);delete tmpStorage[name]});tmpStorage=null})}if(supportLocalStorage){storageContainer=window.localStorage}jxn.storage=function(name,value){if(value===undefined){return jxn.storage.get(name)}else{jxn.storage.set(name,value)}};jxn.storage.set=function(name,value){if(jxn.isObject(value)){value=JSON.stringify(value)}if(!storageContainer){tmpStorage[name]=value;initStorageContainer();return}storageContainer.setItem(name,value)};jxn.storage.get=function(name){if(!storageContainer){return tmpStorage[name]}var returned=storageContainer.getItem(name),tmp;if(jxn.isString(returned)&&jxn.trim(returned).indexOf("{")==0){try{tmp=JSON.parse(returned)}catch(e){}}return tmp||returned};jxn.storage.remove=function(name){if(!storageContainer){delete tmpStorage[name];initStorageContainer();return}storageContainer.removeItem(name)};jxn.storage.clear=function(){if(!storageContainer){tmpStorage={};return}storageContainer.clear()}})(jxn);(function(jxn,undefined){var DEFAULT_PRI=2;DELAY_FACTOR={ieshell:{6:3,7:2.5,8:2,9:1.5,10:1.3,other:1.2},firefox:1.2,chrome:1,other:1},cache={},DELAY_GID=0;function getDelayFactor(browser,version){if(!(browser in DELAY_FACTOR)){return DELAY_FACTOR["other"]}var factorObj=DELAY_FACTOR[browser];if(!jxn.isObject(factorObj)){return factorObj}return factorObj[version]||factorObj["other"]}jxn.delayDo=function(fn,priority){fn._gid=fn._gid||DELAY_GID++;var factor,timer;if(!fn||!jxn.isFunction(fn)){console.error('please use delayDo like "delayDo(function, priority)"');return}if(fn._gid in cache){jxn.clearDelayDo(fn._gid)}priority=priority||DEFAULT_PRI;factor=getDelayFactor(jxn.browser.shell,jxn.browser.version);timer=setTimeout(function(){fn();jxn.clearDelayDo(fn)},priority*factor*1e3);cache[fn._gid]=timer};jxn._getDelayDos=function(){return cache};jxn.delayDoOrEvent=function(fn,priority,obj,eventName){if(!jxn.isNumber(priority)){eventName=obj;obj=priority;priority=DEFAULT_PRI}if(!obj){jxn.delayDo(fn,priority);return}var wrapper=function(){eventFlag&&obj.off(eventName,wrapper);jxn.clearDelayDo(wrapper);fn()},eventFlag;jxn.delayDo(wrapper,priority);if(obj=="domready"){jxn(wrapper)}else{obj=jxn(obj);eventFlag=true;obj.on(eventName,wrapper)}};jxn.clearDelayDo=function(gid){if(jxn.isFunction(gid)){gid=gid._gid}if(gid in cache){clearTimeout(cache[gid]);cache[gid]=null;delete cache[gid]}}})(jxn);(function(jxn,undefined){jxn._specialEvents=jxn._specialEvents||[];var reg=/^scroll\/\d+$/,specialScrolls={},GID=0,scrollFactors={ieshell:{6:20,7:20,8:20,9:1,10:1},firefox:10,opera:15,safari:1,chrome:1,other:1},timers={};function getFactor(){var factor=scrollFactors[jxn.browser.shell];if(!factor){return scrollFactors["other"]}if(jxn.isNumber(factor)){return factor}return factor[jxn.browser.version]||1}function buildHandler(counter,timer,times,gid,eventHandler){return function(){var _this=this,_args=arguments,interval=times*100;if(interval>2e3){interval=2e3}if(counter==0){timer&&clearTimeout(timer);timer=setTimeout(function(){eventHandler.apply(_this,_args);counter=0;timer=null;delete timers[gid]},interval);timers[gid]=timer}counter++;if(counter>=times-1){eventHandler.apply(_this,_args);counter=0;if(timer){clearTimeout(timer);timer=null;delete timers[gid]}}}}function onSpecialScroll(element,eventType,eventHandler,bubble){var gid=eventHandler._scroll_gid=GID++,originTimes;originTimes=parseInt(eventType.split("/")[1]);if(isNaN(originTimes)){jxn.error("scroll/N, N should be a number");return}times=originTimes*getFactor();var counter=0,timer=null,handler=buildHandler(counter,timer,times,gid,eventHandler);specialScrolls[eventHandler._scroll_gid]=handler;dom.wrap(element).addEvent("scroll",handler,bubble)}function offSpecialScroll(element,eventType,eventHandler,bubble){var gid=eventHandler._scroll_gid,timer=timers[gid];dom.wrap(element).removeEvent("scroll",specialScrolls[eventHandler._scroll_gid],bubble);if(timer){clearTimeout(timer);timer=null;delete timers[gid]}}jxn._specialEvents.push({likes:function(eventName){return reg.test(eventName)},on:onSpecialScroll,off:offSpecialScroll})})(jxn);return jxn});if(!window.jxn){object.use("jxn",function(jxn){window.jxn=jxn})}object.add("XN","dom, ua",function(exports,dom,ua){this.DEBUG_MODE=false;var _staticRoot="http://s.xnimg.cn/";this.debug={log:function(){},on:function(){exports.DEBUG_MODE=true;if(window.console&&console.log){exports.debug.log=function(s){console.log(s)}}},off:function(){exports.debug.log=function(){}}};this.namespace=function(){var a=arguments,o=null,i,j,d;for(i=0;i<a.length;i++){d=a[i].split(".");o=exports;for(j=d[0]=="XN"?1:0;j<d.length;j++){o[d[j]]=o[d[j]]||{};o=o[d[j]]}}return o};this.log=function(s){exports.debug.log(s)};this.isUndefined=function(object){return typeof object=="undefined"};this.isString=function(object){return typeof object=="string"};this.isElement=function(object){return object&&object.nodeType==1};this.isFunction=function(object){return typeof object=="function"};this.isObject=function(object){return typeof object=="object"};this.isArray=function(object){return Object.prototype.toString.call(object)==="[object Array]"};this.isNumber=function(object){return typeof object=="number"};this.$extend=function(){var result=arguments[0];for(var i=1;i<arguments.length;i++){if(typeof arguments[i]=="object"){for(var key in arguments[i])result[key]=arguments[i][key]}}return result};this.namespace("config");this.config.jumpOut=true;(function(){var files={};var version={};exports.getFileVersionNum=function(file){return version[file]};function hasLoad(file){return!!getFile(file)}function getFile(file){return files[encodeURIComponent(file)]}function mark(file){var obj={};obj.file=file;obj.isLoad=true;obj.isLoaded=true;files[encodeURIComponent(file)]=obj}function enableCustomEvent(target){target.addEvent=function(type,func){if(!this._customEventListeners){this._customEventListeners={}}var funcs=this._customEventListeners;if(exports.isUndefined(funcs[type])){funcs[type]=[]}funcs[type].push(func);return this},target.delEvent=function(type,func){var funcs=this._customEventListeners[type];if(funcs){for(var i=funcs.length-1;i>=0;i--){if(funcs[i]==func){funcs[i]=null;break}}}return this},target.fireEvent=function(type){if(!this._customEventListeners||!this._customEventListeners[type]){return}var funcs=this._customEventListeners[type],ars=buildArray(arguments);ars.shift();for(var i=0,j=funcs.length;i<j;i++){if(funcs[i]){try{funcs[i].apply(this,ars)}catch(ox){if(exports.DEBUG_MODE){throw ox}}}}}}function buildArray(o){var rt=[];for(var i=0,j=o.length;i<j;i++){rt.push(o[i])}return rt}function addFile(file,disClear){var obj={};obj.file=file;obj.isLoaded=false;enableCustomEvent(obj);obj.addEvent("load",function(){this.isLoaded=true});if(!disClear){files[encodeURIComponent(file)]=obj}var el=document.createElement("script");el.type="text/javascript";el.src=file;el.async=true;obj.element=el;if(ua.ua.shell=="ieshell"&&ua.ua.ie<11){el.onreadystatechange=function(){if((this.readyState=="loaded"||this.readyState=="complete")&&!this.hasLoad){this.hasLoad=true;var _file=getFile(file);if(_file!=null){_file.fireEvent("load")}else{try{exports.loadFile(file)}catch(e){}}}}}else{el.onerror=el.onload=function(){var tmp=getFile(file);if(tmp)tmp.fireEvent("load")}}Sizzle("head")[0].insertBefore(el,null)}function loadFile(file,callBack,disCache,disClear){var isJS=false,isCSS=false;if(exports.isObject(file)){isJS=file.type=="js";isCSS=file.type=="css";file=file.file}file=getFullName(file);if(/\.js(\?|$)/.test(file)||isJS){if(disCache||!hasLoad(file)){addFile(file,disClear)}if(!callBack)return;if(getFile(file).isLoaded){callBack.call(getFile(file),true)}else{getFile(file).addEvent("load",function(){callBack(true)});getFile(file).addEvent("error",function(){callBack(false)})}}else if(/\.css(\?|$)/.test(file)||isCSS){if(!disCache&&hasLoad(file)){if(callBack)callBack.call(getFile(file));return}mark(file);var el=document.createElement("link");el.rel="stylesheet";el.type="text/css";el.href=file;Sizzle("head")[0].insertBefore(el,null);if(callBack)callBack.call(getFile(file))}}function getFullName(file){runOnce(loadVersion);if(!version[file])return file;return version[file].file}var regWithA=new RegExp("("+_staticRoot+")"+"(a?\\d+)/([^?]*)");var regWithVer=new RegExp("(.*)\\?ver=(d+)(..*)");function getVersion(file){var match;if(match=regWithA.exec(file)){version[match[1]+match[3]]={file:file,version:match[2]}}else if(match=regWithVer.exec(file)){version[match[1]]={file:file,version:match[2]}}}exports.getFileVersion=function(files){for(var i=files.length-1;i>=0;i--){getVersion(files[i])}};exports.loadFile=function(file,callBack,disCache){dom.ready(function(){loadFile(file,callBack,disCache)})};exports.loadFileForever=function(file,callBack,disCache){dom.ready(function(){loadFile(file,callBack,disCache,true)})};exports.unloadFile=function(node){if(node.parentNode){node.parentNode.removeChild(node);files[encodeURIComponent(node.src)]=null}};exports.clearFiles=function(){for(var i in files)if(files.hasOwnProperty(i)){if(files[i]&&files[i].element)exports.unloadFile(files[i].element)}};exports.loadFiles=function(files,callBack){var f=files.length;function isAllLoad(){f--;if(f===0&&callBack)callBack()}files.forEach(function(v,i){exports.loadFile(v,isAllLoad)})};exports.getVersion=function(file){getVersion(file)};function loadVersion(){buildArray(document.getElementsByTagName("script")).forEach(function(v,i){if(v.src){mark(v.src);getVersion(v.src)}if(v.getAttribute("vsrc")){getVersion(v.getAttribute("vsrc"))}});buildArray(document.getElementsByTagName("link")).forEach(function(v,i){if(v.rel&&v.rel=="stylesheet"){mark(v.href);getVersion(v.href)}if(v.getAttribute("vhref"))getVersion(v.getAttribute("vhref"))});exports.log("load file version:");exports.log(version)}exports.dynamicLoad=function(file){file.funcs.forEach(function(func,i){window[func]=function(){var ars=arguments;window[func]=null;if(file.file){file.files=[file.file]}exports.loadFiles(file.files,function(){window[func].apply(null,ars);if(file.callBack)file.callBack.call(null)})}})};exports.namespace("img");exports.img.getVersion=function(file){runOnce(loadVersion);if(!version[file])return"";return version[file].version};exports.img.getFullName=function(file){return getFullName(file)};function runOnce(func){if(window.runOnceFunc==null){window.runOnceFunc={}}if(window.runOnceFunc[func]){return null}window.runOnceFunc[func]=true;return func()}})()});object.add("XN.array","XN",function(exports,XN){this.toQueryString=function(a,key){var rt=[],t;for(var k in a){t=a[k];if(XN.isFunction(t))continue;if(XN.isObject(t)){rt.push(arguments.callee(t,k))}else{if(/^\d+$/.test(k)){rt.push((key||k)+"="+encodeURIComponent(t))}else{rt.push(k+"="+encodeURIComponent(t))}}}return rt.join("&")};this.each=function(a,func){if(!a)return;if(!XN.isUndefined(a.length)||!XN.isUndefined(a[0])){for(var i=0,j=a.length;i<j;i++){if(func.call(a,i,a[i])===false)break}}else{for(var key in a){if(!XN.isFunction(a[key])){if(func.call(a,key,a[key])===false)break}}}};this.include=function(a,value){var r=false;exports.each(a,function(i,v){if(v===value){r=true;return false}});return r};this.build=function(o){var rt=[];for(var i=0,j=o.length;i<j;i++){rt.push(o[i])}return rt}});object.add("XN.func",function(exports){if(window.runOnceFunc==null){window.runOnceFunc={}}this.empty=function(){};this.runOnce=function(func){if(window.runOnceFunc[func]){return null}window.runOnceFunc[func]=true;return func()}});object.add("XN.string","XN",function(exports,XN){this.nl2br=function(str){return(str||"").replace(/([^>])\n/g,"$1<br />")};this.trim=function(str){return(str||"").replace(/^\s+|\s+$/g,"")};this.ltrim=function(str){return(str||"").replace(/^\s+/,"")};this.rtrim=function(str){return(str||"").replace(/\s+$/,"")};this.strip=function(str){return exports.trim(str)};this.stripTags=function(str){return str.replace(/<\/?[^>]+>/gim,"")};this.escapeHTML=function(str){return str.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};this.unescapeHTML=function(str){return str.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g," ").replace(/&quot;/g,'"').replace(/&amp;/g,"&")};this.include=function(str,key){return str.indexOf(key)>-1};this.startsWith=function(str,key){return str.indexOf(key)===0};this.endsWith=function(str,key){var d=str.length-key.length;return d>=0&&str.lastIndexOf(key)===d};this.isBlank=function(str){return/^\s*$/.test(str)};this.isEmail=function(str){return/^[A-Z_a-z0-9-\.]+@([A-Z_a-z0-9-]+\.)+[a-z0-9A-Z]{2,4}$/.test(str)};this.isMobile=function(str){return/^((\(\d{2,3}\))|(\d{3}\-))?((1[345]\d{9})|(18\d{9}))$/.test(str)};this.isUrl=function(str){return/^(http:|ftp:)\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"])*$/.test(str)};this.isIp=function(str){return/^(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5]).(0|[1-9]\d?|[0-1]\d{2}|2[0-4]\d|25[0-5])$/.test(str)
};this.isNumber=function(str){return/^\d+$/.test(str)};this.isZip=function(str){return/^[1-9]\d{5}$/.test(str)};this.isEN=function(str){return/^[A-Za-z]+$/.test(str)};this.isJSON=function(str){if(!XN.isString(str)||str===""){return false}str=str.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,"");return/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(str)};this.getQuery=function(key,url){url=url||window.location.href+"";if(url.indexOf("#")!==-1){url=url.substring(0,url.indexOf("#"))}var rts=[],rt;var queryReg=new RegExp("(^|\\?|&)"+key+"=([^&]*)(?=&|#|$)","g");while((rt=queryReg.exec(url))!=null){rts.push(decodeURIComponent(rt[2]))}if(rts.length==0)return null;if(rts.length==1)return rts[0];return rts};this.setQuery=function(key,value,url){url=url||window.location.href+"";var hash="";if(!/^http/.test(url)){return url}if(url.indexOf("#")!==-1){hash=url.substring(url.indexOf("#"))}url=url.replace(hash,"");url=url.replace(new RegExp("(^|\\?|&)"+key+"=[^&]*(?=&|#|$)","g"),"");value=XN.isArray(value)?value:[value];for(var i=value.length-1;i>=0;i--){value[i]=encodeURIComponent(value[i])}var p=key+"="+value.join("&"+key+"=");return url+(/\?/.test(url)?"&":"?")+p+hash};this.isNum=this.isNumber});object.add("XN.json",function(exports){this._PARSE_DATE=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})Z$/;this.dateToString=function(d){function _zeroPad(v){return v<10?"0"+v:v}return'"'+d.getUTCFullYear()+"-"+_zeroPad(d.getUTCMonth()+1)+"-"+_zeroPad(d.getUTCDate())+"T"+_zeroPad(d.getUTCHours())+":"+_zeroPad(d.getUTCMinutes())+":"+_zeroPad(d.getUTCSeconds())+'Z"'};this.stringToDate=function(str){if(exports._PARSE_DATE.test(str)){var d=new Date;d.setUTCFullYear(RegExp.$1,(RegExp.$2|0)-1,RegExp.$3);d.setUTCHours(RegExp.$4,RegExp.$5,RegExp.$6);return d}};this.parse=function(str){return eval("("+str+")")};this.build=function(o,w,d){return JSON.stringify(o,w,d)}});object.add("XN.util","XN, XN.json, XN.array, XN.event, XN.string",function(exports,XN){if(!window.__timeouts==null){window.__timeouts=[];window.__intervals=[]}this.setTimeout=function(a,b){var timer=setTimeout(a,b);window.__timeouts.push(timer);return timer};this.setInterval=function(a,b){var timer=setInterval(a,b);window.__intervals.push(timer);return timer};this.clearTimeout=function(timer){for(var i=0;i<window.__timeouts.length;i++){if(window.__timeouts[i]==timer)window.__timeouts.slice(i,1)}clearTimeout(timer)};this.clearInterval=function(timer){for(var i=0;i<window.__intervals.length;i++){if(window.__intervals[i]==timer)window.__intervals.slice(i,1)}clearInterval(timer)};this.clearAllTimer=function(){for(var i=0;i<window.__timeouts.length;i++)clearTimeout(window.__timeouts[i]);for(var i=0;i<window.__intervals.length;i++)clearInterval(window.__intervals[i]);window.__timeouts=[];window.__intervals=[]};this.cache=function(params){XN.$extend(this,params);this._cacheData=[]};this.cache.prototype={cacheLength:null,_cacheData:null,isExist:function(key){return this.get(key)},add:function(key,value){if(!XN.isUndefined(this.isExist(key)))return;if(this.cacheLength&&this.cacheLength==this._cacheData.length){this._cacheData.shift()}this._cacheData.push({key:key,value:value})},get:function(key){for(var i=this._cacheData.length-1;i>=0;i--){if(this._cacheData[i].key==key){return this._cacheData[i].value}}},clear:function(){this._cacheData=[]}};(function(){var funcs={};exports.hotKey={add:function(key,func,obj){key=String(key).toLowerCase();var ctrl=false;var alt=false;var shift=false;var _code=null;if(/^\d+$/.test(key)){_code=parseInt(key)}else{ctrl=/ctrl|ctr|c/.test(key);alt=/alt|a/.test(key);shift=/shift|s/.test(key);if(/\d+/.test(key)){_code=parseInt(/\d+/.exec(key)[0])}else{_code=false}}funcs[key]=funcs[key]||{};funcs[key][func]=function(e){e=e||window.event;var code=e.keyCode;if(ctrl&&!e.ctrlKey)return;if(alt&&!e.altKey)return;if(shift&&!e.shiftKey)return;if(_code&&code!==_code)return;func.call(obj||null);XN.event.stop(e)};XN.event.addEvent(document,"keydown",funcs[key][func])},del:function(key,func){key=String(key).toLowerCase();XN.event.delEvent(document,"keydown",funcs[key][func]);delete funcs[key][func]}}})();(function(){var id=0;exports.createObjID=function(){id++;return id}})()});object.add("XN.datasource","XN, XN.json, XN.net, XN.string, XN.array",function(exports,XN){this.DS_JSON=function(p){XN.$extend(this,p)};this.DS_JSON.prototype={DS_TYPE:"JSON",url:null,queryParam:"query",attachParam:"",rootKey:null,method:"get",_request:null,query:function(v,callBack){var This=this;try{this._request.abort()}catch(e){}function parseDS_JSON(r){r=r.responseText;var pp;try{var rt=XN.json.parse(r);if(This.rootKey&&rt[This.rootKey]){pp=rt[This.rootKey]}else{pp=rt}}catch(e){pp=[]}callBack(pp)}this._request=new XN.net.xmlhttp({url:this.url,data:this.queryParam+"="+encodeURIComponent(v)+"&"+this.attachParam,method:this.method,onSuccess:parseDS_JSON})}};this.DS_friends=function(p){var ds=new exports.DS_JSON(p);ds.queryParam="p";ds.rootKey="candidate";ds.net="";ds.group="";ds.page=XN.isUndefined(p.page)?false:p.page;ds.param=XN.json.build(p.param||{});var limit=XN.isUndefined(p.limit)?24:p.limit;ds.query=function(name,callBack){XN.log("start query");name=name.replace(/[^a-zA-Z\u0391-\uFFE5]/g,"");if(XN.string.isBlank(name)&&this.group==""&&this.net==""){callBack([]);return}var p=['{"init":false,','"qkey":"'+this.qkey+'",','"uid":true,','"uname":true,','"uhead":true,','"limit":'+limit+",",'"param":'+this.param+",",'"query":"'+name+'",','"group":"'+this.group+'",','"net":"'+this.net+'",','"page":"'+this.page+'"',"}"].join("");exports.DS_JSON.prototype.query.call(this,p,callBack)};return ds};this.DS_Array=function(p){XN.$extend(this,p);this.init()};this.DS_Array.prototype={DS_TYPE:"array",data:null,searchKey:null,init:function(){var key=this.searchKey,index=this._index=[];XN.array.each(this.data,function(i,v){index.push(v[key])})},query:function(v,callBack){callBack(this._search(v))},_search:function(v){var keys=this._index,data=this.data,rt=[],reg=new RegExp("^"+v,"i");XN.array.each(keys,function(i,v){if(reg.test(v))rt.push(data[i])});return rt}};this.DS_XHR=function(p){XN.$extend(this,p)};this.DS_XHR.prototype={url:null,queryParam:"query",_request:null,query:function(v,callBack){var This=this;try{this._request.abort()}catch(e){}function parseDS_XML(r){r=r.responseXML;var rt=[];function getResult(r){var tmp={};XN.array.each(r.childNodes,function(i,v){tmp[v.tagName.toLowerCase()]=v.firstChild.nodeValue});return tmp}try{var rs=r.getElementsByTagName("Result");XN.array.each(rs,function(i,v){rt.push(getResult(v))})}catch(e){rt=[]}callBack(rt)}this._request=new XN.net.xmlhttp({url:this.url,data:this.queryParam+"="+encodeURIComponent(v),onSuccess:parseDS_XML})}}});object.add("XN.browser","sys, XN",function(exports,sys,XN){this.IE=!!(window.attachEvent&&!window.opera);this.IE10=this.IE&&function(){"use strict";return this===undefined}();this.IE9=navigator.userAgent.indexOf("MSIE 9.0")>-1;this.IE8=!this.IE9&&navigator.userAgent.indexOf("MSIE 8.0")>-1;this.IE7=!this.IE9&&!this.IE8&&navigator.userAgent.indexOf("MSIE 7.0")>-1;this.IE6=!this.IE9&&!this.IE8&&!this.IE7&&navigator.userAgent.indexOf("MSIE 6.0")>-1;this.Opera=!!window.opera,this.WebKit=navigator.userAgent.indexOf("AppleWebKit/")>-1;this.Gecko=navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("KHTML")==-1;this.copy=function(o){function onfail(){if(XN.isElement(o)){o.select()}}var str;if(XN.isElement(o)){str=o.value}else{str=o}var _do=sys.modules["XN.Do"];if(window.clipboardData&&clipboardData.setData){if(clipboardData.setData("text",str))return true}else{if(_do){_do.alert({message:"您的浏览器不支持脚本复制,请尝试手动复制",callBack:function(){onfail()}})}else{alert("您的浏览器不支持脚本复制,请尝试手动复制")}return false}if(_do){_do.alert({message:"您的浏览器设置不允许脚本访问剪切板",callBack:function(){onfail()}})}else{alert("您的浏览器设置不允许脚本访问剪切板")}return false}});object.add("XN.cookie","XN",function(exports,XN){this.get=function(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" "){c=c.substring(1,c.length)}if(c.indexOf(nameEQ)==0){return decodeURIComponent(c.substring(nameEQ.length,c.length))}}return null};this.set=function(name,value,days,path,domain,secure){var expires;if(XN.isNumber(days)){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);expires=date.toGMTString()}else if(XN.isString(days)){expires=days}else{expires=false}document.cookie=name+"="+encodeURIComponent(value)+(expires?";expires="+expires:"")+(path?";path="+path:"")+(domain?";domain="+domain:"")+(secure?";secure":"")};this.del=function(name,path,domain,secure){exports.set(name,"",-1,path,domain,secure)}});object.add("XN.net","XN, XN.form, XN.util, XN.event, XN.func, XN.browser, XN.element",function(exports,XN){if(!window.__ajaxProxies){window.__ajaxProxies={}}this.sendForm=function(params){XN.log("send form");params.data=XN.form.serialize(params.form);return new exports.xmlhttp(params)};this.sendStats=function(url){var n="log_"+(new Date).getTime();var c=window[n]=new Image;c.onload=c.onerror=function(){window[n]=null};c.src=url;c=null};this.xmlhttp=function(params){if(window._developer_no_ajax)return;var This=this;if(!exports.cache)exports.cache=new XN.util.cache;if(arguments.length>1){this.url=arguments[0]||null;this.data=arguments[1]||"";this.onSuccess=arguments[2];extendObject(this,arguments[3]);init(window);return this}extendObject(this,params);var cache;if(this.useCache&&(cache=exports.cache.get(this.url+encodeURIComponent(this.data)))){this.transport={};this.transport.responseText=cache;setTimeout(function(){This._onComplete();This._onSuccess()},0);return this}function init(w){This.transport=This.getTransport(w);return This.url&&This.send(This.method)}var tmp=XN.element.$element("a");tmp.href=this.url;var requestHost=tmp.hostname;var requestProtocol=tmp.protocol;if(/^http/.test(this.url)&&location.hostname!=requestHost){if(window.__ajaxProxies[requestHost]){(function(){if(window.__ajaxProxies[requestHost].loaded){init(window.__ajaxProxies[requestHost].contentWindow)}else{setTimeout(arguments.callee,100)}})()}else{var iframe=XN.element.$element("iframe").hide();document.body.insertBefore(iframe,document.body.firstChild);var iframe_src=requestProtocol+"//"+requestHost+"/ajaxproxy.htm";if(requestHost.indexOf("notice.")!=-1||requestHost.indexOf("music.")!=-1){iframe_src=iframe_src+"?v=1"}iframe.src=iframe_src;window.__ajaxProxies[requestHost]=iframe;window.__ajaxProxies[requestHost].loaded=false;XN.event.addEvent(iframe,"load",function(){if(iframe.contentWindow.location.href!==iframe.src){iframe.contentWindow.location.href=iframe.src}else{try{init(iframe.contentWindow);window.__ajaxProxies[requestHost]=iframe;window.__ajaxProxies[requestHost].loaded=true}catch(e){}}})}}else init(window);return This};this.xmlhttp.prototype={url:null,data:"",onStart:new Function,onSuccess:null,onFailure:null,onError:null,fillTo:null,method:"post",asynchronous:true,transport:null,headers:null,iAmXmlhttp:true,useCache:false,requestToken:true,binary:false,formData:false,abort:function(){this.transport.abort()},send:function(method){var _url;if(method=="get"&&this.data!==""){_url=this.url+(/\?/.test(this.url)?"&":"?")+this.data}else{_url=this.url}this.transport.onreadystatechange=this.onStateChange.bind(this);this.transport.open(method,_url,this.asynchronous);if(!this.formData){this.transport.setRequestHeader("Content-Type","application/x-www-form-urlencoded")}if(this.headers!==null){for(var i in this.headers){this.transport.setRequestHeader(i,this.headers[i])}}if(this.headers==null||!this.headers["X-Requested-With"]){this.transport.setRequestHeader("X-Requested-With","XMLHttpRequest")}var params=null;if(method.toLowerCase()=="post"){params=this.data;if(this.requestToken&&XN.get_check){params+=(params?"&":"")+"requestToken="+XN.get_check}if(this.requestToken&&XN.get_check_x){params+=(params?"&":"")+"_rtk="+XN.get_check_x}}try{if(window.event&&document.body.id=="profile"&&method=="get"&&/(none|null)\b/.test(this.url)&&XN.user.id%10==0){var temp=document.createElement("div");var obj=event.srcElement;temp.appendChild(obj);if(obj){var params={from:"profile",nodeHTML:temp.innerHTML};nullOrNoneLog(params)}}}catch(e){}function nullOrNoneLog(data){var params="";for(var i in data){params=params+"&"+i+"="+encodeURIComponent(data[i])}var logImg=(new Image).src="http://123.125.44.44/r/?t="+(new Date).getTime()+params}if(this.binary){this.transport.sendAsBinary(params)}else{this.transport.send(params)}},_onSuccess:function(obj){var transport=this.transport;if(this.fillTo!==null){try{this.fillTo.stopLoading()}catch(e){}this.fillTo.innerHTML=transport.responseText}try{if(this.onSuccess){this.onSuccess.call(null,transport)}}catch(e){if(XN.DEBUG_MODE){throw e}}},_onComplete:function(obj){var transport=this.transport;try{if(this.onComplete){this.onComplete.call(null,transport)}}catch(e){if(XN.DEBUG_MODE){throw e}}},onStateChange:function(){var transport=this.transport;if(transport.readyState==1&&!this.hasRunStart){this.onStart();this.hasRunStart=true}else if(transport.readyState==4){if(transport.status==undefined||transport.status==0||transport.status>=200&&transport.status<300){if(this.useCache){exports.cache.add(this.url+encodeURIComponent(this.data),this.transport.responseText)}this._onSuccess()}else{(this.onError||this.onFailure||XN.func.empty).call(null,transport)}this._onComplete()}}};this.xmlhttp.prototype.getTransport=function(w){if(w!=window){return w.getTransport()}else if(XN.browser.IE){try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){return new ActiveXObject("Microsoft.XMLHTTP")}}else{return new XMLHttpRequest}};this.ajax=this.xmlhttp;XN.$extend(this.xmlhttp.prototype,{get:function(url,data,onSuccess,params){this.url=url;this.data=data;this.onSuccess=onSuccess;XN.$extend(this,params);this.send("get")},post:function(url,data,onSuccess,params){this.url=url;this.data=data;this.onSuccess=onSuccess;XN.$extend(this,params);this.send("post")}});if(typeof Ajax=="undefined"){Ajax={};Ajax.Request=function(url,o){var p=o.parameters;o["url"]=url;o["data"]=p;delete o.parameters;return new exports.xmlhttp(o)}}});object.add("XN.env",function(exports){this.shortSiteName="人人";this.siteName="人人网";this.domain="renren.com";this.domain_reg=this.domain.replace(/\./g,"\\.");this.staticRoot="http://s.xnimg.cn/";this.CDNstaticRoot="http://a.xnimg.cn/";this.swfRoot="http://static.xiaonei.com/";this.wwwRoot="http://"+this.domain+"/"});object.add("XN.event","XN, XN.browser, XN.array, XN.element, ua",function(exports,XN){var browser=XN.browser;var allEvents=[];this.ignoreEvent=false;this.logEvents=false;this.isCapsLockOn=function(e){var c=e.keyCode||e.which;var s=e.shiftKey;if(c>=65&&c<=90&&!s||c>=97&&c<=122&&s){return true}return false};this.element=function(e){var n=e.target||e.srcElement;return exports.resolveTextNode(n)};this.relatedTarget=function(e){var t=e.relatedTarget;if(!t){if(e.type=="mouseout"||e.type=="mouseleave"){t=e.toElement}else if(e.type=="mouseover"){t=e.fromElement}}return exports.resolveTextNode(t)};this.resolveTextNode=function(n){try{if(n&&3==n.nodeType){return n.parentNode}}catch(e){}return n};this.pointerX=function(event){return event.pageX||event.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft)};this.pointerY=function(event){return event.pageY||event.clientY+(document.documentElement.scrollTop||document.body.scrollTop)};this.isStrictMode=document.compatMode!="BackCompat";this.pageHeight=function(){return this.isStrictMode?Math.max(document.documentElement.scrollHeight,document.documentElement.clientHeight):Math.max(document.body.scrollHeight,document.body.clientHeight)};this.pageWidth=function(){return this.isStrictMode?Math.max(document.documentElement.scrollWidth,document.documentElement.clientWidth):Math.max(document.body.scrollWidth,document.body.clientWidth)};this.winWidth=function(){return this.isStrictMode?document.documentElement.clientWidth:document.body.clientWidth};this.winHeight=function(){return this.isStrictMode?document.documentElement.clientHeight:document.body.clientHeight};this.scrollTop=function(){if(XN.browser.WebKit){return window.pageYOffset}return this.isStrictMode?document.documentElement.scrollTop:document.body.scrollTop};this.scrollLeft=function(){if(XN.browser.WebKit){return window.pageXOffset}return this.isStrictMode?document.documentElement.scrollLeft:document.body.scrollLeft};this.stop=null;this.clearEvents=function(){for(var eventInfo,i=0;eventInfo=allEvents[i];i++){exports.delEvent.apply(exports,eventInfo)}allEvents=[]};this.addEvent=function(el,name,func,cap){if(exports.ignoreEvent)return;var els=[];el=XN.element.$(el);if(XN.isArray(el)){els=el}else{els.push(el)}if(els.length==0)return el;XN.array.each(els,function(i,v){if(exports.logEvents)allEvents.push([v,name,func,cap]);exports._addEvent(v,name,func,cap)});return el};this.delEvent=function(el,name,func,cap){var els=[];el=XN.element.$(el);if(XN.isArray(el)){els=el}else{els.push(el)}if(els.length==0){return el}XN.array.each(els,function(i,v){exports._delEvent(v,name,func,cap)});return el};this._addEvent=null;this._delEvent=null;this.enableCustomEvent=function(obj){XN.$extend(obj,{addEvent:function(type,func){if(!this._customEventListeners)this._customEventListeners={};var funcs=this._customEventListeners;if(XN.isUndefined(funcs[type])){funcs[type]=[]}funcs[type].push(func);return this},delEvent:function(type,func){var funcs=this._customEventListeners[type];if(funcs){for(var i=funcs.length-1;i>=0;i--){if(funcs[i]==func){funcs[i]=null;break}}}return this},fireEvent:function(type){if(!this._customEventListeners||!this._customEventListeners[type]){return}var funcs=this._customEventListeners[type],ars=XN.array.build(arguments);ars.shift();for(var i=0,j=funcs.length;i<j;i++){if(funcs[i]){try{funcs[i].apply(this,ars)}catch(ox){if(XN.DEBUG_MODE){throw ox}}}}}});return obj};if(document.addEventListener){this.stop=function(event){event.preventDefault();event.stopPropagation()}}else{this.stop=function(event){event.returnValue=false;event.cancelBubble=true}}var ismouseleave=function(event,element){var p=event.relatedTarget;while(p&&p!=element){try{p=p.parentNode}catch(error){p=element}}return p!==element};if(window.attachEvent&&!browser.Opera){function wrapEvent(nativeEvent){nativeEvent.stopPropagation=function(){this.cancelBubble=true};nativeEvent.preventDefault=function(){this.returnValue=false};return nativeEvent}this._addEvent=function(element,name,func){if(!element){return}element=XN.element.$(element);if(name=="input")name="propertychange";if(name=="keypress")name="keydown";if(!element._eventListeners){element._eventListeners={}}if(!element._eventListeners[name]){element._eventListeners[name]=[]}var wrapperFunc=function(){var e=wrapEvent(window.event);func.call(element,e)};wrapperFunc.innerFunc=func;element._eventListeners[name].push(wrapperFunc);element.attachEvent("on"+name,wrapperFunc);return element};this._delEvent=function(element,name,func){element=XN.element.$(element);if(name=="input")name="propertychange";if(name=="keypress")name="keydown";if(!element._eventListeners[name]){return}for(var i=0,wrapperFunc;i<element._eventListeners[name].length;i++){wrapperFunc=element._eventListeners[name][i];if(wrapperFunc.innerFunc===func){break}}element.detachEvent("on"+name,wrapperFunc);return element}}else if(window.addEventListener){this._addEvent=function(element,name,func,useCapture){element=XN.element.$(element);if(name=="mouseleave"){element.onmouseleave=function(e){e=e||window.event;if(ismouseleave(e,element)&&func){func.call(element,e)}};element.addEventListener("mouseout",element.onmouseleave,useCapture);return element}if(name=="keypress"&&browser.WebKit){name="keydown"}element.addEventListener(name,func,useCapture);return element};this._delEvent=function(element,name,func,useCapture){element=XN.element.$(element);if(name=="mouseleave"){element.removeEventListener("mouseout",element.onmouseleave,useCapture);return element}if(name=="keypress"&&browser.WebKit){name="keydown"}element.removeEventListener(name,func,useCapture);return element}}});object.define("XN.dom","dom, ua, XN, XN.event, XN.array, XN.browser, XN.element",function(require,exports){require("XN.event");require("XN.array");require("XN.browser");require("XN.element");var dom=require("dom");var ua=require("ua");var XN=require("XN");var Event=XN.event;var array=XN.array;var browser=XN.browser;var shadowElement=null;function createShadow(opacity,zIndex){opacity=opacity||.3;zIndex=zIndex||2e3;var el=XN.element.$element("div");shadowElement=el;el.style.position="absolute";el.style.top=0;el.style.left=0;el.style.background="#000";el.style.zIndex=zIndex;el.style.opacity=opacity;el.style.filter="alpha(opacity="+opacity*100+")";el.innerHTML=['<iframe width="100%" height="100%" frameBorder="0" style="position:absolute;top:0;left:0;z-index:1;"></iframe>','<div style="position:absolute;top:0;left:0;width:100%;height:100%;background-color:#000000;z-index:2;height:expression(this.parentNode.offsetHeight);"></div>'].join("");function resize(){el.hide();el.style.height=XN.event.pageHeight()+"px";el.style.width=XN.event.pageWidth()+"px";el.show()}resize();XN.event.addEvent(window,"resize",function(e){if(shadowElement&&shadowElement.style.display!="none"){try{resize()}catch(e){}}});document.body.insertBefore(el,document.body.firstChild)}this.disable=function(opacity,zIndex){if(!shadowElement){createShadow(opacity,zIndex)}};this.enable=function(){if(shadowElement){shadowElement.remove();shadowElement=null}};this.insertAfter=function(element,targetElement){element=XN.element.$(element);targetElement=XN.element.$(targetElement);var parent=targetElement.parentNode;if(parent.lastChild==targetElement){parent.appendChild(element)}else{parent.insertBefore(element,targetElement.nextSibling)}};this.getElementsByClassName=function(className,element,tagName){var c=(XN.element.$(element)||document).getElementsByTagName(tagName||"*")||document.all;var elements=[];var _exp=new RegExp("(^|\\s)"+className+"(\\s|$)");array.each(c,function(i,v){if(_exp.test(v.className))elements.push(v)});return elements};this.findFirstClass=function(element,className){element=XN.element.$(element);var els=exports.getElementsByClassName(className,element);return XN.element.$(els[0])||null};this.ready=function(callback,async){if(XN.isUndefined(async)){async=false}var func=async?function(){setTimeout(callback,0)}:callback;dom.ready(func)};this.preloadImg=function(src){src=XN.isArray(src)?src:[src];array.each(src,function(i,v){(new Image).src=v})};this.readyDo=this.ready});object.add("XN.element","sys, XN, XN.browser, XN.env",function(exports,sys,XN){var browser=XN.browser;var _extends=["clear","hover","scrollTo","visible","toggleClass","toggleText","hasClassName","addClass","delClass","show","hide","remove","setStyle","getStyle","addEvent","delEvent","_eventListeners","matchesSelector","getData","delegate","addChild","delChild","setContent","setHTML","getPosition","realLeft","realTop","appendHTML","html","parent","startLoading","stopLoading","eval_inner_JS","extend","setOpacity","findFirstClass"];var _effect=sys.modules["XN.effect"];function getDom(str){var tmp=document.createElement("div");tmp.style.display="none";document.body.appendChild(tmp);tmp.innerHTML=str;var dom=document.createElement("div");while(tmp.firstChild)dom.appendChild(tmp.firstChild);tmp.parentNode.removeChild(tmp);return dom}var t=document.createElement("div");t.innerHTML="<TEST_TAG></TEST_TAG>";var needGetDom=t.firstChild===null;this.clear=function(element){element=exports.$(element);element.innerHTML="";return element};this.hover=function(element,className,hover){element=exports.$(element);hover=hover?exports.$(hover):element;var _event=sys.modules["XN.event"];if(_event){_event.addEvent(element,"mouseover",function(){hover.addClass(className)},false);_event.addEvent(element,"mouseleave",function(){hover.delClass(className)},false)}else{throw new Error("请先导入XN.event模块，再使用XN.event.addEvent")}return element};this.scrollTo=function(element,effect){element=exports.$(element);if(!_effect)effect="normal";switch(effect){case"slow":XN.effect.scrollTo(element);break;default:window.scrollTo(0,element.realTop());break}return element};this.visible=function(element){element=exports.$(element);return element.style.display!="none"&&element.style.visibility!="hidden"};this.toggleClass=function(element,className,className2){if(XN.isUndefined(className2)){if(exports.hasClassName(element,className)){exports.delClass(element,className)}else{exports.addClass(element,className)}}else{if(exports.hasClassName(element,className)){exports.delClass(element,className);exports.addClass(element,className2)}else{exports.addClass(element,className);exports.delClass(element,className2)}}return exports.$(element)};this.toggleText=function(element,text1,text2){if(element.innerHTML==text1){element.innerHTML=text2}else{element.innerHTML=text1}};this.hasClassName=function(element,className){return new RegExp("(^|\\s+)"+className+"(\\s+|$)").test(exports.$(element).className)};this.addClass=function(element,className){element=exports.$(element);if(exports.hasClassName(element,className))return element;element.className+=" "+className;return element};this.delClass=function(element,className){element=exports.$(element);element.className=element.className.replace(new RegExp("(^|\\s+)"+className+"(\\s+|$)","g")," ");return element};this.show=function(element,effect){element=exports.$(element);if(element.style.display!="none")return;if(!_effect||!effect)effect="normal";switch(effect){case"normal":element.style.display="";break;case"fade":XN.effect.fadeIn(element,function(e){e.style.display=""});break;case"slide":XN.effect.slideOpen(element);break;case"delay":setTimeout(function(){element.style.display=""},2e3);break}return element};this.hide=function(element,effect){element=exports.$(element);if(element.style.display=="none")return;if(!_effect||!effect)effect="normal";switch(effect){case"normal":element.style.display="none";break;case"fade":XN.effect.fadeOut(element,function(e){e.style.display="none"});break;case"slide":XN.effect.slideClose(element);break;case"delay":setTimeout(function(){element.style.display="none"},2e3);break}return element};this.remove=function(element){var element=exports.$(element);if(element){element.parentNode.removeChild(element)}return element};this.setStyle=function(element,style){var element=exports.$(element);element.style.cssText+=";"+style;return element};this.getStyle=function(element,style){element=exports.$(element);style=style=="float"?"cssFloat":style;var value=element.style[style];if(!value){var css=document.defaultView.getComputedStyle(element,null);value=css?css[style]:null}if(style=="opacity")return value?parseFloat(value):1;return value=="auto"?null:value};this.addEvent=function(){var _event=sys.modules["XN.event"];if(_event){_event.addEvent.apply(null,arguments)}else{throw new Error("请先导入XN.event模块，再使用XN.event.addEvent")}return arguments[0]};this.delEvent=function(){var _event=sys.modules["XN.event"];if(_event){_event.delEvent.apply(null,arguments)}else{throw new Error("请先导入XN.event模块，再使用XN.event.delEvent")}return arguments[0]};this._eventListeners={};this.matchesSelector=function(element,selector){return Sizzle.matches(selector,[element]).length>0};this.getData=function(element,name){return element.getAttribute("data-"+name)};this.delegate=function(element,selector,type,callback){exports.$(element).addEvent(type,function(e){var ele=exports.$(e.target||e.srcElement);do{if(ele&&ele.matchesSelector(selector))callback.call(ele,e)}while(ele=exports.$(ele.parentNode))})};this.addChild=function(father,child){father=exports.$(father);if(XN.isString(child)||XN.isNumber(child)){var element=String(child).charAt(0)=="#"?Sizzle(child)[0]:child;if(XN.isString(child)||XN.isNumber(child)){father.innerHTML+=element}else{father.appendChild(element)}}else if(XN.isElement(child)){father.appendChild(child)}else if(child.iAmUIelement){father.appendChild(exports.$(child.frame))}else if(child.iAmXmlhttp){child.fillTo=father;father.startLoading()}return father};this.delChild=function(father,child){child=exports.$(child);child.remove();return exports.$(father)};this.setContent=function(element,c){element=exports.$(element);element.innerHTML="";element.addChild(c);return element};this.setHTML=function(element,str){if(needGetDom){element.innerHTML="";var nodes=getDom(str);while(nodes.firstChild)element.appendChild(nodes.firstChild)}else{element.innerHTML=str}};this.getPosition=function(element,parentE){parentE=exports.$(parentE)||document.body;element=exports.$(element);var rl=0;var rt=0;var p=element;try{while(p&&p!=parentE){rl+=p.offsetLeft;rt+=p.offsetTop;p=p.offsetParent}}catch(e){}return{left:rl,top:rt}};this.realLeft=function(element,p){return exports.getPosition(element,p||null).left};this.realTop=function(element,p){return exports.getPosition(element,p||null).top};this.appendHTML=function(element,str,getElements){element=exports.$(element);var f=document.createDocumentFragment();var t=exports.$element("div");t.innerHTML=str;while(t.firstChild){f.appendChild(t.firstChild)}var tmp=XN.array.build(f.childNodes);element.appendChild(f);if(getElements)return tmp;return element};this.html=function(element,str){element.innerHTML=str};this.parent=function(element,selector){while(element){if(!element.parentNode){return null}element=exports.$(element.parentNode);if(element.matchesSelector(selector))return element}};this.startLoading=function(element,msg){element=exports.$(element);element.innerHTML='<center><img src="'+XN.env.staticRoot+'img/indicator.gif" />'+(msg||"加载中...")+"</center>";return element};this.stopLoading=function(element){element=exports.$(element);return element};this.eval_inner_JS=function(el){var js=exports.$(el).getElementsByTagName("script");XN.array.each(js,function(i,s){if(s.src){XN.loadFile(s.src)}else{var inner_js="__inner_js_out_put = [];\n";inner_js+=s.innerHTML.replace(/document\.write/g,"__inner_js_out_put.push");eval(inner_js);if(__inner_js_out_put.length!==0){var tmp=document.createDocumentFragment();exports.$(tmp).appendHTML(__inner_js_out_put.join(""));s.parentNode.insertBefore(tmp,s)}}})};var sign={},build=XN.array.build;this.extend=function(element){if(element._extended){return element}var cache=exports.extend.cache;for(var i=0,m,len=_extends.length;i<len;i++){m=_extends[i];if(exports[m]!=null&&!(m in element)){element[m]=cache.findOrStore(exports[m])}}element._extended=sign;return element};this.extend.cache={findOrStore:function(value){if(!this[value]){this[value]=function(){var args=build(arguments);args.unshift(this);return value.apply(null,args)}}return this[value]}};if(browser.IE){this.getStyle=function(element,style){element=exports.$(element);style=style=="float"||style=="cssFloat"?"styleFloat":style;var value=element.style[style];if(!value&&element.currentStyle)value=element.currentStyle[style];if(style=="opacity"){if(value=(element.getStyle("filter")||"").match(/alpha\(opacity=(.*)\)/)){if(value[1]){return parseFloat(value[1])/100}}return 1}if(value=="auto"){if((style=="width"||style=="height")&&element.getStyle("display")!="none"){return element["offset"+(style=="width"?"Width":"Height")]+"px"}return null}return value}}if(document.addEventListener){this.setOpacity=function(element,opacity){element=exports.$(element);element.style.opacity=opacity;return element}}else{this.setOpacity=function(element,opacity){element=exports.$(element);element.style.zoom=1;element.style.filter="Alpha(opacity="+Math.ceil(opacity*100)+")";return element}}this.$element=function(tag){return exports.$(document.createElement(tag))};this.$=function(id){var element;if(id==null)element=null;else if(XN.isString(id)||XN.isNumber(id))element=Sizzle("#"+id)[0];else element=id;if(element)exports.extend(element);return element||null}});object.add("XN.template","XN.env",function(exports,XN){this.smediaPlayer=function(o){return['<object classid="CLSID:22d6f312-b0f6-11d0-94ab-0080c74c7e95" width="'+(o.width||"352")+'" height="'+(o.height||"70")+'" >\n','<param name="autostart" value="'+(o.autostart||"1")+'" >\n','<param name="showstatusbar" value="'+(o.showstatusbar||"1")+'">\n','<param name="filename" value="'+o.filename+'">\n','<embed type="application/x-oleobject" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=5,1,52,701" ','flename="mp"','autostart="'+(o.autostart||"1")+'" showstatusbar="'+(o.showstatusbar||"1")+'" ','src="'+o.filename+'" width="'+(o.width||"352")+'" height="'+(o.height||"70")+'"></embed>'].join("")
};this.flashPlayer=function(o){return'<embed allowScriptAccess="'+(o.allowScriptAccess||"none")+'" src="'+XN.env.staticRoot+"/swf/player.swf?url="+encodeURIComponent(o.filename)+"&Rwid="+(o.width||"450")+"&Autoplay="+(o.autostart||"1")+'" wmode="'+(o.wmode||"transparent")+'" loop="false" menu="false" quality="high" scale="noscale" salign="lt" bgcolor="#ffffff" width="'+(o.width||"450")+'" height="'+(o.height||"30")+'" align="middle"  allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" />'};this.flash=function(o){return'&nbsp;<embed src="'+o.filename+'" type="application/x-shockwave-flash" '+'width="'+(o.width||"320")+'" height="'+(o.height||"240")+'" allowFullScreen="true" wmode="'+(o.wmode||"transparent")+'" allowNetworking="'+(o.allowNetworking||"all")+'" allowScriptAccess="'+(o.allowScriptAccess||"sameDomain")+'" flashvars="'+o.flashVars+'"></embed>'}});object.add("XN.form","sys, XN, XN.event, XN.json, XN.array, XN.element, XN.string, XN.env",function(exports,sys,XN){this.fillWithJSON=function(form,json){form=XN.element.$(form);exports.fillWithArray(form,XN.json.parse(json))};this.fillWithArray=function(form,a){form=XN.element.$(form);for(var p in a){exports.Element.setValue(p,a[p],form)}};this.setValue=function(element,value){return exports.Element.setValue(element,value)};this.getValue=function(element){return exports.Element.getValue(element)};this.serialize=function(form,type){return exports.serializeElements(exports.getElements(form),type||"string")};this.serializeElements=function(elements,type,encode){type=type||"array";if(XN.isUndefined(encode)){encode=false}var data=[],_key,_value;XN.array.each(elements,function(i,v){if(!v.disabled&&v.name){_key=v.name;_value=encode?encodeURIComponent(exports.Element.getValue(v)):exports.Element.getValue(v);if(_value!==null){if(_key in data){if(!XN.isArray(data[_key])){data[_key]=[data[_key]]}data[_key].push(_value)}else{data[_key]=_value}}}});if(type=="array"){return data}else if(type=="string"){return XN.array.toQueryString(data)}else if(type=="hash"){var tmp={};for(var p in data){if(!XN.isFunction(data[p])){tmp[p]=data[p]}}return tmp}};this.getElements=function(form){form=XN.element.$(form);var elements=[];var all=form.getElementsByTagName("*");XN.array.each(all,function(i,v){if(!XN.isUndefined(exports.Element.Serializers[v.tagName.toLowerCase()])){elements.push(v)}});return elements};this.Element={getValue:function(element){element=XN.element.$(element);var method=element.tagName.toLowerCase();return exports.Element.Serializers[method](element)},setValue:function(element,value,form){if(form){element=form[element];if(XN.isElement(element)&&element.tagName.toLowerCase()=="select"){exports.Element.Serializers["select"](element,value)}else if(XN.isElement(element)){exports.Element.Serializers[element.tagName.toLowerCase()](element,value)}else if(element[0]){var method=element[0].tagName.toLowerCase();for(var i=0,j=element.length;i<j;i++){exports.Element.Serializers[method](element[i],value[i]||value||"")}}return element}else{element=XN.element.$(element);var method=element.tagName.toLowerCase();exports.Element.Serializers[method](element,value);return element}}};this.Element.Serializers={input:function(element,value){switch(element.type.toLowerCase()){case"checkbox":case"radio":return exports.Element.Serializers.inputSelector(element,value);default:return exports.Element.Serializers.textarea(element,value)}},inputSelector:function(element,value){if(XN.isUndefined(value)){return element.checked?element.value:null}else{element.checked=!!value}},textarea:function(element,value){if(XN.isUndefined(value)){return element.value}else{element.value=value}},select:function(element,index){if(XN.isUndefined(index)){return this[element.type=="select-one"?"selectOne":"selectMany"](element)}else{var opt,value,single=!XN.isArray(index);for(var i=0,length=element.length;i<length;i++){opt=element.options[i];value=this.optionValue(opt);if(single){if(value==index){opt.selected=true;return}}else{opt.selected=XN.array.include(index,value)}}}},selectOne:function(element){var index=element.selectedIndex;return index>=0?this.optionValue(element.options[index]):null},selectMany:function(element){var values=[],length=element.length;if(!length){return null}for(var i=0;i<length;i++){var opt=element.options[i];if(opt.selected){values.push(this.optionValue(opt))}}return values},optionValue:function(opt){return opt.value||opt.text}};$F=function(id,type){var el=XN.element.$(id);if(el.tagName.toLowerCase()=="form"){return exports.serialize(el,type)}else{return exports.getValue(el)}};this._helper=function(el){el=XN.element.$(el);try{if(el._helper)return el._helper}catch(e){console.log(arguments.callee.caller)}el._helper=this;this.element=el};this._helper.prototype={maxSize:9999,limit:function(max,cut){var This=this;this.maxLength=max;if(XN.isUndefined(cut)){cut=true}this._limit_cut=cut;if(this._limit){return this}this._limit=true;var el=this.element;XN.event.addEvent(el,"focus",check);XN.event.addEvent(el,"keyup",check);function check(){This.limitCheck()}return this},limitCheck:function(){var This=this;var el=this.element;setTimeout(function(){var v=el.value;if(v.length>This.maxLength){if(This._limit_cut)el.value=v.substr(0,This.maxLength);This.fireEvent("overmaxLength")}else{This.fireEvent("normalLength")}This.fireEvent("checkover")},0)},count:function(show,showMax){if(this._count){return this}this._count=true;var This=this,show=XN.element.$(show);if(XN.isUndefined(showMax)){showMax=true}if(!this.maxLength){showMax=false}var el=this.element;this.addEvent("overmaxLength",function(){show.addClass("full")});this.addEvent("normalLength",function(){show.delClass("full")});this.addEvent("checkover",update);function update(){show.innerHTML=el.value.length+(showMax?"/"+This.maxLength:"")}return this},countSize:function(show,max,showMax){return this.limit(max).count(show,showMax)},getRealValue:function(){var el=this.element;if(el.value==this._defaultValue||el.value==el.getAttribute("placeholder")){return""}return el.value},reloadDefaultValue:function(){this.element.value=this._defaultValue;this.element.style.color="#888"},defaultValue:function(v){var This=this;var el=this.element;v=v||el.value;if(!XN.isUndefined(this._defaultValue)&&el.value==this._defaultValue){el.value=v}this._defaultValue=v;if(this._default){return this}this._default=true;if(document.activeElement!==el){el.value=v}el.style.color="#888";XN.event.addEvent(el,"focus",function(){if(el.value==This._defaultValue){el.value="";el.style.color="#333"}});XN.event.addEvent(el,"blur",function(){if(el.value==""){el.value=This._defaultValue;el.style.color="#888"}});return this},focus:function(position){var el=this.element;if(XN.isUndefined(position)){position=el.value.length}try{if(el.setSelectionRange){el.focus();el.setSelectionRange(el.value.length,position)}else if(el.createTextRange){var range=el.createTextRange();range.moveStart("character",position);range.collapse(true);range.select();el.focus()}else{el.focus()}}catch(e){}return this},onEnter:function(callBack){var el=this.element;var isTextArea=el.tagName.toLowerCase()=="textarea";XN.event.addEvent(el,"keydown",function(e){e=e||window.event;if(e.keyCode==13){if(isTextArea&&!e.ctrlKey){return false}XN.event.stop(e);callBack(el);return false}},false);return this},onEsc:function(callBack){var el=this.element;XN.event.addEvent(el,"keydown",function(e){e=e||window.event;if(e.keyCode==27){XN.event.stop(e);callBack(el);return false}},false);return this},autoResize:function(min,max){var This=this,el=this.element,type;this.minSize=min||this.minSize;this.maxSize=max||this.maxSize;if(el.tagName.toLowerCase()=="textarea"){this.resizeType="height"}else{this.resizeType="width"}if(!exports.inputShadow){var d=XN.element.$element("div");d.setStyle("position:absolute;left:-99999px;top:-99999px");document.body.appendChild(d);exports.inputShadow=d}this.shadow=exports.inputShadow;setTimeout(function(){if(min){return}This.minSize=type=="width"?el.offsetWidth:el.offsetHeight},10);el.style.overflow="hidden";XN.event.addEvent(el,"focus",function(){This.timer=setInterval(This._resize.bind(This),200)});XN.event.addEvent(el,"blur",function(){clearInterval(This.timer);This.timer=null});return this},_resize:function(){var el=this.element,sh=this.shadow,oh,type=this.resizeType;sh.style.fontSize=el.getStyle("fontSize");var fs=parseInt(el.getStyle("fontSize"),0);sh.style.fontFamily=el.getStyle("fontFamily");type=="width"?sh.style.height=el.offsetHeight:sh.style.width=el.offsetWidth;sh.innerHTML=XN.string.escapeHTML(el.value).replace(/\r\n/gm,"<br>").replace(/\r/gm,"<br>").replace(/\n/gm,"<br>");type=="width"?oh=sh.offsetWidth:oh=sh.offsetHeight+fs+3;if(oh>this.minSize&&oh<this.maxSize){el.style[type]=oh+"px"}else if(oh<this.minSize){el.style[type]=this.minSize+"px"}else if(oh>this.maxSize){el.style[type]=this.maxSize+"px"}},cursorPosition:function(){var textBox=this.element;var start=0,end=0;try{if(typeof textBox.selectionStart=="number"){start=textBox.selectionStart;end=textBox.selectionEnd}else if(document.selection){var range=document.selection.createRange();if(range.parentElement()==textBox){var range_all=document.body.createTextRange();range_all.moveToElementText(textBox);for(start=0;range_all.compareEndPoints("StartToStart",range)<0;start++){range_all.moveStart("character",1)}for(var i=0;i<=start;i++){if(textBox.value.charAt(i)=="\n"){start++}}var range_all=document.body.createTextRange();range_all.moveToElementText(textBox);for(end=0;range_all.compareEndPoints("StartToEnd",range)<0;end++){range_all.moveStart("character",1)}for(var i=0;i<=end;i++){if(textBox.value.charAt(i)=="\n"){end++}}}}}catch(e){}return{start:start,end:end,item:[start,end]}}};this._helper.prototype.setDefaultValue=this._helper.prototype.defaultValue;XN.event.enableCustomEvent(this._helper.prototype);this.help=function(id){return new exports._helper(id)};this.inputHelper=this.textAreaHelper=this.help;$CursorPosition=function(el){return exports.help(el).cursorPosition()};this.userInfoAutoComplete=function(id,type){var _ui=sys.modules["XN.ui"];if(_ui){return _ui.userInfoAutoComplete(id,type)}else{throw new Error("请在use中导入XN.ui模块，才可使用XN.form下的此方法")}}});object.add("XN.effect","XN.func, XN.element, XN.event",function(exports,XN){this.fadeIn=function(element,callBack){if(element.fadetimer){return}callBack=callBack||XN.func.empty;var op=0;element.setOpacity(0);element.style.display="";element.fadetimer=setInterval(function(){XN.element.setOpacity(element,op+=.2);if(op>=1){clearInterval(element.fadetimer);element.fadetimer=null;callBack(element)}},60)};this.fadeOut=function(element,callBack){if(element.fadetimer){return}callBack=callBack||XN.func.empty;var op=1;element.setOpacity(1);element.fadetimer=setInterval(function(){XN.element.setOpacity(element,op-=.2);if(op<=0){clearInterval(element.fadetimer);element.fadetimer=null;callBack(element);element.setOpacity(1)}},60)};this.gradient=function(element,r,g,b,callBack){if(element.gradientTimer){return}callBack=callBack||XN.func.empty;element.style.backgroundColor="#fff";element.style.backgroundColor="rgb("+r+","+g+","+b+")";element.gradientTimer=setInterval(function(){b+=10;element.style.backgroundColor="rgb("+r+","+g+","+(b>255?255:b)+")";if(b>255){clearInterval(element.gradientTimer);element.gradientTimer=null;callBack(element)}},60)};this.slideOpen=function(element){if(element.slidetimer){return}if(!element.slideHeight){var _position=element.getStyle("position");element.setStyle("position:absolute;left:-99999px;top:-99999px;");element.show();element.slideHeight=element.offsetHeight;element.hide();element.setStyle("position:"+_position+";left:auto;top:auto;")}var eh=element.slideHeight,h=0;var step=parseInt(eh/10);element.style.height="0px";element.style.display="";element.style.overflow="hidden";element.slidetimer=setInterval(function(){element.style.height=(h+=step)+"px";if(h>=eh){clearInterval(element.slidetimer);element.slidetimer=null;element.style.height=eh;element.style.overflow=element.slideOverflow}},50)};this.slideClose=function(element){if(element.slidetimer){return}var eh=element.offsetHeight,h=eh;element.slideHeight=eh;element.slideOverflow=element.getStyle("overflow");element.style.overflow="hidden";var step=parseInt(eh/10);element.slidetimer=setInterval(function(){element.style.height=(h-=step)+"px";if(h<=0){clearInterval(element.slidetimer);element.slidetimer=null;element.style.display="none";element.style.height=eh;element.style.overflow=element.slideOverflow}},50)};this.scrollTo=function(element,speed,callBack){if(element.scrolltimer){return}speed=speed||10;callBack=callBack||XN.func.empty;var d=element.realTop();var i=XN.event.winHeight();var h=document.body.scrollHeight;var a=XN.event.scrollTop();var offsetTop=null;if(d>a){if(d+element.offsetHeight<i+a)return;element.scrolltimer=setInterval(function(){a+=Math.ceil((d-a)/speed)||1;window.scrollTo(0,a);if(a==d){clearInterval(element.scrolltimer);element.scrolltimer=null}},10)}else{element.scrolltimer=setInterval(function(){a+=Math.ceil((d-a)/speed)||-1;window.scrollTo(0,a);if(a==d){clearInterval(element.scrolltimer);element.scrolltimer=null}},10)}};(function(scope){var Tween={linear:function(t,b,c,d){return c*t/d+b},easeIn:function(t,b,c,d){return c*(t/=d)*t+b},easeOut:function(t,b,c,d){return-c*(t/=d)*(t-2)+b},easeBoth:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t+b}return-c/2*(--t*(t-2)-1)+b},easeInStrong:function(t,b,c,d){return c*(t/=d)*t*t*t+b},easeOutStrong:function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},easeBothStrong:function(t,b,c,d){if((t/=d/2)<1){return c/2*t*t*t*t+b}return-c/2*((t-=2)*t*t*t-2)+b},backIn:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158}return c*(t/=d)*t*((s+1)*t-s)+b},backOut:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158}return c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},backBoth:function(t,b,c,d,s){if(typeof s=="undefined"){s=1.70158}if((t/=d/2)<1){return c/2*(t*t*(((s*=1.525)+1)*t-s))+b}return c/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+b},bounceIn:function(t,b,c,d){return c-Tween["bounceOut"](d-t,0,c,d)+b},bounceOut:function(t,b,c,d){if((t/=d)<1/2.75){return c*(7.5625*t*t)+b}else if(t<2/2.75){return c*(7.5625*(t-=1.5/2.75)*t+.75)+b}else if(t<2.5/2.75){return c*(7.5625*(t-=2.25/2.75)*t+.9375)+b}return c*(7.5625*(t-=2.625/2.75)*t+.984375)+b},bounceBoth:function(t,b,c,d){if(t<d/2){return Tween["bounceIn"](t*2,0,c,d)*.5+b}return Tween["bounceOut"](t*2-d,0,c,d)*.5+c*.5+b}};var _Tweening=function(){customEvent(this.onTweening,this);if(this.current>=this.frames){this.stop();customEvent(this.onComplete,this);this.tweening=false;return}this.current++};var customEvent=function(func,scope){var args=Array.prototype.slice.call(arguments);args=args.slice(2);if(typeof func=="function"){try{return func.apply(scope||this,args)}catch(e){scope.errors=scope.errors||[];scope.errors.push(e)}}};scope.Motion=function(tween,duration){this.duration=duration||1e3;this.tween=tween||"linear"};scope.Motion.getTweens=function(){return Tween};scope.Motion.prototype={init:function(){customEvent(this.onInit,this);this.fps=this.fps||35;this.frames=Math.ceil(this.duration/1e3*this.fps);if(this.frames<1)this.frames=1;var f="function"==typeof this.tween?this.tween:Tween[this.tween]||Tween["linear"];this.equation=function(from,to){return f(this.current/this.frames*this.duration,from,to-from,this.duration)};this.current=this.tweening=1},start:function(){this.init();customEvent(this.onStart,this);var _self=this,d=this.duration/this.frames;this.timer=setInterval(function(){_Tweening.call(_self)},d)},stop:function(){if(this.timer){clearInterval(this.timer)}this.tweening=false}}})(exports)});object.add("XN.ui","XN, XN.array, XN.element, XN.event, XN.browser, XN.util, XN.dom, XN.func, XN.string, XN.env, XN.net, XN.json, XN.form, XN.datasource",function(exports,XN){(function(){exports.element={frame:null,iAmUIelement:true};XN.array.each(["addClass","delClass","show","hide","remove"],function(i,v){exports.element[v]=function(){XN.element[v].apply(null,[this.frame].concat(XN.array.build(arguments)))}});exports.container={container:null};XN.array.each(["addChild","delChild","setContent"],function(i,v){exports.container[v]=function(){XN.element[v].apply(null,[this.container].concat(XN.array.build(arguments)))}});XN.$extend(exports.container,exports.element)})();this.Element=this.element;this.Content=this.container;(function(ns){var UI=exports;var addEvent=XN.event.addEvent;var DEBUG=true;function log(s){if(DEBUG)XN.log(XN.isString(s)?"xn.ui.button:"+s:s)}ns.button=function(params){XN.$extend(this,params);this.init()};ns.button.prototype=XN.$extend({},UI.Element);ns.button.prototype.text=null;ns.button.prototype.className="";ns.button.prototype.disableClassName="gray";ns.button.prototype.init=function(){var This=this;var el;if(this.getConfig("el")){el=XN.element.$(this.getConfig("el"))}else{el=XN.element.$element("input")}this.frame=el;el.type="button";this.addClass("input-submit");this.addClass(this.getConfig("className"));this.setText(this.getConfig("text"));addEvent(el,"click",function(e){if(This.onclick)This.onclick(e)},false)};ns.button.prototype.getConfig=function(key){if(key=="el")return this.id;return this[key]};ns.button.prototype.getEl=function(){return this.frame};ns.button.prototype.setText=function(text){this.text=text;this.getEl().value=text};ns.button.prototype.disable=function(){var el=this.getEl();el.blur();el.disabled=true;el.addClass(this.getConfig("disableClassName"))};ns.button.prototype.enable=function(){var el=this.getEl();el.disabled=false;el.delClass(this.getConfig("disableClassName"))};ns.button.prototype.focus=function(){this.getEl().focus()};ns.button.prototype.blur=function(){this.getEl().blur()}})(this);(function(){var rl="realLeft",rt="realTop",ow="offsetWidth",oh="offsetHeight";exports.fixPositionMethods={"1-1":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+"px";f.style.top=y+el[rt]()-p[rt]()+"px"},"1-2":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()-f[ow]+"px";f.style.top=y+el[rt]()-p[rt]()+"px"},"1-3":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()-f[ow]+"px";f.style.top=y+el[rt]()-p[rt]()-f[oh]+"px"},"1-4":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+"px";f.style.top=y+el[rt]()-p[rt]()-f[oh]+"px"},"2-1":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+el[ow]+"px";f.style.top=y+el[rt]()-p[rt]()+"px"},"2-2":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+el[ow]-f[ow]+"px";f.style.top=y+el[rt]()-p[rt]()+"px"},"2-3":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+el[ow]-f[ow]+"px";f.style.top=y+el[rt]()-p[rt]()-f[oh]+"px"},"2-4":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+el[ow]+"px";f.style.top=y+el[rt]()-p[rt]()-f[oh]+"px"},"3-1":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+el[ow]+"px";f.style.top=y+el[rt]()-p[rt]()+el[oh]+"px"},"3-2":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+el[ow]-f[ow]+"px";f.style.top=y+el[rt]()+el[oh]+"px"},"3-3":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+el[ow]-f[ow]+"px";f.style.top=y+el[rt]()-p[rt]()+el[oh]-f[oh]+"px"},"3-4":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+el[ow]+"px";f.style.top=y+el[rt]()-p[rt]()+el[oh]-f[oh]+"px"},"4-1":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+"px";f.style.top=y+el[rt]()-p[rt]()+el[oh]+"px"},"4-2":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()-f[ow]+"px";f.style.top=y+el[rt]()-p[rt]()+el[oh]+"px"},"4-3":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()-f[ow]+"px";f.style.top=y+el[rt]()-p[rt]()+el[oh]-f[oh]+"px"},"4-4":function(f,el,x,y,p){f.style.left=x+el[rl]()-p[rl]()+"px";f.style.top=y+el[rt]()-p[rt]()+el[oh]-f[oh]+"px"}}})();this.fixPositionElement=function(params){var This=this;this.config={tagName:"div",useIframeInIE6:true};XN.$extend(this.config,params);var f,x,y;if(this.getConfig("id")){this.frame=f=XN.element.$(this.getConfig("id"));x=f.realLeft();y=f.realTop()}else if(this.getConfig("tagName")){this.frame=this.container=f=XN.element.$element(this.getConfig("tagName"))}else{return}this.container=XN.element.$element("div");this.frame.appendChild(this.container);XN.array.each(["alignWith","alignType","offsetX","offsetY","alignParent"],function(i,v){This[v]=This.getConfig(v)||This[v]});XN.element.setStyle(f,"position:absolute;z-index:10001;left:-9999px;top:-9999px");if(!XN.element.$(this.alignParent)){this.alignParent=XN.element.$(document.body)}XN.element.$(this.alignParent).appendChild(this.frame);if(XN.browser.IE6&&this.getConfig("useIframeInIE6")||this.getConfig("addIframe")){var iframe;this._iframe=iframe=XN.element.$element("iframe");iframe.frameBorder=0;iframe.scrolling="no";iframe.setStyle("position:absolute;border:0px;left:0px;top:0px;z-index:-1;");if(XN.browser.Gecko)iframe.setAttribute("style","position:absolute;border:0px;left:0px;top:0px;z-index:-1;");if(XN.browser.IE)iframe.style.filter="progid:DXImageTransform.Microsoft.Alpha(style=0,opacity=0)";this.frame.appendChild(iframe)}if(XN.element.visible(f))this.show();f.style.display="block"};this.fixPositionElement.prototype=XN.$extend({},this.container);XN.$extend(this.fixPositionElement.prototype,{alignWith:null,alignType:"4-1",offsetX:0,offsetY:0,alignParent:"dropmenuHolder",left:null,top:null,_isShow:false,getConfig:function(key){return this.config[key]},setOffsetX:function(x){this.offsetX=x;this.refresh();return this},setOffsetY:function(y){this.offsetY=y;this.refresh();return this},setAlignType:function(t){this.alignType=t;this.refresh();return this},setAlignParent:function(p){this.alignParent=p;XN.element.$(this.alignParent).appendChild(this.frame);this.refresh();return this},refresh:function(){if(this.visible()){this.show()}else{this.hide()}return this},visible:function(){return this._isShow},show:function(){this._isShow=true;this.frame.show();if(this.alignWith){this._moveToElement(this.alignWith)}else{var x=this.left===null?parseInt((XN.element.$(this.alignParent).offsetWidth-this.frame.offsetWidth)/2,10):this.left;var y=this.top===null?XN.event.scrollTop()+200:this.top;this._moveToPosition(x,y)}if(this._iframe){try{this._iframe.style.height=this.frame.offsetHeight-2+"px";this._iframe.style.width=this.frame.offsetWidth+"px"}catch(e){}}return this},hide:function(){this._isShow=false;var f=this.frame;f.style.left="-9999px";f.style.top="-9999px";return this},moveTo:function(x,y){if(!x&&!y)return;if(XN.isNumber(x)){this.left=x;this.alignWith=null}else if(XN.isString(x)||XN.isElement(x)){this.alignWith=XN.element.$(x)}if(XN.isNumber(y)){this.top=y;this.alignWith=null}this.refresh();return this},setX:function(x){this.moveTo(x);return this},setY:function(y){this.moveTo(null,y);return this},setIndex:function(i){this.frame.style.zIndex=i;return this},_moveToElement:function(el){exports.fixPositionMethods[this.alignType](this.frame,XN.element.$(el),this.offsetX,this.offsetY,XN.element.$(this.alignParent))},_moveToPosition:function(x,y){if(x){this.frame.style.left=x+"px"}if(y){this.frame.style.top=y+"px"}}});(function(){var fixProto=exports.fixPositionElement.prototype;var Event=XN.event;var currentDialog=null;exports.clearDialog=function(){if(currentDialog&&currentDialog.parent)currentDialog.remove()};exports.dialog=function(params){var This=this;currentDialog=this;exports.fixPositionElement.call(this,params);this.container=XN.element.$element("div");this.frame.appendChild(this.container);if(this.getConfig("HTML"))this.setContent(this.getConfig("HTML"));else this.setContent(this.buildHTML());this.dialogContainer=XN.element.$("ui_dialog_container");this.header=this.title=XN.element.$("ui_dialog_header");this.body=this.msg=this.message=XN.element.$("ui_dialog_body");this.footer=XN.element.$("ui_dialog_footer");this.closeButton=XN.element.$("ui_dialog_close");this.header.addChild=this.body.addChild=this.footer.addChild=function(s){XN.element.addChild(this,s);setTimeout(function(){This.refresh()},0)};this.dialogContainer.removeAttribute("id");this.header.removeAttribute("id");this.body.removeAttribute("id");this.footer.removeAttribute("id");this.closeButton.removeAttribute("id");if(this.getConfig("showCloseButton")){this.closeButton.show();XN.event.addEvent(this.closeButton,"click",function(e){This.hide();This.fireEvent("close",e)})}this.frame.style.zIndex=1e4;this.setWidth(this.getConfig("width")||400);if(this.getConfig("height"))this.setHeight(this.getConfig("height"));XN.array.each(["title","msg","message","header","body","footer"],function(i,v){if(This.getConfig(v))This[v].setContent(This.getConfig(v))});if(this.getConfig("type"))this.setType(this.getConfig("type"));this._buttons=[];XN.event.addEvent(this.footer,"click",function(e){This._parseButtonEvent(e||window.event)});XN.util.hotKey.add("27",this._hotKeyEvent,this);if(this.getConfig("modal")===true)XN.dom.disable();if(this.getConfig("noHeader"))this.header.hide();if(this.getConfig("noFooter"))this.footer.hide();if(this.getConfig("noPadding"))this.body.addClass("no_padding")};exports.dialog.prototype=XN.$extend({},fixProto);XN.$extend(exports.dialog.prototype,{header:null,body:null,footer:null,_iframe:null,_buttons:null,buildHTML:function(){return['<table id="ui_dialog_container" style="width: 100%; height: 100%;" class="pop_dialog_table">',"<tbody>","<tr>",'<td class="pop_topleft"></td>','<td class="pop_border"></td>','<td class="pop_topright"></td>',"</tr>","<tr>",'<td class="pop_border"></td>','<td class="pop_content">','<h2><span id="ui_dialog_header"></span><a style="display:none;" class="close-button" id="ui_dialog_close" href="#nogo" onclick="return false;">关闭</a></h2>','<div class="dialog_content">','<div id="ui_dialog_body" class="dialog_body"></div>','<div id="ui_dialog_footer" class="dialog_buttons"></div>',"</div>","</td>",'<td class="pop_border"></td>',"</tr>","<tr>",'<td class="pop_bottomleft"></td>','<td class="pop_border"></td>','<td class="pop_bottomright"></td>',"</tr>","</tbody>","</table>"].join("")},getButton:function(text){var buttons=this._buttons;for(var i=buttons.length-1;i>=0;i--){if(buttons[i].text==text)return buttons[i]}return null},addButton:function(b){var o={text:b.text,_onclickForDialog:b.onclick};if(b.className)o.className=b.className;var button=new exports.button(o);button.frame.setAttribute("dialog","1");this._buttons.push(button);this.footer.addChild(button);return this},delButton:function(b){if(XN.isString(b))b=this.getButton(b);this.footer.delChild(b);return this},_preventHide:false,preventHide:function(){this._preventHide=true;return this},setAutoHide:function(boo){this._preventHide=!boo;return this},_parseButtonEvent:function(e){var el=Event.element(e);if(el.tagName.toLowerCase()!=="input"||el.type!=="button")return;if(!el.getAttribute("dialog"))return;var button=this.getButton(el.value);if(button&&button._onclickForDialog){button._onclickForDialog.call(this,e)}if(this._preventHide){this._preventHide=true}else{this.hide()}},_hotKeyEvent:function(){this.hide()},setType:function(t){if(t=="normal"){this.frame.delClass("errorDialog")}else if(t=="error"){this.frame.addClass("errorDialog")}return this},setWidth:function(w){if(!w)return this;if(w=="auto"){this.frame.style.width="auto";this.dialogContainer.style.height="";this.dialogContainer.style.width="";this.width=this.frame.offsetWidth}else{this.width=w;this.frame.style.width=w+"px";this.dialogContainer.style.height="100%";this.dialogContainer.style.width="100%"}this.refresh();return this},setHeight:function(h){if(!h)return this;this.hegith=h;this.frame.style.height=h+"px";this.refresh();return this},resizeTo:function(w,h){this.setWidth(w);this.setHeight(h);return this},clear:function(){this.header.setContent("");this.body.setContent("");this.footer.setContent("");this._buttons=[];return this},setTitle:function(s){this.header.setContent(s);return this},setBody:function(s){this.body.setContent(s);return this},remove:function(keepModal){XN.util.hotKey.del("27",this._hotKeyEvent);exports.element.remove.call(this);if(!keepModal)XN.dom.enable();return this},refresh:function(){if(this.visible())fixProto.show.apply(this,arguments);else this.hide();return this},reLocate:function(){var w=this.frame;var s=XN.event.scrollTop();var newTop=(XN.event.winHeight()-w.offsetHeight)/2;newTop=newTop<=0?s:newTop+s;w.style.top=newTop+"px"},show:function(){this._clearHideTimer();if(this.getConfig("modal")===true)XN.dom.disable();fixProto.show.apply(this,arguments);this.fireEvent("show");return this},hide:function(){this._clearHideTimer();fixProto.hide.apply(this,arguments);XN.dom.enable();this.fireEvent("hide");return this},_hideTimer:null,_clearHideTimer:function(){if(this._hideTimer){clearTimeout(this._hideTimer);this._hideTimer=null}},autoHide:function(t){var This=this;this._hideTimer=setTimeout(function(){This.hide()},t*1e3);return this}});XN.event.enableCustomEvent(exports.dialog.prototype)})();this.panel=this.dialog;this.dialog.prototype.setHeader=function(h){if(h&&h!==""){this.header.addChild(h)}else{this.header.innerHTML=""}};this.dialog.prototype.setFooter=function(f){if(f&&f!==""){this.footer.addChild(f)}else{this.footer.innerHTML=""}};this.menu=function(params){var This=this;this.config={alignType:"4-1",barOnshowClass:"",tagName:"div",disalbeButtonClickEvent:true,fireOn:"click",keep:.2,useIframeInIE6:true,effectTime:50};XN.$extend(this.config,params);var frame;if(this.getConfig("text")){this.frame=frame=XN.element.$element(this.getConfig("tagName"));frame.setContent(this.getConfig("text"))}else if(this.getConfig("button")){this.frame=frame=XN.element.$(this.getConfig("button"))}else return false;this._alignType=this.getConfig("alignType");if(this.getConfig("menu")){XN.element.$(this.getConfig("menu")).hide();this.menu=new exports.fixPositionElement({id:this.getConfig("menu"),alignType:this._alignType,alignWith:this.getConfig("alignWith")||this.frame,addIframe:this.getConfig("addIframe"),useIframeInIE6:this.getConfig("useIframeInIE6")});this.container=this.menu.frame;this._canAddSubMenu=false}else{var dt=XN.element.$element("div");dt.hide();this.menu=new exports.fixPositionElement({id:dt,alignType:this._alignType,alignWith:this.getConfig("alignWith")||this.frame,addIframe:this.getConfig("addIframe"),useIframeInIE6:this.getConfig("useIframeInIE6")});this.container=XN.element.$element("div");this._menu.setContent(this.container)}this.menu.setIndex(10001);XN.event.addEvent(this.menu.frame,"click",function(e){e=e||window.event;This._frameOnClick(e)},false);this.menu.setOffsetX(this.getConfig("offsetX")||0);this.menu.setOffsetY(this.getConfig("offsetY")||0);var eventType=this.getConfig("event");if(eventType=="click"){XN.event.addEvent(this.frame,"click",function(e){This._buttonClick(e||window.event)});XN.event.addEvent(document,"click",function(e){This._documentClick(e||window.event)})}else if(eventType=="mouseover"){XN.event.addEvent(this.frame,"mouseover",function(e){This._frameMouseOver(e||window.event)});if(this.getConfig("disalbeButtonClickEvent")){XN.event.addEvent(this.frame,"onclick",function(e){XN.event.stop(e||window.event)})}XN.event.addEvent(this.frame,"mouseleave",function(){This._buttonMouseLeave()});XN.event.addEvent(this.menu.frame,"mouseleave",function(){This._menuMouseLeave()});XN.event.addEvent(this.menu.frame,"mouseover",function(){This._mouseOverMenu=true})}else if(eventType=="manual"){}XN.event.addEvent(window,"resize",function(){This.menu.refresh()});this.hide()};this.menu.prototype=XN.$extend({},this.container);XN.$extend(this.menu.prototype,{isShow:true,menu:null,_alignType:null,_button:null,_canAddSubMenu:true,_delayTimer:null,_mouseOverMenu:false,_mouseOverButton:false,_clearTimer:function(){if(this._delayTimer){clearTimeout(this._delayTimer);this._delayTimer=null}},_buttonClick:function(e){XN.event.stop(e);if(this.isShow)this.hide();else this.show()},_documentClick:function(e){this.hide()},_frameOnClick:function(e){var This=this;var el=XN.event.element(e);var tag=el.tagName.toLowerCase();if(tag=="a")return true;if(tag=="input"&&(el.type=="radio"||el.type=="checkbox")||tag=="label"){this.isShow=false;
setTimeout(function(){This.isShow=true},20);return true}while(el!=this.menu.frame&&el.tagName&&el.tagName.toLowerCase()!="a"){el=el.parentNode}if(el.tagName.toLowerCase()=="a")return true;XN.event.stop(e)},_frameMouseOver:function(e){var This=this;this._mouseOverButton=true;this._clearTimer();var delay=this.getConfig("delay");if(delay){this._delayTimer=setTimeout(function(){if(This._mouseOverButton)This.show()},delay*1e3)}else{This.show()}if(!this.getConfig("keepDefaultEvent")){XN.event.stop(e)}},_buttonMouseLeave:function(){var This=this;this._mouseOverButton=false;this._clearTimer();setTimeout(function(){if(!This._mouseOverMenu){This.hide()}},this.getConfig("effectTime"))},_menuMouseLeave:function(){var This=this;this._mouseOverMenu=false;this._clearTimer();setTimeout(function(){if(!This._mouseOverButton)This.hide()},this.getConfig("effectTime"))},getConfig:function(key){var patch={hoverClass:"barOnshowClass",event:"fireOn",button:"bar",delay:"keep"};if(patch[key]){return this.config[key]||this.config[patch[key]]}return this.config[key]},show:function(){if(this.isShow)return this;this.menu.show();var className=this.getConfig("hoverClass");if(className!=""){this.frame.addClass(this.getConfig("hoverClass"))}this.onShow();this.isShow=true;return this},setWidth:function(w){this.menu.frame.style.width=w+"px";this.menu.refresh();return this},hide:function(){if(!this.isShow)return this;this.menu.hide();this.frame.delClass(this.getConfig("hoverClass"));this.isShow=false;this.onHide();return this},refresh:function(){if(this.isShow){this.menu.show()}return this},onShow:XN.func.empty,onHide:XN.func.empty});XN.event.enableCustomEvent(this.menu.prototype);this.autoComplete=function(p){var This=this;this.config=this.config||{};XN.$extend(this.config,{inputTip:null,searchDelay:.2,DS:null,enableCache:true,maxCache:10});XN.$extend(this.config,p);if(this.getConfig("enableCache")){this.cache=new XN.util.cache({cacheLength:this.getConfig("maxCache")})}if(this.getConfig("input")){var input=this.input=XN.element.$(this.getConfig("input"))}else{var input=this.input=XN.element.$element("input");input.type="text";input.addClass("input-text")}this.frame=input;XN.event.addEvent(input,"focus",function(e){This._startCheck();This.fireEvent("focus")});XN.event.addEvent(input,"blur",function(e){This._endCheck();This.fireEvent("blur")});this.addEvent("focus",function(){var v=this.input.value;if(v==""||v==this.getConfig("inputTip")){this.fireEvent("noinput")}});this.addEvent("blur",function(){this._lastInput=null});XN.event.addEvent(input,"click",function(e){XN.event.stop(e||window.event)});XN.event.addEvent(input,"keydown",function(e){This._userInput=true;e=e||window.event;if(e.keyCode==13)XN.event.stop(e);This.fireEvent("keydown",e)});input.setAttribute("AutoComplete","off");this.DS=this.getConfig("DS")};this.autoComplete.prototype=XN.$extend({},this.element);XN.$extend(this.autoComplete.prototype,{input:null,cache:null,_userInput:false,_lastInput:null,getConfig:function(key){if(key=="input")return this.config["input"]||this.config["id"];return this.config[key]},_startCheck:function(){var This=this;if(this._inputTimer){clearInterval(this._inputTimer)}this._inputTimer=setInterval(function(){if(This._userInput){This._userInput=false;return}This._checkInput()},this.getConfig("searchDelay")*1e3)},_endCheck:function(){clearInterval(this._inputTimer);this._inputTimer=null},_checkInput:function(){var This=this;var cv=this.input.value;if(XN.string.isBlank(cv)){if(this._lastInput===""){return}this._lastInput="";this.fireEvent("noinput");return}if(cv==this._lastInput){return}this._lastInput=cv;this.fireEvent("searchbegin");if(this.cache){var result=this.cache.get(cv);if(result){this.fireEvent("searchover",result);return}}if(!this.DS){XN.log("no ds");this.fireEvent("NO_DS");return}this.DS.query(cv,function(r){if(This.cache)This.cache.add(cv,r);This.fireEvent("searchover",r)})}});XN.event.enableCustomEvent(this.autoComplete.prototype);(function(){var completeMenus={};getCompleteMenu=function(id){return completeMenus[id]};getParentFromClass=function(target,classname){var parent=null;while(target.parentNode){target=target.parentNode;if(XN.element.hasClassName(target,classname)){parent=target;break}}return parent};exports.autoCompleteMenu=function(p){var This=this;this._MID=XN.util.createObjID();completeMenus[this._MID]=this;this.config=this.config||{};XN.$extend(this.config,{ulClassName:"",liClassName:"",liHoverClass:"m-autosug-hover",aClassName:"",noResult:"没有匹配结果",dataLoading:"正在加载数据...",noInput:null,autoSelectFirst:false,noHighlightClass:"noHighlight"});exports.autoComplete.call(this,p);var input=this.input;var m=XN.element.$element("div");m.innerHTML=this.getConfig("wrapper")||this._wrapper();this._menuList=m.firstChild;this._ul=this._menuList.getElementsByTagName("ul")[0];this.menu=new exports.menu({button:input,menu:this._menuList,fireOn:"manual"});this.addEvent("keydown",this._inputOnkeydown);XN.event.addEvent(this._ul,"mousedown",function(e){This._menuOnclick(e||window.event)},2);XN.event.addEvent(input,"blur",function(){This.menu.hide()});this.menu.hide();this.addEvent("noinput",function(){var tip=this.getConfig("noInput");if(!tip){this.menu.hide();return}this._ul.innerHTML="<li>"+tip+"</li>";this.menu.show()});this.addEvent("NO_DS",function(){this._noDataShow()});this.addEvent("searchover",function(result){this._buildMenu(result)})};exports.autoCompleteMenu.prototype=XN.$extend({},exports.autoComplete.prototype);XN.$extend(exports.autoCompleteMenu.prototype,{menu:null,_menuList:null,_ul:null,_currentLi:null,_highlightMenuItem:function(li){if(li==this._currentLi)return;var hoverClass=this.getConfig("liHoverClass");if(this._currentLi!==null){XN.element.delClass(this._currentLi,hoverClass)}XN.element.addClass(li,hoverClass);this._currentLi=li;var aid=this._currentLi.getAttribute("aid");if(aid){this.fireEvent("highlight",this.result[parseInt(aid)])}},_checkOnlyOneNoHightlightEl:function(){return this._ul.lastChild==this._ul.firstChild&&XN.element.hasClassName(this._ul.firstChild,this.config.noHighlightClass)},_inputOnkeydown:function(event){var li;if(event.keyCode==13){if(this.menu.isShow&&this._currentLi){var aid=this._currentLi.getAttribute("aid");if(aid)this._selectMenuItem(parseInt(aid))}return false}if(event.keyCode==38){if(this._checkOnlyOneNoHightlightEl())return;if(this._currentLi&&this._currentLi.previousSibling){li=this._currentLi.previousSibling}else{li=this._ul.lastChild}while(XN.element.hasClassName(li,this.config.noHighlightClass)){if(li.previousSibling)li=li.previousSibling;else li=this._ul.lastChild}this._highlightMenuItem(li);return false}if(event.keyCode==40){if(this._checkOnlyOneNoHightlightEl())return;if(this._currentLi&&this._currentLi.nextSibling){li=this._currentLi.nextSibling}else{li=this._ul.firstChild}while(XN.element.hasClassName(li,this.config.noHighlightClass)){if(li.nextSibling)li=li.nextSibling;else li=this._ul.firstChild}this._highlightMenuItem(li);return false}return true},_menuOnclick:function(event){var el=XN.event.element(event);while(el&&el.tagName&&el.tagName.toLowerCase()!=="li"){el=el.parentNode}if(!el||el.nodeType!==1||!el.getAttribute("aid"))return false;this._selectMenuItem(parseInt(el.getAttribute("aid")));return false},_menuOnmouseover:function(event){var el=XN.event.element(event);if(el.parentNode==XN.element.$("dropmenuHolder"))return;while(el&&el.tagName&&el.tagName.toLowerCase()!=="li"){el=el.parentNode}if(!el||el.nodeType!==1||!el.getAttribute("aid"))return false;this._highlightMenuItem(el);return false},_selectMenuItem:function(id){this.menu.hide();if(!getParentFromClass(this._menuList,"feed-comment-attach")){this.input.focus()}this.fireEvent("select",this.result[id]);this._lastInput=this.input.value},_buildMenu:function(result){var This=this;this.result=result;if(result.length>0){this.fireEvent("hasResult")}if(result.length==0){this.fireEvent("noResult");var noResult=this.getConfig("noResult");if(XN.isFunction(noResult)){noResult=noResult.call(this)}this._ul.innerHTML="<li>"+noResult+"</li>";this.menu.show();this._currentLi=null;return}var lis=[];lis.push(this.firstMenuItem());var len=result.length-1;XN.array.each(result,function(i,v){lis.push('<li onmouseover="getCompleteMenu('+This._MID+')._highlightMenuItem(this);" aid="'+i+'">'+This.buildMenu(v)+"</li>")});lis.push(this.lastMenuItem());this._ul.innerHTML=lis.join("");if(this.getConfig("autoSelectFirst"))this._highlightMenuItem(this._ul.firstChild);this.menu.show()},_noDataShow:function(){var tip=this.getConfig("dataLoading");this._ul.innerHTML="<li>"+tip+"</li>";this.menu.show()},firstMenuItem:function(){return""},lastMenuItem:function(){return""},buildMenu:function(r){return"<li>"+r.name+"</li>"},setMenuWidth:function(w){this.menu.setWidth(w)},getCurrentItem:function(){return this._currentLi},setCurrentItem:function(item){this._currentLi=item}});exports.autoCompleteMenu.prototype._wrapper=function(){return['<div class="m-autosug">','<span class="x1">','<span class="x1a"></span>',"</span>",'<span class="x2">','<span class="x2a"></span>',"</span>",'<div class="m-autosug-minwidth">','<div class="m-autosug-content">',"<ul></ul>","</div>","</div>","</div>"].join("")}})();this.friendSelector=function(params){var This=this;this.config=this.config||{};XN.$extend(this.config,{getFriendsUrl:"http://browse."+XN.env.domain+"/getfriendsajax.do?s=1",url:"http://sg."+XN.env.domain+"/s/f",aurl:"http://friend."+XN.env.domain+"/friendsSelector.do",param:{}});if(this.config.url.indexOf("sg.renren.com/s/m")!=-1){this.config.aurl="http://friend."+XN.env.domain+"/friendSelectorForVip"}XN.$extend(this.config,params.params);if(XN.isUndefined(this.getConfig("page"))){this.config["page"]=false}exports.autoCompleteMenu.call(this,params);this.addEvent("select",function(r){this.input.value=r.name;if(this.onSelectOne)this.onSelectOne(r)});this.buildMenu=function(r){return r.name};this.addEvent("focus",function(){if(this._ready)return;if(this._isLoading)return;this.loadFriends()})};this.friendSelector.prototype=XN.$extend({},this.autoCompleteMenu.prototype);XN.$extend(this.friendSelector.prototype,{_isLoading:false,_ready:false,isReady:function(){return this._ready},isLoading:function(){return this._isLoading},loadFriends:function(r){if(this.isLoading())return;this._isLoading=true;var This=this;var p={};p["init"]=true;p["uid"]=false;p["uhead"]=false;p["uname"]=false;p["group"]=false;p["net"]=false;p["param"]=this.getConfig("param");p["page"]=this.getConfig("page");new XN.net.xmlhttp({useCache:true,url:this.getConfig("aurl"),method:"get",data:"p="+XN.json.build(p),onSuccess:function(r){r=XN.json.parse(r.responseText);This._onload(r)}})},_onload:function(r){this.isLoading=false;this._ready=true;this.config.qkey=r.qkey;this.DS=new XN.util.DS_friends({url:this.getConfig("url"),qkey:this.getConfig("qkey"),limit:this.getConfig("limit"),page:this.getConfig("page"),param:this.getConfig("param")});this.DS.query=function(v,callBack){var This=this;try{this._request.abort()}catch(e){}function parseDS_JSON(r){r=r.responseText;var pp;try{var rt=XN.JSON.parse(r);if(This.rootKey&&rt[This.rootKey]){pp=rt[This.rootKey]}else{pp=rt}}catch(e){pp=[]}callBack(pp)}var paramJ=XN.json.parse(this.param);paramJ.q=v;this.limit&&(paramJ.l=this.limit);paramJ.friendId&&(paramJ.friend=paramJ.friendId);var paramJA=[];for(var key in paramJ){paramJA.push(key+"="+encodeURIComponent(paramJ[key]))}this._request=new XN.net.xmlhttp({url:this.url,data:paramJA.join("&"),method:this.method,onSuccess:parseDS_JSON})}}});this.friendSelectorSynchronous=function(a,b){function s(id,ac,v){if(XN.isObject(id))id=id.id;if(v.isReady()){try{v[ac](id)}catch(e){}}else{v.addEvent("load",function(){try{v[ac](id)}catch(e){}});v.loadFriends()}}a.addEvent("select",function(id){s(id,"select",b)});a.addEvent("deselect",function(id){s(id,"deselect",b)});b.addEvent("select",function(id){s(id,"select",a)});b.addEvent("deselect",function(id){s(id,"deselect",a)})};(function(){exports.multiFriendSelector=function(params){var This=this;this._ID=XN.util.createObjID();this.config=this.config||{};XN.$extend(this.config,{inputName:"ids",nameInputName:"names",aurl:"http://friend."+XN.env.domain+"/friendsSelector.do",url:"http://sg."+XN.env.domain+"/s/f",initParam:{},param:{},noInput:false,maxNum:-1});XN.$extend(this.config,params);if(this.config.url.indexOf("sg.renren.com/s/m")!=-1){this.config.aurl="http://friend."+XN.env.domain+"/friendSelectorForVip"}this.frame=XN.element.$element("div");var div=XN.element.$element("div");div.hide();document.body.appendChild(div);div.appendChild(this.frame);this.frame.innerHTML=['<div id="'+this.getID("friendsContainer")+'" class="tokenizer friendAutoSelector">','<span id="'+this.getID("inputContainer")+'" class="tokenizer_input"><input id="'+this.getID("input")+'" type="text" /></span>',"</div>",'<div class="float-right" id="'+this.getID("menu")+'"></div>'].join("");this.input=this.getEl("input");this.menuContainer=this.getEl("menu");XN.event.addEvent(this.getEl("friendsContainer"),"click",function(e){This._parseClickEvent(e||window.event)});this.autoComplete=new exports.friendSelector({id:this.input,inputTip:"输入好友姓名...",autoSelectFirst:true,url:this.getConfig("url"),aurl:this.getConfig("aurl"),param:this.getConfig("param")});this.autoComplete.loadFriends=function(r){if(this.isLoading())return;this._isLoading=true;var p={};p["init"]=true;p["uid"]=true;p["uhead"]=false;p["uname"]=true;p["group"]=false;p["net"]=false;XN.$extend(p,This.getConfig("initParam"));p["param"]=this.getConfig("param");new XN.net.xmlhttp({useCache:true,url:this.getConfig("aurl"),method:This.getConfig("loadMethod")||"get",data:"p="+XN.json.build(p),onSuccess:function(r){r=XN.json.parse(r.responseText);This._allFriends=r.candidate;This.fireEvent("load");This.autoComplete._onload(r)}})};this.autoComplete.buildMenu=function(r){return"<p>"+r.name+"</p>"};this.autoComplete.setMenuWidth(129);this.autoComplete.addEvent("keydown",function(e){This._onInputKeydown(e)});this.autoComplete.addEvent("select",function(r){XN.log(this.input);this.input.value="";This.selectFriend(r)});if(this.getConfig("noInput")){this.input.hide()}this.fireEvent("init")};var proto=exports.multiFriendSelector.prototype=XN.$extend({},exports.element);XN.$extend(proto,{isReady:function(){return this.autoComplete.isReady()},isLoading:function(){return this.autoComplete.isLoading()},loadFriends:function(){this.autoComplete.loadFriends()},getUserByID:function(id){id=String(id);var rt=null;XN.array.each(this._allFriends,function(i,v){if(String(v.id)==id){rt=v;return false}});return rt},getConfig:function(key){if(key=="inputName")return this.config["idInputName"]||this.config["inputName"];return this.config[key]},getID:function(id){return"mfs_"+this._ID+id},getFriendID:function(id){return this.getID("friend_"+id)},getFriendEl:function(id){return XN.element.$(this.getFriendID(id))},getEl:function(id){return XN.element.$(this.getID(id))},getFriendsNum:function(){return this.getEl("friendsContainer").getElementsByTagName("a").length},getSelectedFriends:function(){var rt=[];var a=XN.array.build(this.getEl("friendsContainer").getElementsByTagName("a"));XN.array.each(a,function(i,v){rt.push(v.getAttribute("uid")+"")});return rt},reset:function(){this.deselectAll()},deselectAll:function(){var els=XN.array.build(this.getEl("friendsContainer").getElementsByTagName("a"));XN.array.each(els,function(i,v){XN.element.remove(v)});this.fireEvent("deselectAll",this.getIds())},selectFriends:function(fs){var This=this;XN.array.each(fs,function(i,v){This.select(v)})},deselectFriends:function(fs){var This=this;XN.array.each(fs,function(i,v){This.deselect(v)})},select:function(o){if(XN.isUndefined(o))return;XN.log("mfs select:");XN.log(o);var maxNum=this.getConfig("maxNum");if(maxNum!==-1){if(this.getFriendsNum()==maxNum){this.fireEvent("overMaxNum",maxNum);return}}if(XN.isString(o)||XN.isNumber(o)){o={id:o,name:this.getUserByID(o).name}}if(this.getFriendEl(o.id))return;this.getEl("friendsContainer").insertBefore(this.createFriendHTML(o.id,o.name),this.getEl("inputContainer"));this.fireEvent("select",o.id)},deselect:function(uid){if(!this.getFriendEl(uid))return;this.getFriendEl(uid).remove();this.fireEvent("deselect",uid)},_parseClickEvent:function(e){var el=XN.event.element(e);XN.event.stop(e);if(el&&el.getAttribute("action")){this.deselectFriend(el.getAttribute("uid"))}},createFriendHTML:function(uid,uname){var a=XN.element.$element("a");a.id=this.getFriendID(uid);a.setAttribute("uid",uid);a.href="#nogo";a.className="token";a.tabindex="-1";a.innerHTML=['<span>\n<span>\n<span>\n<span>\n<input type="hidden" value="',uid,'" name="',this.getConfig("inputName"),'" />\n','<input type="hidden" value="',uname,'" name="',this.getConfig("nameInputName"),'" />\n',uname,'<span uid="',uid,'" action="x" class="x" onmouseout="this.className=\'x\'" onmouseover="this.className=\'x_hover\'" >\n</span>\n</span>\n</span>\n</span>\n</span>'].join("");return a},_onInputKeydown:function(event){var i=this.getEl("inputContainer"),pa=i.previousSibling,na=i.nextSibling,input=this.input,c=this.getEl("friendsContainer");if(event.keyCode==8&&this.input.value==""){if(pa){this.deselectFriend(pa.getAttribute("uid"))}return true}else if(event.keyCode==37&&this.input.value==""){if(pa&&pa.tagName.toLowerCase()=="a"){i.parentNode.removeChild(i);c.insertBefore(i,pa);setTimeout(function(){input.focus()},0)}return true}else if(event.keyCode==39&&this.input.value==""){if(na&&na.tagName.toLowerCase()=="a"){i.parentNode.removeChild(i);XN.dom.insertAfter(i,na);setTimeout(function(){input.focus()},0)}return true}return false}});XN.event.enableCustomEvent(proto);proto.deSelectAll=proto.deselectAll;proto.deSelectFriend=proto.deselectFriend=proto.deselect;proto.selectFriend=proto.select;proto.getSelectedFriendsID=proto.getSelectedFriends;proto.getIds=proto.getSelectedFriends})();this.friendSelectorWithMenu=function(p){var selector=new exports.friendSelector(p);var menu=new exports.friendSelectorMenu({url:selector.getConfig("url"),aurl:selector.getConfig("aurl"),param:selector.getConfig("param"),multi:false,alignType:p.alignType,offsetX:p.offsetX,offsetY:p.offsetY,initParam:p.initParam});var div=XN.element.$element("div");div.addChild(selector);div.addChild(menu);selector.frame=div;selector.addEvent("focus",function(){menu.menu.hide()});menu.addEvent("select",function(p){var This=this;setTimeout(function(){This.menu.hide()},30);selector.fireEvent("select",this.getUserByID(p))});menu.menu.menu.setOffsetY(9);return selector};this.multiFriendSelectorWithMenu=function(p){var selector=new exports.multiFriendSelector(p);var menu=new exports.friendSelectorMenu({url:selector.getConfig("url"),aurl:selector.getConfig("aurl"),param:selector.getConfig("param"),multi:true,showSelectAllCheckbox:selector.getConfig("showSelectAllCheckbox")||false});menu.addEvent("submit",function(){menu.menu.hide()});selector.menuContainer.setContent(menu);exports.friendSelectorSynchronous(selector,menu);return selector};(function(ns){var DEBUG=false;var addEvent=XN.event.addEvent;var log=function(s){if(DEBUG)XN.log(XN.isString(s)?"ui.tabView:"+s:s);return s};ns.tabView=function(params){this.config={selectedClass:"select",event:"click",alwaysReload:false,mouseOverDelay:.2};XN.$extend(this.config,params);this.init()};ns.tabView.prototype={_tabs:null,_currentTab:null,_idPre:null,_tabIndex:0,init:function(){this._idPre=XN.util.createObjID();this._tabs=[]},getConfig:function(key){if(key=="activeClass")return this.config["activeClass"]||this.config["selectedClass"];return this.config[key]},_getID:function(el){if(el.nodeType&&el.nodeType==1)return this._setID(el).id;return el},_setID:function(el){if(!el.id){this._tabIndex++;el.setAttribute("id","tabview_"+this._idPre+"_"+this._tabIndex)}return XN.element.$(el)},_getTab:function(id){log("_getTab start");log("param:id");log(id);if(!id)return log(id);if(id.label)return log(id);var key=this._getID(id);log("key:"+key);var tabs=this._tabs;log("all tabs");log(tabs);for(var i=tabs.length-1;i>=0;i--){if(tabs[i].key==key){log("_getTab end");return log(tabs[i])}}log("_getTab end");return log(null)},getCurrentTab:function(){return this._getTab(this._currentTab)},setCurrentTab:function(tab,forceReload){log("setCurrentTab start");var oldC=this.getCurrentTab();var nowC=this._getTab(tab);log("old current:");log(oldC);log("now current:");log(nowC);if(oldC&&oldC.key==nowC.key&&!forceReload)return;if(oldC)this._deactiveTab(oldC);this._activeTab(nowC);this._setCurrentTab(nowC);log("setCurrentTab end");this.fireEvent("change",nowC);return this},reset:function(){var tab=this.getCurrentTab();if(tab){this._deactiveTab(tab)}this._setCurrentTab(null);return this},_activeTab:function(tab){log("_activeTab:");log(tab);tab.getEl("label").addClass(this.getConfig("activeClass"));if(tab.content)tab.getEl("content").show();tab.onActive(tab);log("_activeTab end")},_deactiveTab:function(tab){if(tab.getEl("label")){tab.getEl("label").delClass(this.getConfig("activeClass"))}if(tab.content)tab.getEl("content").hide();tab.onInactive(tab)},_setCurrentTab:function(tab){log("_setCurrentTab start");tab=this._getTab(tab);log("currentTab:");log(tab);this._currentTab=tab?tab.key:null;log("this._currentTab");log(this._currentTab);log("_setCurrentTab end")},addTab:function(t){log("addTab start");log("params:");log(t);var This=this;var tab={onActive:XN.func.empty,onClick:XN.func.empty,onInactive:XN.func.empty,onInit:XN.func.empty,getEl:function(key){return XN.element.$(this[key])},active:false};t.label=this._setID(XN.element.$(t.label));t.key=t.key||t.label.id;if(t.content){t.content=this._getID(t.content);log("get content id:"+t.content)}XN.$extend(tab,t);this._tabs.push(tab);log("all tabs");log(this._tabs);if(tab.active&&this._currentTab===null){if(tab.content)tab.getEl("content").show();tab.label.addClass(this.getConfig("activeClass"));this._setCurrentTab(tab)}else{if(tab.content)tab.getEl("content").hide()}var ev=this.getConfig("event");if(ev=="click"){addEvent(tab.label,"click",function(e){e=e||window.event;XN.event.stop(e);This._eventHander(e,tab.label)},false)}else if(ev=="mouseover"){var isMouseOn=true;var timer=null;addEvent(tab.label,"mouseover",function(e){var el=this;isMouseOn=true;timer=setTimeout(function(){if(!isMouseOn)return;e=e||window.event;This._eventHander(e,tab.label)},This.getConfig("mouseOverDelay")*1e3)},false);addEvent(tab.label,"mouseleave",function(e){isMouseOn=false;if(timer)clearTimeout(timer)},false)}tab.onInit(tab);log("addTab end");return this},_eventHander:function(e,el){log("on click,el:");log(el);log("get tab form by el:");var tab=this._getTab(el);if(this.getConfig("alwaysReload")){this.setCurrentTab(tab,true)}else{this.setCurrentTab(tab)}tab.onClick(e,tab)},refresh:function(){this._activeTab(this.getCurrentTab());return this},showTab:function(id,forceReload){this.setCurrentTab(id,forceReload)},hideAll:function(){this.reset()}};XN.event.enableCustomEvent(ns.tabView.prototype)})(this);this.refreshAll=function(){document.body.style.zoom=1.1;document.body.style.zoom=1};this.getHiddenDiv=function(){if(!this._hiddenDiv){this._hiddenDiv=XN.element.$element("div").hide();document.body.appendChild(this._hiddenDiv)}return this._hiddenDiv};this.friendSearchBar=function(p){var input=XN.element.$(p.input);var submit=XN.element.$(p.submit||null);var form=XN.element.$(p.form);var tip=p.tip||"找人...";var action=p.action||function(p){if(p.type&&p.type=="PAGE"){window.location.href="http://page."+XN.env.domain+"/"+p.id+"?from=opensearch"}else{window.location.href="http://www."+XN.env.domain+"/profile.do?id="+p.id+"&from=opensearch"}};var gotoUserPage=false;new XN.form.inputHelper(input).setDefaultValue(tip).onEnter(function(el){if(gotoUserPage)return;if(!XN.string.isBlank(el.value)){form.submit()}});var maxLength=16;var param={id:input,noResult:function(){return'搜索"'+this.input.value+'"'},limit:maxLength,params:p.params};var friendSelector=new exports.friendSelector(param);friendSelector.lastMenuItem=function(){if(this.result.length==maxLength){return'<li><p><a onmousedown="window.location.href=this.href" href="http://friend.'+XN.env.domain+"/myfriendlistx.do?qu="+this.input.value+'">点击查看更多..</a></p></li>'}else{return""}};friendSelector.setMenuWidth(input.offsetWidth);friendSelector.onSelectOne=function(p){gotoUserPage=true;action(p)};if(submit)submit.onclick=function(){if(gotoUserPage)return false;var v=input.value;if(v!=tip&&!XN.string.isBlank(v)){form.submit();return false}if(submit.tagName.toLowerCase()=="a"){return true}else{return false}}};this.navSearchBar=function(p){var input=XN.element.$(p.input);var submit=XN.element.$(p.submit||null);var form=XN.element.$(p.form);var tip=p.tip||"找人...";var action=p.action||function(p){if(p.type&&p.type=="PAGE"){window.location.href="http://page."+XN.env.domain+"/"+(p.id||p.uid)+"?from=opensearch"}else{window.location.href="http://www."+XN.env.domain+"/profile.do?id="+(p.id||p.uid)+"&from=opensearch"}};var gotoUserPage=false;new XN.form.inputHelper(input).setDefaultValue(tip).onEnter(function(el){if(gotoUserPage)return;if(!XN.string.isBlank(el.value)){form.submit()}});var maxLength=7;var param={id:input,noResult:function(){return'<a onmousedown="window.location.href=this.href" href="http://browse.'+XN.env.domain+"/searchEx.do?from=opensearchclick&q="+encodeURIComponent(this.input.value)+'" title="搜索'+this.input.value+'">搜索"'+this.input.value+'"</a>'},limit:maxLength,params:p.params,wrapper:['<div class="">','<span class="x1">','<span class="x1a"></span>',"</span>",'<span class="x2">','<span class="x2a"></span>',"</span>",'<div class="m-autosug-minwidth">','<div class="m-autosug-content">','<ul class="search-Result"></ul>',"</div>","</div>","</div>"].join(""),url:"http://sg."+XN.env.domain+"/s/h"};var friendSelector=new exports.friendSelector(param);friendSelector.loadFriends=function(r){if(this.isLoading())return;this._isLoading=true;var This=this;this._onload()};friendSelector._onload=function(){this.isLoading=false;this._ready=true;this.DS=new XN.util.DS_friends({url:this.getConfig("url"),qkey:this.getConfig("qkey"),limit:this.getConfig("limit"),page:this.getConfig("page"),param:this.getConfig("param")});this.DS.query=function(v,callBack){var This=this;try{this._request.abort()}catch(e){}function parseDS_JSON(r){r=r.responseText;var pp;try{var rt=XN.json.parse(r);if(This.rootKey&&rt[This.rootKey]){pp=rt[This.rootKey]}else{pp=rt}}catch(e){pp=[]}callBack(pp)}this._request=new XN.net.xmlhttp({url:this.url,data:"q="+encodeURIComponent(v)+"&l="+this.limit,method:this.method,onSuccess:parseDS_JSON})}};friendSelector.buildMenu=function(r){return'<img src="'+(r.head||r.uhead)+'" width="50" height="50" alt="'+(r.name||r.uname)+'"/>'+"<strong>"+(r.name||r.uname)+"</strong>"};friendSelector._noDataShow=function(){var tip=this.getConfig("dataLoading");this._ul.innerHTML='<li class="lookMore">'+tip+"</li>";this.menu.show()};friendSelector._buildMenu=function(result){var This=this;this.result=result;if(result.length==0){var noResult=this.getConfig("noResult");if(XN.isFunction(noResult)){noResult=noResult.call(this)}this._ul.innerHTML='<li class="lookMore">'+noResult+"</li>";this.menu.show();this._currentLi=null;return}var lis=[];lis.push(this.firstMenuItem());var len=result.length-1;XN.array.each(result,function(i,v){lis.push('<li onmouseover="getCompleteMenu('+This._MID+')._highlightMenuItem(this);" aid="'+i+'">'+This.buildMenu(v)+"</li>")});lis.push(this.lastMenuItem());this._ul.innerHTML=lis.join("");if(this.getConfig("autoSelectFirst"))this._highlightMenuItem(this._ul.firstChild);this.menu.show()};friendSelector.lastMenuItem=function(){if(this.result.length==maxLength){return'<li class="lookMore"><a onmousedown="window.location.href=this.href" href="http://friend.'+XN.env.domain+"/myfriendlistx.do?qu="+this.input.value+'">点击查看更多..</a></li>'}else{return""}};friendSelector.setMenuWidth(input.offsetWidth);friendSelector.onSelectOne=function(p){gotoUserPage=true;action(p)};if(submit)submit.onclick=function(){if(gotoUserPage)return false;var v=input.value;if(v!=tip&&!XN.string.isBlank(v)){form.submit();return false}if(submit.tagName.toLowerCase()=="a"){return true}else{return false}}};this.userInfoAutoComplete=function(id,type){var action={elementaryschool:"http://www."+XN.env.domain+"/autocomplete_elementaryschool.jsp",juniorhighschool:"http://www."+XN.env.domain+"/autocomplete_juniorhighschool.jsp",workplace:"http://www."+XN.env.domain+"/autocomplete_workplace.jsp",highschool:"http://www."+XN.env.domain+"/autocomplete_highschool.jsp",allnetwork:"http://www."+XN.env.domain+"/autocomplete_all_network.jsp",allSchool:"http://www."+XN.env.domain+"/autocomplete-school.jsp",city:"http://www."+XN.env.domain+"/autocomplete-city.jsp",college:"http://www."+XN.env.domain+"/autocomplete_college.jsp"};var ds=new XN.datasource.DS_XHR({url:action[type]});var at=new exports.autoCompleteMenu({DS:ds,input:id});at.buildMenu=function(r){return"<p>"+(r.name||r.Name)+"</p>"};at.addEvent("select",function(r){this.input.value=r.name||r.Name});return at}});object.add("XN.Do","XN, XN.func, XN.array, XN.ui",function(exports,XN){this.currentAlert=null;this.currentConfirm=null;this.alert=function(message,title,type,X,Y,w,h,callBack){var params={type:"normal",width:400,button:"确定",modal:false,callBack:XN.func.empty,autoHide:0,addIframe:true,closeFire:true};if(!XN.isString(message))extendObject(params,message);else if(XN.isString(message)||arguments.length>1){var ars=arguments;XN.array.each(["message","title","type","X","Y","width","height","callBack"],function(i,v){if(ars[i])params[v]=ars[i]})}var temp=params.params;delete params.params;params=extendObject({},params,temp);params.callback=params.callback||params.callBack;try{exports.currentAlert.remove(params.modal===true)}catch(e){}var dialog=new XN.ui.dialog(params).setType(params.type).setTitle(params.title||(params.type=="error"?"错误提示":"提示")).setWidth(params.width).setHeight(params.height).setX(params.X).setY(params.Y).addButton({text:params.yes||params.button,onclick:function(e){dialog.setAutoHide(true);return params.callback.call(dialog,e)}}).show();if(params.closeFire===true){dialog.addEvent("close",function(e){params.callback.call(dialog,e)})}exports.currentAlert=dialog;try{dialog.getButton(params.button).focus()}catch(e){}if(params.autoHide){dialog.autoHide(params.autoHide)}return dialog};this.confirm=function(message,title,callBack,yes,no,X,Y,w,h){var params={type:"normal",width:400,modal:false,yes:"确定",no:"取消",callBack:XN.func.empty,focus:null,addIframe:true,closeFire:false};if(!XN.isString(message)&&!XN.isNumber(message)){extendObject(params,message)}else if(XN.isString(message)||arguments.length>1){var ars=arguments;XN.array.each(["message","title","callBack","yes","no","X","Y","w","h"],function(i,v){if(ars[i])params[v]=ars[i]})}var temp=params.params;delete params.params;params=extendObject({},params,temp);params.callback=params.callback||params.callBack;try{exports.currentConfirm.remove(params.modal===true)}catch(e){}var dialog=new XN.ui.dialog(params).setType(params.type).setTitle(params.title||(params.type=="error"?"错误提示":"提示")).setBody(params.msg||params.message||"").setWidth(params.width).setHeight(params.height).setX(params.X).setY(params.Y).addButton({text:params.submit||params.yes,onclick:function(){dialog.setAutoHide(true);return params.callback.call(dialog,true)}}).addButton({text:params.cancel||params.no,onclick:function(){dialog.setAutoHide(true);return params.callback.call(dialog,false)}}).show();dialog.getButton(params.cancel||params.no).addClass("gray");if(params.focus=="submit"){params.focus=params.submit}else if(params.focus=="cancel"){params.focus=params.cancel}if(params.closeFire===true){dialog.addEvent("close",function(){params.callback.call(dialog,false)})}dialog.getButton(params.focus||params.submit||params.yes).focus();exports.currentConfirm=dialog;return dialog};this.showMessage=this.showMsg=function(msg,title,time){var dialog=exports.alert({msg:msg,title:title||"提示",noFooter:true,autoHide:time||2});
return dialog};this.showError=function(msg,title,time){var dialog=exports.alert({msg:msg,type:"error",title:title||"错误提示",noFooter:true,autoHide:time||2});return dialog}});object.use(["XN","XN.array","XN.browser","XN.cookie","XN.Do","XN.dom","XN.effect","XN.element","XN.env","XN.event","XN.form","XN.func","XN.json","XN.net","XN.string","XN.template","XN.ui","XN.util","XN.datasource"],function(XN){$extend=XN.$extend;if(window.XN==null){window.XN=XN}else{var oldXN=window.XN;window.XN=XN;for(var prop in oldXN){if(window.XN[prop]===undefined){window.XN[prop]=oldXN[prop]}else{XN.$extend(window.XN[prop],oldXN[prop])}}}isUndefined=XN.isUndefined;isString=XN.isString;isElement=XN.isElement;isFunction=XN.isFunction;isObject=XN.isObject;isArray=XN.isArray;isNumber=XN.isNumber;$=XN.element.$;$element=XN.element.$element;XN.element.findFirstClass=XN.dom.findFirstClass;extendObject=$extend;xn_getEl=ge=getEl=$X=$;$xElement=XN.element.$element;XN.DEBUG=XN.Debug=XN.debug;XN.debug.On=XN.debug.on;XN.debug.Off=XN.debug.off;XN.namespace("ui");XN.namespace("util");XN.namespace("app");XN.namespace("page");XN.APP=XN.App=XN.app;XN.PAGE=XN.Page=XN.page;XN.CONFIG=XN.Config=XN.config;XN.ENV=XN.Env=XN.env=XN.env;XN.ARRAY=XN.Array=XN.array=XN.array;XN.String=XN.STRING=XN.string=XN.string;XN.BROWSER=XN.Browser=XN.browser=XN.browser;XN.COOKIE=XN.Cookie=XN.cookie=XN.cookie;XN.EVENT=XN.Event=XN.event=XN.event;XN.DO=XN.Do;XN.DOM=XN.Dom=XN.dom=XN.dom;XN.EFFECT=XN.Effect=XN.effect=XN.effect;XN.ELEMENT=XN.Element=XN.element=XN.element;XN.FORM=XN.Form=XN.form=XN.form;XN.FUNC=XN.Func=XN.func=XN.func;XN.JSON=XN.Json=XN.json=XN.json;XN.NET=XN.Net=XN.net;XN.Template=XN.TEMPLATE=XN.template=XN.template;XN.UI=XN.Ui=XN.ui;XN.UTIL=XN.Util=XN.util;XN.ui.DS_JSON=XN.util.DS_JSON=XN.datasource.DS_JSON;XN.ui.DS_friends=XN.util.DS_friends=XN.datasource.DS_friends;XN.ui.DS_Array=XN.util.DS_Array=XN.datasource.DS_Array;XN.ui.DS_XHR=XN.util.DS_XHR=XN.datasource.DS_XHR;try{document.domain=String(XN.env.domain)}catch(e){}if(window.isJSON==null){window.isJSON=XN.string.isJSON}if(XN.events==null){XN.timeLog={};XN.events={};XN.event.enableCustomEvent(XN.events)}});"abbr article aside audio canvas command details figcaption figure footer header hgroup mark meter nav output progress section summary time video".replace(/\w+/g,function(n){document.createElement(n)});(function(){function Expressions(){}var isIE=!!(window.attachEvent&&!window.opera);window.Expressions=Expressions;if(!isIE){return}Expressions.ie6=navigator.appVersion.indexOf("MSIE 6.0")!=-1;Expressions.ie7=navigator.appVersion.indexOf("MSIE 7.0")!=-1;Expressions.k=1;Expressions.timer=function(){Expressions.k++;var timerEle=document.getElementById("expressionsTimer");if(timerEle)timerEle.innerHTML=Expressions.k};Expressions.ele={};Expressions.pseudo={};Expressions.selector={};Expressions.style={};Expressions.addClass=function(ele,klass){ele.className+=" "+klass};Expressions.removeClass=function(ele,klass){ele.className=ele.className.replace(new RegExp("\\b"+klass+"(\\s+|\\b)","ig"),"")};Expressions.hasClass=function(ele,klass){return ele.className.match(new RegExp("(\\s|^)"+klass+"(\\s|$)"))};Expressions.getPixelValue=function(ele,value){if(!/^\d+(px)?$/i.test(value)&&/^\d/.test(value)){var style=ele.style.left;var runtimeStyle=ele.runtimeStyle.left;ele.runtimeStyle.left=ele.currentStyle.left;ele.style.left=value||0;value=ele.style.pixelLeft;ele.style.left=style;ele.runtimeStyle.left=runtimeStyle;return value}return parseInt(value)||0};Expressions.pseudo.hover=function(ele,klass){if(Expressions.ie7)return;if(!klass)klass="hover";ele.attachEvent("onmouseover",function(){ele.className+=" "+klass});ele.attachEvent("onmouseout",function(){ele.className=ele.className.replace(new RegExp("\\s"+klass,"ig"),"")});Expressions.timer()};Expressions.pseudo.focus=function(ele,klass){if(!klass)klass="focus";ele.attachEvent("onfocus",function(){ele.className+=" "+klass});ele.attachEvent("onblur",function(){ele.className=ele.className.replace(new RegExp("\\s"+klass,"ig"),"")});Expressions.timer()};Expressions.pseudo.disabled=function(ele,klass){if(!klass)klass="disabled";function change(){if(ele.disabled){if(!Expressions.hasClass(ele,klass))Expressions.addClass(ele,klass)}else{Expressions.removeClass(ele,klass)}}ele.attachEvent("onpropertychange",change);change();Expressions.timer()};Expressions.pseudo.enabled=function(ele,klass){if(!klass)klass="enabled";function change(){if(!ele.disabled){if(!Expressions.hasClass(ele,klass))Expressions.addClass(ele,klass)}else{Expressions.removeClass(ele,klass)}}ele.attachEvent("onpropertychange",change);change();Expressions.timer()};Expressions.pseudo.before=function(ele,id){var beforeEle=document.createElement("before");ele.insertBefore(beforeEle,ele.firstChild);Expressions.timer()};Expressions.pseudo.after=function(ele,id){var afterEle=document.createElement("after");var timer=setInterval(function(){try{ele.appendChild(afterEle);clearInterval(timer)}catch(e){}},200);Expressions.timer()};Expressions.style.width=function(ele,width){if(width>0)ele.style.width=width+"px"};Expressions.style.minWidth=function(ele,minWidth){if(!minWidth.match(/(\d+)px/))return;minWidth=parseInt(RegExp.$1);function checkMinWidth(){if(!ele.__oldWidth&&document.documentElement.clientWidth<minWidth){ele.__oldWidth=ele.runtimeStyle.width;ele.runtimeStyle.width=minWidth+"px"}else if(ele.__oldWidth&&document.documentElement.clientWidth>=minWidth){ele.__oldWidth=null;ele.runtimeStyle.width=ele.__oldWidth}}window.attachEvent("onresize",checkMinWidth);checkMinWidth();Expressions.timer()};Expressions.style.outline=function(ele,value){if(value=="0 none"){ele.onfocus=function(){ele.blur()}}};Expressions.style.backgroundOrigin=function(ele){ele.style.backgroundPosition=ele.offsetWidth-14+"px center";Expressions.timer()};Expressions.style.boxSizing={};Expressions.style.boxSizing.borderBox=function(ele,width,height){var updateBorderBoxWidth=function(width){ele.runtimeStyle.width="";if(!width)width=ele.currentStyle["width"];var borderLeft=(ele.currentStyle["bordeLeftStyle"]=="none"?0:parseInt(ele.currentStyle["borderLeftWidth"]))||0;var borderRight=(ele.currentStyle["bordeRightStyle"]=="none"?0:parseInt(ele.currentStyle["borderRightWidth"]))||0;var paddingLeft=parseInt(ele.currentStyle["paddingLeft"])||0;var paddingRight=parseInt(ele.currentStyle["paddingRight"])||0;var offset=borderLeft+borderRight+paddingLeft+paddingRight;var parentOffset=(parseInt(ele.parentNode.currentStyle["paddingLeft"])||0)+(parseInt(ele.parentNode.currentStyle["paddingRight"])||0);width=Expressions.getPixelValue(ele,width)-parentOffset;ele.runtimeStyle.width=Math.max(0,width-offset)+"px"};var updateBorderBoxHeight=function(height){ele.runtimeStyle.height="";if(!height)height=ele.currentStyle["height"];var borderTop=(ele.currentStyle["bordeTopStyle"]=="none"?0:parseInt(ele.currentStyle["borderTopWidth"]))||0;var borderBottom=(ele.currentStyle["bordeBottomStyle"]=="none"?0:parseInt(ele.currentStyle["borderBottomWidth"]))||0;var paddingTop=parseInt(ele.currentStyle["paddingTop"])||0;var paddingBottom=parseInt(ele.currentStyle["paddingBottom"])||0;var offset=borderTop+borderBottom+paddingTop+paddingBottom;var parentOffset=(parseInt(ele.parentNode.currentStyle["paddingTop"])||0)+(parseInt(ele.parentNode.currentStyle["paddingBottom"])||0);height=Expressions.getPixelValue(ele,height)-parentOffset;ele.runtimeStyle.height=Math.max(0,height-offset)+"px"};updateBorderBoxWidth(width);updateBorderBoxHeight(height);ele.attachEvent("ondetach",function(){ele.runtimeStyle.width="";ele.runtimeStyle.height=""});ele.attachEvent("onpropertychange",function(){var pn=event.propertyName;if(pn==="style.boxSizing"&&ele.style.boxSizing===""){ele.style.removeAttribute("boxSizing");ele.runtimeStyle.boxSizing=undefined}switch(pn){case"style.width":case"style.borderLeftWidth":case"style.borderLeftStyle":case"style.borderRightWidth":case"style.borderRightStyle":case"style.paddingLeft":case"style.paddingRight":updateBorderBoxWidth(width);break;case"style.height":case"style.borderTopWidth":case"style.borderTopStyle":case"style.borderBottomWidth":case"style.borderBottomStyle":case"style.paddingTop":case"style.paddingBottom":updateBorderBoxHeight(height);break;case"className":case"style.boxSizing":updateBorderBoxWidth(width);updateBorderBoxHeight(height);break;default:break}});Expressions.timer();return};Expressions.style.content=function(ele,value){ele.innerText=value;Expressions.timer()};Expressions.style.position={};Expressions.style.position.fixed=function(ele){var timer;window.attachEvent("onscroll",function(){var delay=500;if(ele.hackStyle&&ele.hackStyle.IE6fixedPositionDelay)delay=ele.hackStyle.IE6fixedPositionDelay;ele.runtimeStyle.visibility="hidden";Expressions.addClass(ele,"IE6_SCROLLING");clearTimeout(timer);timer=setTimeout(function(){ele.runtimeStyle.visibility="visible";Expressions.removeClass(ele,"IE6_SCROLLING")},delay)});Expressions.timer()};Expressions.style.position.fixed.delay=function(ele,value){if(!ele.hackStyle)ele.hackStyle={};ele.hackStyle.IE6fixedPositionDelay=value;Expressions.timer()};Expressions.style.fixLineHeight=function(ele){var createHack=function(parent){parent.runtimeStyle.zoom="1";var hack=document.createElement("h");hack.style.zoom="1";parent.insertBefore(hack,parent.children[0])};for(var i=0,tags=["IMG","SELECT","INPUT","TEXTAREA"],tag;tag=tags[i];i++){if(ele.tagName.toUpperCase()==tag){if(ele.parentNode.currentStyle.lineHeight!="normal")createHack(ele.parentNode);return}}createHack(ele);Expressions.timer()};Expressions.selector=function(selector,klass){var eles=Sizzle(selector);for(var i=0;i<eles.length;i++){Expressions.addClass(eles[i],klass)}Expressions.timer()};if(isIE){(function(){var timer=setInterval(function(){try{document.body.doScroll("left");clearInterval(timer);document.getElementsByTagName("title")[0].innerHTML}catch(e){}},20)})()}Expressions.hover=Expressions.pseudo.hover;Expressions.focus=Expressions.pseudo.focus;Expressions.after=Expressions.pseudo.after;Expressions.before=Expressions.pseudo.before})();try{document.execCommand("BackgroundImageCache",false,true)}catch(e){}try{window.onerror=function(){if(parseInt(Math.random()*1e4,10)!=5e3)return 1;var a=arguments,e=encodeURIComponent,l=location,d=new Date;if(a.length!=3||a[2]==0)return 1;(new Image).src=["http://s.renren.com/speedstats/jserror/stats.php?message="+e(a[0]),"url="+e(a[1]),"lineNo="+a[2],"location="+e(l),"time="+d.toLocaleTimeString()].join("&");return 1}}catch(e){}if(!window.console)window.console={log:function(){},warn:function(){},error:function(){}};window.now=new Date;XN.dom.ready(function(){if(XN.config.parentDomain||!XN.config.jumpOut)return;try{top.location.href.indexOf("x")}catch(e){try{top.location=self.location}catch(e){}}});if(XN.browser.Gecko&&XN.string.getQuery("debug_mode")){XN.debug.on()}(function(){var _is_loaded=false;window.load_jebe_ads=function(s,r,reload){if(window._developer_no_ads)return;if(!s)return;if(_is_loaded&&!reload)return;_is_loaded=true;XN.dom.ready(function(){var p=XN.cookie.get("id"),src;if(!p||XN.string.isBlank(p))p="";if(!r)r=location.href;if($("ad100000300005")!=null){src="http://ebp.renren.com/ebpn/show?tt="+(new Date).getTime();r=$("ad100000300007")!=null?"http://noLogin.renren.com":"http://noLogin.blog.renren.com"}else{src="http://ebp.renren.com/ebpn/show?userid="+encodeURIComponent(p)+"&isvip="+XN.user.isVip+"&hideads="+XN.user.hideAds+(!XN.pageId?"":"&pageType="+XN.pageId)+"&tt="+(new Date).getTime()}if(r.match(/http:\/\/www\.renren\.com\/home/gi)){r="http://www.renren.com/Home.do"}else if(r.indexOf("friend/manage")>-1||r.indexOf("friend/addfriends")>-1){r="http://friend.renren.com/myfriendlistx.do";src="http://ebp.renren.com/ebpn/show?userid="+encodeURIComponent(p)+"&isvip="+XN.user.isVip+"&hideads="+XN.user.hideAds+(!XN.pageId?"":"&pageType=friend")+"&tt="+(new Date).getTime()}else if(r.match(/http:\/\/(www\.)?renren\.com\/?$/gi)||r.match(/http:\/\/(www\.)?renren\.com\/?SysHome(.do)?\/?/gi)||r.match(/http:\/\/(www\.)?renren.com\/pages\/syshome_newversion.jsp/)||r.match(/http:\/\/(www\.)?renren.com\/pages\/autoLogin-ads.jsp/)){r="http://www.renren.com/SysHome.do";if($("ad100000000068")!=null){src="http://ebp.renren.com/ebpn/show?ref=http://www.renren.com/ad_100000000068"}else if($("ad100000000108")!=null){src="http://ebp.renren.com/ebpn/show?ref=http://www.renren.com/ad_100000000108"}else{src="http://ebp.renren.com/ebpn/show?ref=http://www.renren.com/ad_100000000061"}}if(XN.app.share&&XN.app.share.pageInfo){r=r.replace(/\?.*$/,"")+"?shareType="+XN.app.share.pageInfo.type}if(r){src+="&r="+encodeURIComponent(r)}XN.loadFile({file:src,type:"js"},function(){var jsurl="http://s.xnimg.cn/a"+jebe_json.ad_js_version+"/jebe/xn.jebe.js";XN.loadFile({file:jsurl,type:"js"})})})}})();XN.USER=XN.user=currentUser={};XN.USER.me=function(parameters){};XN.event.enableCustomEvent(currentUser);XN.USER.addFriendAction=function(p){this.config={commentLength:45,needComment:true,requestURI:"http://friend."+XN.env.domain+"/ajax_request_friend.do"};$extend(this.config,p)};XN.user.addFriendAction.prototype={getConfig:function(key){return this.config[key]},send:function(id,why,from,code,codeFlag){var code=code!=1?0:1;var codeFlag=codeFlag||"";var This=this;if(this.getConfig("needComment")){if(XN.STRING.isBlank(why)){this.fireEvent("checkError","您输入的信息不能为空");return}}if(why.length>this.getConfig("commentLength")){this.fireEvent("checkError","您输入的信息不能超过"+this.getConfig("commentLength")+"个字符");return}var data="id="+id+"&why="+why+"&codeFlag="+code+"&code="+codeFlag;if(this.getConfig("matchmaker"))data=data+"&matchmaker="+this.getConfig("matchmaker");if(this.getConfig("groupname"))data=data+"&groupname="+this.getConfig("groupname");this.fireEvent("beforePost");new XN.NET.xmlhttp({url:this.getConfig("requestURI")+"?from="+from,data:data,onSuccess:function(r){r=r.responseText;if(r&&isJSON(r)){var re=XN.JSON.parse(r)}else{This.fireEvent("error");return}if(re.result=="-1"){This.fireEvent("flagError");return}This.fireEvent("success",id,r,from);if(!window.currentUser)return;if(currentUser.fireEvent)currentUser.fireEvent("addFriendSuccess",id,r,from);if(currentUser.onaddFriendSuccess)currentUser.onaddFriendSuccess(id,r)},onError:function(){This.fireEvent("error",id,from);if(!window.currentUser)return;currentUser.fireEvent("addFriendError",id,r,from)}})}};XN.EVENT.enableCustomEvent(XN.USER.addFriendAction.prototype);XN.dynamicLoad({file:"http://s.xnimg.cn/jspro/xn.app.addFriend.js",funcs:["showRequestFriendDialog"]});XN.DOM.readyDo(function(){if(XN.get_check){var forms=Sizzle("form");for(var i=0;i<forms.length;i++){try{var safeInput=document.createElement('<input name="requestToken" type="hidden" value="'+XN.get_check+'"/>')}catch(e){var safeInput=document.createElement("input");safeInput.type="hidden";safeInput.name="requestToken";safeInput.value=XN.get_check}forms[i].appendChild(safeInput);try{safeInput=document.createElement('<input name="_rtk" type="hidden" value="'+XN.get_check_x+'"/>')}catch(e){safeInput=document.createElement("input");safeInput.type="hidden";safeInput.name="_rtk";safeInput.value=XN.get_check_x}forms[i].appendChild(safeInput)}}});XN.namespace("widgets");XN.WIDGETS=XN.Widgets=XN.widgets;function getImageType(image,width,height,callback){var type="";if(image.naturalHeight!=undefined){if(image.naturalHeight*(width/image.naturalWidth)<=height){type="normal"}else{type="too-height"}callback(type);return}if(XN.browser.IE&&parseInt(image.height)==0){var img=new Image;img.onload=function(){if(img.height<=height){type="normal"}else{type="too-height"}callback(type);img.parentNode.removeChild(img)};img.width=image.getAttribute("width")||width;img.style.cssText="position:absolute;top:-9999em;left:-9999em;";document.body.appendChild(img);img.src=image.src+"?"+(new Date).getTime()}else{if(!image.getAttribute("width"))image.width=width;if(image.height<=height){type="normal"}else{type="too-height"}callback(type)}}function fixImage(image,width,height){image.onload=null;if(XN.browser.IE&&image.naturalHeight==undefined){XN.dom.ready(function(){getImageType(image,width,height,function(type){if(type=="normal"){return}else if(type=="too-height"){clipImage2(image,width,height,"h")}})})}else{getImageType(image,width,height,function(type){if(type=="normal"){image.width=width;return}else if(type=="too-height"){clipImage2(image,width,height,"h")}})}}function clipImage2(image,w,h,type){var canvas=document.createElement("span");var canvasHolder=document.createElement("i");canvasHolder.className=image.className;var parentn=image.parentNode;if(!parentn)return;canvas.style.cssText="display:block;zoom:1;overflow:hidden;width:"+w+"px;padding:0;margin:0;background:transparent none;";var newImg=new Image;newImg.onload=function(){newImg.onload=null;if(type=="h"){var newHeight=newImg.height*(w/newImg.width);newImg.height=newHeight;newImg.width=w;if(newHeight>h)canvas.style.height=h+"px"}else if(type=="w"){newImg.width=newImg.width*(h/newImg.height);newImg.height=h}newImg.style.cssText="display:block;margin:0 auto;";canvas.appendChild(newImg);canvasHolder.appendChild(canvas);try{parentn.replaceChild(canvasHolder,image)}catch(e){if(window.console&&console.log)console.log(image.src)}canvasHolder.style.cursor="pointer";parentn.style.textDecoration="none";if(XN.browser.IE){parentn.style.position="relative";var clickFix=$element("div");clickFix.style.cssText="position:absolute;top:0;left:0;cursor:pointer;width:"+canvas.style.width+";height:"+(canvas.style.height?canvas.style.height:h+"px")+";background:url(about:_blank);";parentn.insertBefore(clickFix,parentn.firstChild)}};newImg.src=image.src}function clipImage(image){if(!image.getAttribute("width")||!image.getAttribute("height"))return;var width=parseInt(image.getAttribute("width"));var height=parseInt(image.getAttribute("height"));if(image.naturalWidth&&image.naturalHeight&&image.naturalWidth==width&&image.naturalHeight==height)return;var newImg=new Image;newImg.onload=function(){if(newImg.width==width&&newImg.height==height)return;var canvas=document.createElement("i");var parent=image.parentNode;if(!parent)return;parent.replaceChild(canvas,image);canvas.style.width=width+"px";canvas.style.height=height+"px";if(!XN.browser.IE){canvas.style.display="inline-block";canvas.appendChild(newImg);canvas.style.overflow="hidden";if(newImg.width>width)newImg.style.marginLeft="-"+parseInt((newImg.width-width)/2)+"px";if(newImg.height>height)newImg.style.marginTop="-"+parseInt((newImg.height-height)/2)+"px"}else{canvas.style.zoom="1";var top=parseInt((newImg.height-height)/2);canvas.style.background="url("+image.src+") no-repeat -"+parseInt((newImg.width-width)/2)+"px -"+(top>0?top:0)+"px";if(canvas.parentNode.tagName=="A")canvas.style.cursor="pointer"}};newImg.src=image.src}function roundify(image,dimension){return}XN.app.statsMaster={init:function(){var j={ID:XN.cookie.get("id"),R:encodeURIComponent(location.href)};var json=XN.JSON.build(j);this.listener=function(e){var e=e||window.event,_X=XN.event.pointerX(e),Y=XN.event.pointerY(e),U,T,el=XN.event.element(e),baseXel=$("dropmenuHolder");xx=XN.element.realLeft(baseXel);if(!(el&&el.tagName))return;T=el.tagName.toLowerCase();if(T=="a"){U=el.href}var _t=el.getAttribute("stats");if(_t){T=_t}j.X=_X-xx;j.Y=Y;if(U)j.U=encodeURIComponent(U);if(T)j.T=T;json=XN.JSON.build(j);(new Image).src="http://dj."+XN.env.domain+"/click?J="+json+"&t="+Math.random()};XN.event.addEvent(document,"mousedown",this.listener);if(!window.statisFocusEventAdded){XN.event.addEvent(window,"focus",function(){(new Image).src="http://dj."+XN.env.domain+"/focus?J="+json+"&t="+Math.random()});window.statisFocusEventAdded=true}if(!window.statisBlurEventAdded){XN.event.addEvent(window,"blur",function(){(new Image).src="http://dj."+XN.env.domain+"/unfocus?J="+json+"&t="+Math.random()});window.statisBlurEventAdded=true}if(!window.statisBottomEventAdded){XN.events.addEvent("scrollbottom",function(){(new Image).src="http://dj."+XN.env.domain+"/scrollbottom?J="+json+"&t="+Math.random()});window.statisBottomEventAdded=true}},destroy:function(){XN.event.delEvent(document,"mousedown",this.listener)}};XN.dom.ready(function(){if(!XN.BROWSER.IE6){if(window._developer_no_dj)return;XN.app.statsMaster.init()}});XN.dom.ready(function(){if(window._developer_no_guide)return;var isShow=false;var isBlur=true;XN.event.addEvent(document,"mousedown",function(){isBlur=false});XN.event.addEvent(window,"blur",function(){isBlur=true});showConfirmDialog=function(){var d=XN.DO.alert({title:"请领取您的"+XN.env.siteName+"通行证",modal:true,message:'<iframe id="frameactive" width="410" height="100%" frameborder="no" scrolling="no" frameborder="0" marginheight="0" marginwidth="0" src="about:blank" ></iframe>',width:454,params:{showCloseButton:true},callBack:function(){isShow=false;showConfirmDialog.fireEvent("close")}});arguments.callee.dialog=d;d.footer.hide();$("frameactive").src="http://channel."+XN.env.domain+"/confirm/show";$("frameactive").contentWindow.location.href="http://channel."+XN.env.domain+"/confirm/show";$("frameactive").addEvent("load",function(){d.refresh()})};XN.event.enableCustomEvent(showConfirmDialog);if(!XN.cookie.get("noconfirm"))return;var timer=setInterval(function(){if(isBlur||window.noConfirmWindow||isShow||!XN.cookie.get("noconfirm"))return;isShow=true;XN.cookie.del("noconfirm","/",XN.env.domain);XN.cookie.del("noconfirm","/",window.location.hostname);showConfirmDialog()},1e3);XN.log("未激活用户引导初始化over")});object.use("dom, ua",function(dom,ua){dom.wrap(window);dom.wrap(document);dom.ready(function(){document.delegate("a, a span","click",function(e){if(e.button==2){return}var node=this;if(this.tagName&&this.tagName.toLowerCase()=="span"){node=dom.wrap(this).getParent("a")}if(!node){return}var href=node.getAttribute("href"),len;if(!href){return}if(ua.ua.ie>=9){if(href=="javascript:;"||href.indexOf("javascript:void(0)")!=-1){node.setAttribute("href","#nogo");e.preventDefault();return}}len=href.length;if(href=="#nogo"||href=="#"){e.preventDefault();return}if(len>1&&href.slice(-1)=="#"||len>4&&href.slice(-5)=="#nogo"){e.preventDefault()}})})});(function(){if(window._developer_no_webpager)return;var _layout=0;var _close=false;var _expand=0;var storage_key="l4pager";var loading=null;if(XN.browser.IE6||window.location.host=="apps.renren.com"){_close=true}this.checkExpand=function(){var cw,ch;if(document.documentElement){ch=document.documentElement.clientHeight;cw=document.documentElement.clientWidth}return{width:cw,height:ch,full:cw>=1240&&!_close,layout:_layout,loading:loading}};var htag,i=0;while(htag=document.childNodes[i]){if(htag.tagName&&htag.tagName.toLowerCase()=="html"){break}i++}this.frameLayout=function(i){if(i==1){htag.className=(htag.className||"")+" marginRightForPager"}else if(i==0){htag.className=htag.className.replace("marginRightForPager","")}else{return _layout}_layout=i;window.fireEvent("changeLayout",{layout:i})};this.saveStat=function(s){var v=s?1:0;XN.cookie.set(storage_key,v,365,"/","renren.com")};this.readStat=function(){return _expand};this.noLoading=function(){if(loading&&loading.parentNode){document.body.removeChild(loading)}loading=null};_expand=XN.cookie.get(storage_key)=="1"?1:0;if(_expand&&this.checkExpand().full){this.frameLayout(1);XN.dom.ready(function(){loading=document.createElement("div");loading.id="wp-buddylist-placeholder";document.body.appendChild(loading)})}XN.smartyBuddy=this})();(function(){if(window.webpager&&window.webpager.addEvent)return;var proxyedEvents=[];window.webpager={addEvent:function(){proxyedEvents.push(XN.array.build(arguments))}};window.addEvent("webpagerReady",function(){var listener;while(listener=proxyedEvents.shift()){window.webpager.addEvent.apply(window.webpager,listener)}})})();object.use("dom",function(dom){if(window._developer_no_webpager)return;function initWebpager(){var webpagerDelay,timer,imengineId="imengine",imengineSrc;if(dom.id("bottombar")==null){return}if(/\((iPhone|iPad|iPod)/i.test(navigator.userAgent)||!window.ActiveXObject&&!window.XMLHttpRequest){return}if(dom.id(imengineId)!=null){return}if(XN.disableWebpager){return}imengineSrc="http://wpi.renren.com/wtalk/ime.htm?v="+(new Date).getTime();function makeImEngineIframe(){if(dom.id(imengineId)!=null){return}var iframe=document.createElement("iframe");iframe.setAttribute("id",imengineId);iframe.setAttribute("name",imengineId);iframe.setAttribute("src",imengineSrc);iframe.setAttribute("frameBorder","0");iframe.style.cssText="position:absolute;left:-1000pt;top:20pt;width:200pt;height:100pt";document.body.appendChild(iframe);if(timer){clearTimeout(timer);timer=null}}webpagerDelay=(XN.browser.IE?6:3)*1e3;timer=null;window.addEvent("load",function(){if(timer!=null){clearTimeout(timer);timer=null;makeImEngineIframe()}});timer=setTimeout(makeImEngineIframe,webpagerDelay)}dom.ready(initWebpager)});XN.dom.ready(function(){if(window._developer_no_backToTop)return;var dom_btmbar=jxn("#bottombar");var dom_btntop=jxn("#toolBackTo");if(dom_btntop.length>0){dom_btntop.bind("click",function(e){var fix=Sizzle("#sidebar2 .ready-to-fix")[0];setTimeout(function(){window.scrollTo(0,0)},0);if(fix){jxn(fix).removeClass("already-fixed")}XN.event.stop(e);return false})}var fixToBottom=function(){var btm=jxn(window).scrollTop()+jxn(window).height();dom_btmbar.css({position:"absolute",top:btm+"px"}).show()};var fixBackToTop=function(){var stop=jxn(window).scrollTop();if(stop<30){dom_btntop.hide();return}var btm=stop+jxn(window).height();var webpagerMargin=5;if(XN.BROWSER.IE6){webpagerMargin=10}if(dom_btntop.length>0){var webpagerOpened=false;var rw=1120;if(jxn("#friends-panel .actived").length>0){webpagerOpened=true;rw=1360}var ww=jxn(window).width();var w=0;if(ww>rw){w=(ww-(webpagerOpened?250:0)-980)/2+10+980}else{w=ww-60-(webpagerOpened?250:0)-webpagerMargin}dom_btntop.css("left",w+"px").show();if(XN.BROWSER.IE6)dom_btntop.css({position:"absolute",top:btm-98+"px"}).show()}if(stop==btm){XN.events.fireEvent("scrollbottom")}};if(dom_btntop.length>0){fixBackToTop();var isResizing=false;window.addEvent("changeLayout",function(e){fixBackToTop()});jxn(window).bind("resize",function(){if(!isResizing){isResizing=true;if(XN.BROWSER.IE6){dom_btmbar.hide()}dom_btntop.hide();setTimeout(function(){fixBackToTop();if(XN.BROWSER.IE6)fixToBottom();isResizing=false},200)}});var isHided=false;var scrollTimeout=null;if(XN.BROWSER.IE6){jxn(window).bind("scroll",function(){clearTimeout(scrollTimeout);if(!isHided){ishided=true;dom_btmbar.hide();dom_btntop.hide()}scrollTimeout=setTimeout(function(){fixToBottom();fixBackToTop();ishided=false},200)})}else{jxn(window).bind("scroll",function(){clearTimeout(scrollTimeout);scrollTimeout=setTimeout(function(){fixBackToTop()},10)})}}});(function(){XN.ui.positionFixedElement=function(params){this.config={ele:null,holder:"dropmenuHolder",alignWith:null,alignType:"4-1",x:0,y:0};XN.$extend(this.config,params);this.init();return this};var dist="-9999px",unit="px",rl="realLeft",rt="realTop",ow="offsetWidth",oh="offsetHeight",ie6=XN.browser.IE6;XN.ui.positionFixedElement.prototype={ele:null,holder:null,alignWith:null,alignType:null,x:0,y:0,init:function(){this.ele=$(this.config.ele);this.holder=$(this.config.holder);this.alignWith=$(this.config.alignWith);this.alignType=this.config.alignType;this.x=this.config.x;this.y=this.config.y;this.ele.style.position=ie6?"absolute":"fixed";this.ele.style.left=dist;this.ele.style.top=dist;this.holder.appendChild(this.ele);var This=this;XN.event.addEvent(window,"resize",function(){This.refresh()});if(ie6){XN.event.addEvent(window,"scroll",function(){This.refresh()})}},methods:{"1-1":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+unit},"1-2":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)-f[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+unit},"1-3":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)-f[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)-f[oh]+unit},"1-4":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)-f[oh]+unit},"2-1":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+el[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+unit},"2-2":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+el[ow]-f[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+unit},"2-3":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+el[ow]-f[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)-f[oh]+unit},"2-4":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+el[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)-f[oh]+unit},"3-1":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+el[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+el[oh]+unit},"3-2":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+el[ow]-f[ow]+unit;f.style.top=y+el[rt]()+el[oh]+unit},"3-3":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+el[ow]-f[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+el[oh]-f[oh]+unit},"3-4":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+el[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+el[oh]-f[oh]+unit},"4-1":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+el[oh]+unit},"4-2":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)-f[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+el[oh]+unit},"4-3":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)-f[ow]+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+el[oh]-f[oh]+unit},"4-4":function(f,el,x,y,p){f.style.left=x+el[rl]()-(ie6?p[rl]():0)+unit;f.style.top=y+el[rt]()-(ie6?p[rt]():0)+el[oh]-f[oh]+unit}},show:function(){if(this._isShow){return}this._isShow=true;this.methods[this.alignType](this.ele,this.alignWith,this.x,this.y,this.holder)},hide:function(){if(!this._isShow){return}this._isShow=false;this.ele.style.top=dist;this.ele.style.left=dist},refresh:function(){if(this._isShow){this._isShow=false;this.show()}}}})();XN.dom.ready(function(){if(!$("moreWeb"))return;new XN.UI.menu({bar:"moreWeb",menu:"moredownWeb",fireOn:"click",alignType:"3-2",offsetX:1})});object.define("xn/site-nav/drop-menu-seed","dom",function(require,exports,module){if(window._developer_no_dropmenu)return;var dom=require("dom");dom.ready(function(){var btn=dom.id("profileMenuActive"),appBtn=dom.id("showAppMenu"),interval;if(btn){btn.addEvent("mouseover",function(){btn.removeEvent("mouseover",arguments.callee);btn.topNavhovered=true;btn.addEvent("mouseleave",function(){btn.topNavhovered=false;btn.removeEvent("mouseleave",arguments.callee)});setTimeout(function(){require.async("xn/site-nav/drop-menu-profile",function(dmp){dmp.init()})},200)})}if(appBtn){appBtn.addEvent("mouseover",function(){var listener=arguments.callee;appBtn.removeEvent("mouseover",listener);appBtn.topNavhovered=true;appBtn.addEvent("mouseleave",function(){appBtn.topNavhovered=false;appBtn.removeEvent("mouseleave",arguments.callee);if(interval){clearTimeout(interval);interval=null;appBtn.addEvent("mouseover",listener)}});interval=setTimeout(function(){interval=null;require.async("xn/site-nav/drop-menu-app",function(dma){dma.init()})},50)})}})});object.execute("xn/site-nav/drop-menu-seed");XN.dom.ready(function(){var friTopLimit={friTopDialog:null,renderTpl:function(index){var letterTips="";var bottomStr="";if(index==1){letterTips="您的好友数量即将达到上限TAT~您可以开通关注，让新朋友们关注您，或开通VIP，尊享更高上限哦~";bottomStr='<a href="http://vip.renren.com/pay/pre" target="_blank" class="vip-pay">开通VIP</a><a href="http://follow.renren.com/promotion" target="_blank" class="follow-attention">开通关注</a>'}else{letterTips="您的好友数量即将到达上限TAT~您可以开通关注，让新朋友们关注您~";bottomStr='<a href="http://follow.renren.com/promotion" target="_blank" class="follow-attention">开通关注</a>'}var dialogDom=['<div id="ui_dialog_container" class="friend_toplimit_container">','<div class="friend_toplimit_main">','<div id="ui_dialog_header" class="friend_toplimit_head">','<span class="title">提醒</span><a id="ui_dialog_close" class="friend_toplimit_close" href="#nogo">关闭</a>',"</div>",'<div id="ui_dialog_body" class="toplimit-con">','<div class="toplimit-tips">','<p class="toplimit-tips-con">'+letterTips+"</p>","</div>",'<div class="toplimit-btns">'+bottomStr+"</div>","</div>","</div>",'</div><div id="ui_dialog_footer"></div>'].join("");
return dialogDom},buildDialog:function(index){var dialogHtml=this.renderTpl(index);friTopDialog=new XN.ui.dialog({HTML:dialogHtml}).setWidth(380);window.v6_friTopLimit_alertDialog=friTopDialog;window.v6_friTopLimit_alertOpen=true},dialogEvents:function(){var closeBtn=Sizzle(".friend_toplimit_close")[0];if(closeBtn){$(closeBtn).addEvent("click",function(){if(friTopDialog){friTopDialog.remove();window.v6_friTopLimit_alertOpen=false}})}},init:function(){if(typeof nx=="undefined"){var tcFlag=$("showActivityFlag");if(tcFlag){var tcFlagV=tcFlag.value;if(tcFlagV){var indexFlag=$("showActivityIndex");if(indexFlag){var index=indexFlag.value;this.buildDialog(index);this.dialogEvents()}}}}}};friTopLimit.init()});object.use("dom, events",function(dom,events){var storageKey="v6_header_notify",typeList=["remind","apply","notice"];function getTypeId(type){switch(type){case"remind":return 0;break;case"apply":return 1;break;case"notice":return 2;break}}var bubble={setNum:function(i,num){var _this=this,icons=$("navMessage").getElementsByTagName("span");num=num>=100?"99":num;if(!dom.getElement("i",icons[i])){var el=document.createElement("i");el.style.display="none";el.innerHTML="<u><b>&nbsp;</b><var>0</var></u><em>&nbsp;</em>";icons[i].appendChild(el)}icons[i].getElementsByTagName("var")[0].innerHTML=num;if(parseInt(num,10)>0&&!XN.element.hasClassName(icons[i],"click")){var cur=icons[i].getElementsByTagName("i")[0];if(!XN.element.visible(cur)){cur.style.display="block";_this.show(i)}}else{icons[i].getElementsByTagName("i")[0].style.display="none"}},set:function(type,num){var id=getTypeId(type);this.setNum(id,num)},show:function(i){var time,_this=this,tab=$("navMessage").getElementsByTagName("span")[i],obj=dom.getElement("i",tab);setTimeout(function(){obj.addClass("t")},0)},setUI:function(data){this.set("remind",parseInt(data.remind,10));this.set("apply",parseInt(data.apply,10));this.set("notice",parseInt(data.notice,10))},reset:function(type){var id=getTypeId(type);this.setNum(id,0);if(!window.webpager){return}if(webpager.getItem&&webpager.setItem){var s=XN.json.parse(webpager.getItem(storageKey));if(s){s[type]=0}webpager.setItem(storageKey,JSON.stringify(s))}},get:function(){new XN.net.xmlhttp({url:"http://notify.renren.com/rmessage/getunreadcount?t="+(new Date).getTime(),data:"",method:"get",onSuccess:function(r){var res=XN.json.parse(r.responseText);res.t=XN.cookie.get("t");XN.cookie.del("first_login_flag","/","renren.com","false");if(webpager.setItem){if(res.bbs){res.remind=res.remind+res.bbs}webpager.setItem(storageKey,JSON.stringify(res))}if(typeof isHome=="boolean"){isHome=null}},onError:function(){XN.DO.showError("网络通信失败,请重试")}})}};var action={mouseover:function(item,i){var flag=dom.getElement("i",item),type=typeList[i];if(flag&&XN.element.visible(flag)){XN.element.addClass(item,"hover")}else{XN.element.addClass(item,"on")}XN.element.addClass(item,type+"-hover")},mouseout:function(item,i){var type=typeList[i];XN.element.delClass(item,"on");XN.element.delClass(item,"hover");XN.element.delClass(item,type+"-hover")},click:function(item,i){var type=typeList[i];XN.loadFile("http://s.xnimg.cn/a56606/n/core/js/message-center-all.js",function(){MessageCenter.bubble=bubble;if(XN.element.hasClassName(item,"click")){XN.element.delClass(item,"click");$("showMessage").style.display="none";MessageCenter.setDefault();return}MessageCenter.setDefault();XN.element.addClass(item,"click");MessageCenter.setIframePosition(item);MessageCenter.init(type,bubble);XN.element.addClass(item,type+"-click");bubble.reset(type)})}};function bindEvent(){Sizzle("#navMessage span").forEach(function(item,i){XN.event.addEvent(item,"click",function(e){action.click(item,i);e.stopPropagation()});XN.event.addEvent(item,"mouseover",function(){action.mouseover(item,i)});XN.event.addEvent(item,"mouseout",function(){action.mouseout(item,i)})})}dom.ready(function(){bindEvent();var timer,delay=(XN.browser.IE?4:2)*1e3;if(XN.browser.IE6||XN.browser.IE7)delay=12*1e3;function getBubbleInfo(){timer=setTimeout(function(){if(timer){clearTimeout(timer);timer=null}bubble.get()},delay)}window.addEvent("webpagerReady",function(e){var persist,s,isLogin=XN.cookie.get("first_login_flag");var ts=["","remind","apply","notice","remind"];if(webpager.getItem){s=webpager.getItem(storageKey)}if(window.asyncHTMLManager){window.asyncHTMLManager.addEvent("load",function(){if(typeof isHome=="boolean"){getBubbleInfo()}})}if(s){s=JSON.parse(s);if(!isLogin){persist=s}}if(!persist||typeof isHome=="boolean"){getBubbleInfo()}else{bubble.setUI(s)}webpager.addEvent("storage",function(e){if(/v6_header_notify/.test(e.keys)){var s;if(webpager.getItem){s=webpager.getItem(storageKey);s=JSON.parse(s);bubble.setUI(s)}}});window.webpager.messager.addEvent("message",function(e){if(e.service=="notify"&&e.source=="webpager"){var msg=e.data,s;if(msg.feedtype&&msg.feedtype==="newsstatus"){if(webpager.getItem&&webpager.setItem){s=JSON.parse(webpager.getItem(storageKey));s[ts[msg.bigtype]]--;webpager.setItem(storageKey,JSON.stringify(s))}return}setTimeout(function(){if(webpager.isLocalConnect()){window.imengine.imHelper.playSound()}if(webpager.getItem&&webpager.setItem){s=JSON.parse(webpager.getItem(storageKey));s[ts[msg.bigtype]]++;webpager.setItem(storageKey,JSON.stringify(s))}},1e3*Math.random())}})})})});object.define("xn/site-nav/switch-account-seed",function(require,exports,module){window.__logEvents=false;require.async("xn/site-nav/switch-account",function(sa){sa.accMenu.show();sa.fetch();window.__logEvents=true})});XN.dom.ready(function(){if(window._developer_no_account)return;var m=$("accountMenu");if(!m)return;m.addEvent("mouseover",function(){m.delEvent("mouseover",arguments.callee);object.execute("xn/site-nav/switch-account-seed")})});object.define("xn/site-nav/search-seed",function(require,exports,module){window.__logEvents=false;require.async("xn/site-nav/search",function(){var sinput=$("navSearchInput");sinput.blur();sinput.focus();window.__logEvents=true})});XN.dom.ready(function(){if(window._developer_no_search)return;var sinput=$("navSearchInput"),sb=$("searchBtnAC");if(!sinput||!sb)return;if(window.asyncHTMLManager){sb.addEvent=function(type,callback,bubble){window.asyncHTMLManager.dom.Element.prototype.addEvent.call(sb,type,callback,bubble)}}if(sinput.value==""){sinput.value=="找人、视频、日志、照片";sinput.setAttribute("defaultval","找人、视频、日志、照片")}window.g_searchFromHead=function(){var val=sinput.value;if(val==="找人、视频、日志、照片"||XN.string.trim(val)===""){val=""}window.location.href="http://browse.renren.com/s/all?from=opensearch&q="+encodeURIComponent(val)};sb.addEvent("click",function(e){if(XN.browser.IE6){setTimeout(function(){window.g_searchFromHead()},1)}else{window.g_searchFromHead()}});sinput.addEvent("focus",function(){var val=sinput.value;defaultVal=sinput.getAttribute("defaultval");if(XN.string.trim(val)===XN.string.trim(defaultVal)){sinput.value="";sinput.style.color="#000";sinput.style.backgroundColor="#fff";sb.style.backgroundColor="#fff"}if(!sinput.hack4guide){object.execute("xn/site-nav/search-seed");if(XN.user.id){var url="http://search.renren.com/LogSystem/cache?userid="+XN.user.id+"&from=2"+"&t="+Math.random();(new Image).src=url}}sinput.hack4guide=true});sinput.addEvent("blur",function(){var val=sinput.value,defaultVal=sinput.getAttribute("defaultval");if(XN.string.trim(val)===""){sinput.value=defaultVal;sinput.style.color="#999";sinput.style.backgroundColor="#edf3f9";sb.style.backgroundColor="#edf3f9"}})});XN.photoSeedHandler=function(){function photoSeedHandler(json){var list,i,len,item;try{XN.getFileVersion(json.version)}catch(e){}for(list=json.preLoad,i=0,len=list.length;i<len;i+=1){try{if(list[i].path()){item=new Image;item.src=list[i].src}}catch(e){}}for(list=json.exec,i=0,len=list.length;i<len;i+=1){try{if(list[i].path()){XN.loadFile(list[i].src)}}catch(e){}}}XN.dom.ready(function(){if(window._developer_no_photo_all)return;var psrc="http://s.xnimg.cn/n/apps/photo/modules/seed/photoSeed.js?r="+ +new Date;if(window.photoSeedSrc){psrc=window.photoSeedSrc}var script=document.createElement("script");script.type="text/javascript";script.async=true;script.src=psrc;document.getElementsByTagName("head")[0].appendChild(script)});return photoSeedHandler}();object.add("xn","./net",function(exports){});object.define("xn.net","sys, net",function(require,exports){var sys=require("sys");var net=require("net");var oldSend=net.Request.prototype.send;net.Request.set("send",function(self,data){data=data||self.data||"";if(self.method=="post"&&XN.get_check&&!/[\?|\&]requestToken=/.test(data)){data+=(data?"&":"")+"requestToken="+XN.get_check}if(self.method=="post"&&XN.get_check_x&&!/[\?|\&]_rtk=/.test(data)){data+=(data?"&":"")+"_rtk="+XN.get_check_x}oldSend.call(self,data)});this.Request=net.Request});(function(){function shareDelegate(e){var target=$(XN.event.element(e||window.event));if(!target)return false;if(!target.hasClassName("share_new")){return false}if(!window.XNShareObject){setTimeout(function(){XN.loadFile("http://s.xnimg.cn/jspro/xn.app.share.js",function(){XN.event.delEvent(document,"mouseover",shareDelegate);XNShareObject._register({autoRegister:false,floatMode:true});XNShareObject.forceShowFloat(target)})},0)}}XN.event.addEvent(document,"mouseover",shareDelegate)})();object.define("xn.mention","dom",function(require,exports,module){var dom=require("dom");var initMain=this.initMain=function(obj,item,cb){if(obj.mentionInited)return;obj.mentionInited=true;require.async("xn/mentionMain",function(mentionMain){mentionMain.Mention.init({obj:item.obj,ugcId:item.ugcId||"",ugcType:item.ugcType||"",ownerId:item.ownerId||"",scrollable:item.scrollable,popTop:item.popTop,whisper:item.whisper===false?false:true,button:item.button||null,limit:item.limit||10,recentLimit:item.recentLimit||6});if(cb)cb()})};var buttonClick=function(obj,e){if(e)XN.event.stop(e);dom.wrap(obj);if(XN.browser.WebKit){obj.focus();obj.blur()}obj.focusToPosition(obj.get("selectionStart"));var action=function(){var toInsertVal="@",elVal=XN.form.help(obj).getRealValue();var cpos=obj.get("selectionStart");if(elVal.slice(cpos-1,cpos)=="@"){toInsertVal=""}obj.value=elVal.slice(0,cpos)+toInsertVal+elVal.slice(cpos);obj.focusToPosition(cpos+toInsertVal.length);obj.mention.check()};if(XN.browser.IE){setTimeout(action,0)}else{action()}};function addMentionFor(item){var obj=item.obj;if(obj.mention)return;obj=$(obj);obj.addEvent("focus",function(){initMain(obj,item,function(){if(item.initCallback){item.initCallback(obj)}})});if(item.button){XN.event.addEvent(item.button,"click",function(e){if(obj.mention){buttonClick(obj,e)}else{initMain(obj,item,function(){buttonClick(obj,e);if(item.initCallback){item.initCallback(obj)}})}})}}this.Mention={init:function(list){if(isArray(list)){for(var i=0,l=list.length;i<l;i++){addMentionFor(list[i])}}else if(isObject(list)){addMentionFor(list)}}}});object.use("xn.mention",function(xn){window.Mention=xn.mention.Mention});XN.dom.ready(function(){if(showNamecardCondition()&&!window.nx){object.use("xn/namecard/seed",function(seed){seed.loadNamecardMatrix()})}});function showNamecardCondition(){if(XN.user&&XN.user.id)return true;else return false}object.define("xn/namecard/seed","dom",function(require,exports){exports.loadNamecardMatrix=function(){var dom=require("dom");window.globalNamecard={additionalY:0,delRcd:false};window.globalNamecard.addFriendCallback=function(notAdded){if(!window.globalNamecard.delRcd)return;var id=window.globalNamecard.delRcd.id.substring(16),type=window.globalNamecard.delRcd.getAttribute("data-type");if(!notAdded){logRcd({action:"RecFcard_addFriendEnd",guest_id:id,type:type});window.globalNamecard.delRcd.parentNode.removeChild(window.globalNamecard.delRcd)}else{logRcd({action:"RecFcard_addFriend",guest_id:id,type:type})}};dom.wrap(document.body).delegate("*[namecard]","mouseover",function(ele){dom.wrap(document.body).undelegate("*[namecard]","mouseover",arguments.callee);require.async("xn/namecard, xn/showShareFriend",function(namecard){window.globalNamecard.namecard=new namecard.Namecard(window.globalNamecard.additionalY,ele)})})}});